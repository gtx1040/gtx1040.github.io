<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
	
<!-- Mirrored from wiki.nexusrp.com/wiki/Resource:Map_manager by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 27 Aug 2015 07:29:10 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<meta name="generator" content="MediaWiki 1.22.13" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="Nexus RP: Wiki (en)" />
<link rel="EditURI" type="application/rsd+xml" href="/api.php?action=rsd" />
<link rel="copyright" href="http://www.gnu.org/copyleft/fdl.html" />
<link rel="alternate" type="application/atom+xml" title="Nexus RP: Wiki Atom feed" index.html?title=Special:RecentChanges&amp;feed=atom" />
<link rel="canonical" href="Resource_Mapmanager.html" />		<title>Resource:Mapmanager - Nexus RP: Wiki</title>
		<link rel="stylesheet" href="/load.php?debug=false&amp;lang=en&amp;modules=ext.rtlcite%7Cmediawiki.legacy.commonPrint%2Cshared&amp;only=styles&amp;skin=nrpbook&amp;*" />
<link rel="stylesheet" href="../skins/nrpbook/main11b9.css?303" media="screen" />
<!--[if lt IE 5.5000]><link rel="stylesheet" href="/skins/nrpbook/IE50Fixes.css?303" media="screen" /><![endif]-->
<!--[if IE 5.5000]><link rel="stylesheet" href="/skins/nrpbook/IE55Fixes.css?303" media="screen" /><![endif]-->
<!--[if IE 6]><link rel="stylesheet" href="/skins/nrpbook/IE60Fixes.css?303" media="screen" /><![endif]-->
<!--[if IE 7]><link rel="stylesheet" href="/skins/nrpbook/IE70Fixes.css?303" media="screen" /><![endif]--><meta name="ResourceLoaderDynamicStyles" content="" />
<link rel="stylesheet" href="/load.php?debug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=nrpbook&amp;*" />
<style>a:lang(ar),a:lang(ckb),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: nrp_wiki_1_22_13-wiki_dev_:resourceloader:filter:minify-css:7:68ffccca97fd0532df6141dcbaf256b6 */</style>

		<!--[if lt IE 7]><script type="text/javascript" src="/skins/common/IEFixes.js?303"></script>
		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->

		<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"Resource","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":100,"wgPageName":"Resource:Mapmanager","wgTitle":"Mapmanager","wgCurRevisionId":35262,"wgRevisionId":35262,"wgArticleId":2647,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Resource"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransforNRPble":["",""],"wgDigitTransforNRPble":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Resource:Mapmanager","wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgRedirectedFrom":"Resource:Map_manager"});
}</script>
		<script type="text/javascript" src="../skins/common/wikibits11b9.js?303"><!-- wikibits js --></script>
		<!-- Head Scripts -->
<script src="/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=nrpbook&amp;*"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"Resource","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":100,"wgPageName":"Resource:Mapmanager","wgTitle":"Mapmanager","wgCurRevisionId":35262,"wgRevisionId":35262,"wgArticleId":2647,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Resource"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransforNRPble":["",""],"wgDigitTransforNRPble":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Resource:Mapmanager","wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgRedirectedFrom":"Resource:Map_manager"});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function(){mw.user.options.set({"ccmeonemails":0,"cols":80,"date":"default","diffonly":0,"disablemail":0,"disablesuggest":0,"editfont":"default","editondblclick":0,"editsection":1,"editsectiononrightclick":0,"enotifminoredits":0,"enotifrevealaddr":0,"enotifusertalkpages":1,"enotifwatchlistpages":0,"extendwatchlist":0,"fancysig":0,"forceeditsummary":0,"gender":"unknown","hideminor":0,"hidepatrolled":0,"imagesize":2,"justify":0,"math":1,"minordefault":0,"newpageshidepatrolled":0,"nocache":0,"noconvertlink":0,"norollbackdiff":0,"numberheadings":0,"previewonfirst":0,"previewontop":1,"rcdays":7,"rclimit":50,"rememberpassword":0,"rows":25,"searchlimit":20,"showhiddencats":0,"shownumberswatching":1,"showtoc":1,"showtoolbar":1,"skin":"nrpbook","stubthreshold":0,"thumbsize":2,"underline":2,"uselivepreview":0,"usenewrc":0,"vector-simplesearch":1,"watchcreations":0,"watchdefault":0,"watchdeletion":0,"watchlistdays":3,"watchlisthideanons":0,"watchlisthidebots":0,
"watchlisthideliu":0,"watchlisthideminor":0,"watchlisthideown":0,"watchlisthidepatrolled":0,"watchmoves":0,"wllimit":250,"useeditwarning":1,"prefershttps":1,"language":"en","variant-gan":"gan","variant-iu":"iu","variant-kk":"kk","variant-ku":"ku","variant-shi":"shi","variant-sr":"sr","variant-tg":"tg","variant-uz":"uz","variant-zh":"zh","searchNs0":true,"searchNs1":false,"searchNs2":false,"searchNs3":false,"searchNs4":false,"searchNs5":false,"searchNs6":false,"searchNs7":false,"searchNs8":false,"searchNs9":false,"searchNs10":false,"searchNs11":false,"searchNs12":false,"searchNs13":false,"searchNs14":false,"searchNs15":false,"searchNs100":false,"variant":"en"});},{},{});mw.loader.implement("user.tokens",function(){mw.user.tokens.set({"editToken":"+\\","patrolToken":false,"watchToken":false});},{},{});
/* cache key: nrp_wiki_1_22_13-wiki_dev_:resourceloader:filter:minify-js:7:925126ceab977200cdcc48193642dea0 */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax"]);
}</script><style type="text/css">/*<![CDATA[*/
.source-lua {line-height: normal;}
.source-lua li, .source-lua pre {
	line-height: normal; border: 0px none white;
}
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for lua
 * CSS class: source-lua, CSS id: 
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 * --------------------------------------
 */
.lua.source-lua .de1, .lua.source-lua .de2 {font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;font-family: monospace, monospace;}
.lua.source-lua  {font-family:monospace;}
.lua.source-lua .imp {font-weight: bold; color: red;}
.lua.source-lua li, .lua.source-lua .li1 {font-weight: normal; vertical-align:top;}
.lua.source-lua .ln {width:1px;text-align:right;margin:0;padding:0 2px;vertical-align:top;}
.lua.source-lua .li2 {font-weight: bold; vertical-align:top;}
.lua.source-lua .kw1 {color: #b1b100;}
.lua.source-lua .co1 {color: #808080; font-style: italic;}
.lua.source-lua .coMULTI {color: #808080; font-style: italic;}
.lua.source-lua .es0 {color: #000099; font-weight: bold;}
.lua.source-lua .br0 {color: #66cc66;}
.lua.source-lua .sy0 {color: #66cc66;}
.lua.source-lua .st0 {color: #00A600;}
.lua.source-lua .nu0 {color: #cc66cc;}
.lua.source-lua .me0 {color: #b1b100;}
.lua.source-lua .ln-xtra, .lua.source-lua li.ln-xtra, .lua.source-lua div.ln-xtra {background-color: #ffc;}
.lua.source-lua span.xtra { display:block; }

/*]]>*/
</style>	</head>
<body class="mediawiki ltr ns-100 ns-subject page-Resource_Mapmanager skin-nrpbook">
	<div id="globalWrapper">
		
		<div id="column-content">
	<div id="content">
		<a name="top" id="top"></a>
			<h1 id="firstHeading" class="firstHeading">Resource:Mapmanager</h1>
		<div id="bodyContent">
			<h3 id="siteSub">From Nexus RP: Wiki</h3>
			<div id="contentSub">(Redirected from <a index.html?title=Resource:Map_manager&amp;redirect=no" title="Resource:Map manager">Resource:Map manager</a>)</div>
									<div id="jump-to-nav">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>		<!-- start content -->
<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><p><script type='text/javascript'>setHeadingClass('resource','Resource');</script>
<script type='text/javascript'>removeNamespaceName();</script>
<script type='text/javascript'>makeTitleLowercaseFirstLetter();</script>
The map manager is a resource included in the NRP DM server suite. It offers commands, functions and events for the gamemodes to dynamically manage their maps. For example, when a race server needs to load different tracks for each race, instead of having all of them in the same resource as the main script, they can be stored in separate resources and then loaded simply with the "changeGamemodeMap" function when a new race starts. 
</p><p>Specifically, the map manager lists gamemodes/maps and manages gamemode/map loading. It applies certain map settings affecting the game world and sets ASE game type and map name rule values as well. It includes a web listing which auto updates and highlights the current mode/map combination.
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#A_simple_tutorial"><span class="tocnumber">1</span> <span class="toctext">A simple tutorial</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Usage"><span class="tocnumber">2</span> <span class="toctext">Usage</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Optional_resource_attributes"><span class="tocnumber">3</span> <span class="toctext">Optional resource attributes</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Commands"><span class="tocnumber">4</span> <span class="toctext">Commands</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Settings"><span class="tocnumber">5</span> <span class="toctext">Settings</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#Exported_functions"><span class="tocnumber">6</span> <span class="toctext">Exported functions</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="#Fired_events"><span class="tocnumber">7</span> <span class="toctext">Fired events</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="#Supported_map_settings"><span class="tocnumber">8</span> <span class="toctext">Supported map settings</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="A_simple_tutorial">A simple tutorial</span></h2>
<p>In this section we are going to continue the basic gamemode we created in the <a href="Scripting_Introduction.html" title="Scripting Introduction">Introduction to Scripting</a>. We will add a simple map resource that only contains the spawnpoint data for the players, and load the data in the main script when the player needs to spawn.
</p><p>First of all, we make a folder under /Your NRP Server/mods/deathmatch/resources/, and name it "mymap". Then under /mymap/ directory, create a text file and name it "meta.xml", which is required for every resource.
</p><p>Enter the following codes in the <i>meta.xml</i> file:
</p>
<!-- PLAIN TEXT CODE FOR BOTS |<meta> <info type="map" gamemodes="myserver"/> <map src="mymap.map"/> </meta>|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><span class="sy0">&lt;</span>meta<span class="sy0">&gt;</span>
   <span class="sy0">&lt;</span>info <span class="kw1">type</span><span class="sy0">=</span><span class="st0">&quot;map&quot;</span> gamemodes<span class="sy0">=</span><span class="st0">&quot;myserver&quot;</span><span class="sy0">/&gt;</span>
   <span class="sy0">&lt;</span>map src<span class="sy0">=</span><span class="st0">&quot;mymap.map&quot;</span><span class="sy0">/&gt;</span>
<span class="sy0">&lt;/</span>meta<span class="sy0">&gt;</span></pre></div></div>
<p>Note that this resource is "linked" to the main resource with the <i>gamemodes=""</i> tag, which contains the name of the main resource. In the <i>map</i> tag, it indicates the name of the .map file which contains the actual map data.
</p><p>Now let's create another text file under /mymap/ and name it "mymap.map", and enter the following codes:
</p>
<!-- PLAIN TEXT CODE FOR BOTS |<map> <spawnpoint id="spawnpoint1" posX="1959.5487060547" posY="-1714.4613037109" posZ="18" rot="63.350006103516" model="0"/> </map>|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><span class="sy0">&lt;</span>map<span class="sy0">&gt;</span>
   <span class="sy0">&lt;</span>spawnpoint id<span class="sy0">=</span><span class="st0">&quot;spawnpoint1&quot;</span> posX<span class="sy0">=</span><span class="st0">&quot;1959.5487060547&quot;</span> posY<span class="sy0">=</span><span class="st0">&quot;-1714.4613037109&quot;</span> posZ<span class="sy0">=</span><span class="st0">&quot;18&quot;</span> rot<span class="sy0">=</span><span class="st0">&quot;63.350006103516&quot;</span> model<span class="sy0">=</span><span class="st0">&quot;0&quot;</span><span class="sy0">/&gt;</span>
<span class="sy0">&lt;/</span>map<span class="sy0">&gt;</span></pre></div></div>
<p>Note that "spawnpoint" is the type of the element, used in <a href="GetElementsByType.html" title="GetElementsByType">getElementsByType</a> function; likewise, "id" is used in <a href="GetElementByID.html" title="GetElementByID">getElementByID</a> function. 
</p><p>To load the map data, the main script needs access to the map resource itself. Now let's edit the script.lua file in "myserver" resource. Enter the following code:
</p>
<!-- PLAIN TEXT CODE FOR BOTS |function loadMap(startedMap) mapRoot = getResourceRootElement(startedMap) end addEventHandler("onGamemodeMapStart", getRootElement(), loadMap)|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><span class="kw1">function</span> loadMap<span class="br0">&#40;</span>startedMap<span class="br0">&#41;</span>
	mapRoot <span class="sy0">=</span> <a href="GetResourceRootElement.html" class="kw2"><span class="kw2">getResourceRootElement</span></a><span class="br0">&#40;</span>startedMap<span class="br0">&#41;</span>
<span class="kw1">end</span>
&#160;
<a href="AddEventHandler.html" class="kw2"><span class="kw2">addEventHandler</span></a><span class="br0">&#40;</span><span class="st0">&quot;onGamemodeMapStart&quot;</span>, <a href="GetRootElement.html" class="kw2"><span class="kw2">getRootElement</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span>, loadMap<span class="br0">&#41;</span></pre></div></div>
<p>Basically, the "onGamemodeMapStart" event gives us the handle of the map ("startedMap"), which we used to extract the handle of the resource containing the map ("mapRoot").
</p><p>With the resource handle, we can extract the spawnpoint information from it. Look at the joinHandler() function in script.lua, instead of specifying x, y and z, we can use the map data as the following:
</p>
<!-- PLAIN TEXT CODE FOR BOTS |function joinHandler() local spawn = getElementsByType("spawnpoint", mapRoot) local x,y,z,r for key, value in pairs(spawn) do x = getElementData(value, "posX") y = getElementData(value, "posY") z = getElementData(value, "posZ") r = getElementData(value, "rot") end spawnPlayer(source, x, y, z) fadeCamera(source, true) end|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><span class="kw1">function</span> joinHandler<span class="br0">&#40;</span><span class="br0">&#41;</span>
	<span class="kw1">local</span> spawn <span class="sy0">=</span> getElementsByType<span class="br0">&#40;</span><span class="st0">&quot;spawnpoint&quot;</span>, mapRoot<span class="br0">&#41;</span>
	<span class="kw1">local</span> x,y,z,r
	<span class="kw1">for</span> key, value <span class="kw1">in</span> <span class="kw1">pairs</span><span class="br0">&#40;</span>spawn<span class="br0">&#41;</span> <span class="kw1">do</span>
		x <span class="sy0">=</span> <a href="GetElementData.html" class="kw2"><span class="kw2">getElementData</span></a><span class="br0">&#40;</span>value, <span class="st0">&quot;posX&quot;</span><span class="br0">&#41;</span>
		y <span class="sy0">=</span> <a href="GetElementData.html" class="kw2"><span class="kw2">getElementData</span></a><span class="br0">&#40;</span>value, <span class="st0">&quot;posY&quot;</span><span class="br0">&#41;</span>
		z <span class="sy0">=</span> <a href="GetElementData.html" class="kw2"><span class="kw2">getElementData</span></a><span class="br0">&#40;</span>value, <span class="st0">&quot;posZ&quot;</span><span class="br0">&#41;</span>
		r <span class="sy0">=</span> <a href="GetElementData.html" class="kw2"><span class="kw2">getElementData</span></a><span class="br0">&#40;</span>value, <span class="st0">&quot;rot&quot;</span><span class="br0">&#41;</span>
	<span class="kw1">end</span>
	<a href="SpawnPlayer.html" class="kw6"><span class="kw6">spawnPlayer</span></a><span class="br0">&#40;</span>source, x, y, z<span class="br0">&#41;</span>
	<a href="FadeCamera.html" class="kw2"><span class="kw2">fadeCamera</span></a><span class="br0">&#40;</span>source, <span class="kw1">true</span><span class="br0">&#41;</span>
<span class="kw1">end</span></pre></div></div>
<p>Now you may start the gamemode in the server console with the following command:
</p><p><b>gamemode myserver mymap</b>
</p>
<h2><span class="mw-headline" id="Usage">Usage</span></h2>
<p>To use the map manager, your resources must first be marked as either gamemodes or maps.
</p><p>You have to tag the <b>gamemode resource</b> with the correct type in its info tag:
</p>
<!-- PLAIN TEXT CODE FOR BOTS |<info description="A gamemode" type="gamemode" />|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><span class="sy0">&lt;</span>info description<span class="sy0">=</span><span class="st0">&quot;A gamemode&quot;</span> <span class="kw1">type</span><span class="sy0">=</span><span class="st0">&quot;gamemode&quot;</span> <span class="sy0">/&gt;</span></pre></div></div>
<p><b>Map resources</b> also need the <i>type="map"</i> tag, plus a <i>gamemodes</i> tag listing the gamemode resources they're compatible with in a comma-separated list <i>without spaces</i>.
</p>
<!-- PLAIN TEXT CODE FOR BOTS |<info description="A gamemode map" type="map" gamemodes="ctv,koth" />|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><span class="sy0">&lt;</span>info description<span class="sy0">=</span><span class="st0">&quot;A gamemode map&quot;</span> <span class="kw1">type</span><span class="sy0">=</span><span class="st0">&quot;map&quot;</span> gamemodes<span class="sy0">=</span><span class="st0">&quot;ctv,koth&quot;</span> <span class="sy0">/&gt;</span></pre></div></div>
<p>There can be only one gamemode and one gamemode map loaded at once.
</p>
<h2><span class="mw-headline" id="Optional_resource_attributes">Optional resource attributes</span></h2>
<p>These attributes all go in the corresponding resource's info tag.
</p><p><b>name:</b> A friendly name for your gamemode or map, to be displayed in the start messages or map listings instead of the filename.
</p>
<h2><span class="mw-headline" id="Commands">Commands</span></h2>
<p><b>changemap newmap [newgamemode]</b> (changes the gamemode map to a new one, optionally changing the gamemode as well)
</p><p><b>changemode newgamemode [newmap]</b> (changes to a new gamemode, optionally starting a map with it)
</p><p><b>gamemode newgamemode [newmap]</b> (same as previous one)
</p><p><b>stopmode</b> (stops the current mode and mode map)
</p><p><b>stopmap</b> (stops the current mode map)
</p><p><b>maps [gamemode]</b> (lists all maps in the server, optionally all maps compatible with a gamemode)
</p><p><b>gamemodes</b> (lists all gamemodes)
</p>
<h2><span class="mw-headline" id="Settings">Settings</span></h2>
<p><b>*mapmanager.color</b> [hex color string] (changes the mapmanager's output messages' color) (default: #E1AA5A)
</p><p><b>*mapmanager.messages</b> [boolean] (whether map/gm changes are enabled) (default: true)
</p><p><b>*mapmanager.ASE</b> [boolean] (whether the manager will set ASE gametype / mapname) (default: true)
</p>
<h2><span class="mw-headline" id="Exported_functions">Exported functions</span></h2>
<!-- PLAIN TEXT CODE FOR BOTS |bool changeGamemode ( resource newGamemode, [ resource mapToLoadWith ] )|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><a href="Bool.html" class="kw3"><span class="kw3">bool</span></a> changeGamemode <span class="br0">&#40;</span> <a href="Resource.html" class="kw3"><span class="kw3">resource</span></a> newGamemode, <span class="br0">&#91;</span> <a href="Resource.html" class="kw3"><span class="kw3">resource</span></a> mapToLoadWith <span class="br0">&#93;</span> <span class="br0">&#41;</span></pre></div></div>
<p>Changes the gamemode to a new one, optionally specifying an initial map for it (will load without a map by default).
</p>
<!-- PLAIN TEXT CODE FOR BOTS |bool changeGamemodeMap ( resource newMap, [ resource gamemodeToChangeTo ] )|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><a href="Bool.html" class="kw3"><span class="kw3">bool</span></a> changeGamemodeMap <span class="br0">&#40;</span> <a href="Resource.html" class="kw3"><span class="kw3">resource</span></a> newMap, <span class="br0">&#91;</span> <a href="Resource.html" class="kw3"><span class="kw3">resource</span></a> gamemodeToChangeTo <span class="br0">&#93;</span> <span class="br0">&#41;</span></pre></div></div>
<p>Changes the GM map to a new one, optionally specifying a gamemode to change to before loading it (will load with the current gamemode by default).
</p>
<!-- PLAIN TEXT CODE FOR BOTS |table getGamemodes ( )|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><a href="Table.html" class="kw3"><span class="kw3">table</span></a> getGamemodes <span class="br0">&#40;</span> <span class="br0">&#41;</span></pre></div></div>
<p>Returns a table of all gamemode resource pointers.
</p>
<!-- PLAIN TEXT CODE FOR BOTS |table getGamemodesCompatibleWithMap ( resource theMap )|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><a href="Table.html" class="kw3"><span class="kw3">table</span></a> getGamemodesCompatibleWithMap <span class="br0">&#40;</span> <a href="Resource.html" class="kw3"><span class="kw3">resource</span></a> theMap <span class="br0">&#41;</span></pre></div></div>
<p>Returns a table of compatible gamemode resource pointers.
</p>
<!-- PLAIN TEXT CODE FOR BOTS |table getMaps ( )|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><a href="Table.html" class="kw3"><span class="kw3">table</span></a> getMaps <span class="br0">&#40;</span> <span class="br0">&#41;</span></pre></div></div>
<p>Returns a table of all map resource pointers.
</p>
<!-- PLAIN TEXT CODE FOR BOTS |table getMapsCompatibleWithGamemode ( [ resource theGamemode ] )|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><a href="Table.html" class="kw3"><span class="kw3">table</span></a> getMapsCompatibleWithGamemode <span class="br0">&#40;</span> <span class="br0">&#91;</span> <a href="Resource.html" class="kw3"><span class="kw3">resource</span></a> theGamemode <span class="br0">&#93;</span> <span class="br0">&#41;</span></pre></div></div>
<p>Returns a table of compatible map resource pointers. If the gamemode is left blank, it returns all maps which aren't compatible with any gamemode.
</p>
<!-- PLAIN TEXT CODE FOR BOTS |resource getRunningGamemode ( )|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><a href="Resource.html" class="kw3"><span class="kw3">resource</span></a> getRunningGamemode <span class="br0">&#40;</span> <span class="br0">&#41;</span></pre></div></div>
<p>Returns the currently running gamemode's resource pointer.
</p>
<!-- PLAIN TEXT CODE FOR BOTS |resource getRunningGamemodeMap ( )|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><a href="Resource.html" class="kw3"><span class="kw3">resource</span></a> getRunningGamemodeMap <span class="br0">&#40;</span> <span class="br0">&#41;</span></pre></div></div>
<p>Returns the currently running GM map's resource pointer.
</p>
<!-- PLAIN TEXT CODE FOR BOTS |bool isGamemode ( resource theGamemode )|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><a href="Bool.html" class="kw3"><span class="kw3">bool</span></a> isGamemode <span class="br0">&#40;</span> <a href="Resource.html" class="kw3"><span class="kw3">resource</span></a> theGamemode <span class="br0">&#41;</span></pre></div></div>
<p>Determines if a resource is a gamemode or not.
</p>
<!-- PLAIN TEXT CODE FOR BOTS |bool isGamemodeCompatibleWithMap ( resource theGamemode, resource theMap )|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><a href="Bool.html" class="kw3"><span class="kw3">bool</span></a> isGamemodeCompatibleWithMap <span class="br0">&#40;</span> <a href="Resource.html" class="kw3"><span class="kw3">resource</span></a> theGamemode, <a href="Resource.html" class="kw3"><span class="kw3">resource</span></a> theMap <span class="br0">&#41;</span></pre></div></div>
<p>Determines if a gamemode is compatible with a map or not.
</p>
<!-- PLAIN TEXT CODE FOR BOTS |bool isMap ( resource theMap )|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><a href="Bool.html" class="kw3"><span class="kw3">bool</span></a> isMap <span class="br0">&#40;</span> <a href="Resource.html" class="kw3"><span class="kw3">resource</span></a> theMap <span class="br0">&#41;</span></pre></div></div>
<p>Determines if a resource is a map or not.
</p>
<!-- PLAIN TEXT CODE FOR BOTS |bool isMapCompatibleWithGamemode ( resource theMap, resource theGamemode )|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><a href="Bool.html" class="kw3"><span class="kw3">bool</span></a> isMapCompatibleWithGamemode <span class="br0">&#40;</span> <a href="Resource.html" class="kw3"><span class="kw3">resource</span></a> theMap, <a href="Resource.html" class="kw3"><span class="kw3">resource</span></a> theGamemode <span class="br0">&#41;</span></pre></div></div>
<p>Determines if a map is compatible with a gamemode or not.
</p>
<!-- PLAIN TEXT CODE FOR BOTS |bool stopGamemode ( )|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><a href="Bool.html" class="kw3"><span class="kw3">bool</span></a> stopGamemode <span class="br0">&#40;</span> <span class="br0">&#41;</span></pre></div></div>
<p>Stops the current gamemode and its map.
</p>
<!-- PLAIN TEXT CODE FOR BOTS |bool stopGamemodeMap ( )|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><a href="Bool.html" class="kw3"><span class="kw3">bool</span></a> stopGamemodeMap <span class="br0">&#40;</span> <span class="br0">&#41;</span></pre></div></div>
<p>Stop the current GM map.
Determines if a map is compatible with a gamemode or not.
</p>
<h2><span class="mw-headline" id="Fired_events">Fired events</span></h2>
<p><i>(For all these events, "source" is the resource's root element.)</i>
</p>
<!-- PLAIN TEXT CODE FOR BOTS |onGamemodeStart ( resource startedGamemode )|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1">onGamemodeStart <span class="br0">&#40;</span> <a href="Resource.html" class="kw3"><span class="kw3">resource</span></a> startedGamemode <span class="br0">&#41;</span></pre></div></div>
<p>Fired before a gamemode starts.
</p>
<!-- PLAIN TEXT CODE FOR BOTS |onGamemodeStop ( resource stoppedGamemode )|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1">onGamemodeStop <span class="br0">&#40;</span> <a href="Resource.html" class="kw3"><span class="kw3">resource</span></a> stoppedGamemode <span class="br0">&#41;</span></pre></div></div>
<p>Fired before a gamemode is stopped.
</p>
<!-- PLAIN TEXT CODE FOR BOTS |onGamemodeMapStart ( resource startedMap )|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1">onGamemodeMapStart <span class="br0">&#40;</span> <a href="Resource.html" class="kw3"><span class="kw3">resource</span></a> startedMap <span class="br0">&#41;</span></pre></div></div>
<p>Fired before a GM map starts.
</p>
<!-- PLAIN TEXT CODE FOR BOTS |onGamemodeMapStop ( resource stoppedMap )|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1">onGamemodeMapStop <span class="br0">&#40;</span> <a href="Resource.html" class="kw3"><span class="kw3">resource</span></a> stoppedMap <span class="br0">&#41;</span></pre></div></div>
<p>Fired before a GM map is stopped.
</p>
<h2><span class="mw-headline" id="Supported_map_settings">Supported map settings</span></h2>
<p>The following settings from the <a href="Settings_system.html" title="Settings system">registry</a> are applied by the map manager when a map is started:
<br /><b>gamespeed</b> [number]: The map's game speed.
<br /><b>gravity</b> [number]: The map's gravity.
<br /><b>time</b> [string of the form <b>hh:mm</b>]: The map's time.
<br /><b>weather</b> [number]: The map's weather ID.
<br /><b>waveheight</b> [number]: The map's wave height.
<br /><b>locked_time</b> [boolean]: Whether the set time will be frozen by the manager or not.
<br /><b>minplayers</b> [number]: The required minimum number of players to start the map.
<br /><b>maxplayers</b> [number]: The allowed maximum number of players to start the map.
</p>
<!-- 
NewPP limit report
CPU time usage: 0.511 seconds
Real time usage: 0.513 seconds
Preprocessor visited node count: 260/1000000
Preprocessor generated node count: 564/1000000
Post‐expand include size: 198/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key nrp_wiki_1_22_13-wiki_dev_:pcache:idhash:2647-0!*!0!!en!*!* and timestamp 20150826130211
 -->
</div><div class="printfooter">
Retrieved from "<a index.html?title=Resource:Mapmanager&amp;oldid=35262">/index.php?title=Resource:Mapmanager&amp;oldid=35262</a>"</div>
		<div id='catlinks' class='catlinks'><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="Special_Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="Category_Resource.html" title="Category:Resource">Resource</a></li></ul></div></div>		<!-- end content -->
				<div class="visualClear"></div>
	</div>
	</div>
		</div>
		<div id="column-one">
	<div id="p-cactions" class="portlet">
		<h5>Views</h5>
		<div class="pBody">
			<ul>
	
				 <li id="ca-nstab-resource" class="selected"><a href="Resource_Mapmanager.html"Array>Resource</a></li>
				 <li id="ca-talk" class="new"><a index.html?title=:Mapmanager&amp;action=edit&amp;redlink=1"Array>Discussion</a></li>
				 <li id="ca-viewsource"><a index.html?title=Resource:Mapmanager&amp;action=edit"Array>View source</a></li>
				 <li id="ca-history"><a index.html?title=Resource:Mapmanager&amp;action=history"Array>History</a></li>			</ul>
		</div>
	</div>
	<div class="portlet" id="p-personal">
		<h5>Personal tools</h5>
		<div class="pBody">
			<ul>
				<li id="pt-login"><a index.html?title=Special:UserLogin&amp;returnto=Resource%3AMapmanager"Array></a></li>
			</ul>
		</div>
	</div>
	
	<div class="portlet" id="p-logo">
		<a style="background-image: url();" href="Main_Page.html"Array></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
	<div class='generated-sidebar portlet' id='p-navigation'>
		<h5>Navigation</h5>
		<div class='pBody'>
			<ul>
				<li id="n-Home"><a href="Main_Page.html"Array>Home</a></li>
				<li id="n-How-you-can-help"><a href="How_you_can_help.html"Array>How you can help</a></li>
				<li id="n-recentchanges"><a href="Special_RecentChanges.html"Array>Recent changes</a></li>
				<li id="n-randompage"><a href="OnElementDataChange.html"Array>Random page</a></li>
			</ul>
		</div>
	</div>
	<div class='generated-sidebar portlet' id='p-reference'>
		<h5>reference</h5>
		<div class='pBody'>
			<ul>
				<li id="n-Client-Functions"><a href="Client_Scripting_Functions.html"Array>Client Functions</a></li>
				<li id="n-Client-Events"><a href="Client_Scripting_Events.html"Array>Client Events</a></li>
				<li id="n-Server-Functions"><a href="Server_Scripting_Functions.html"Array>Server Functions</a></li>
				<li id="n-Server-Events"><a href="Server_Scripting_Events.html"Array>Server Events</a></li>
				<li id="n-Useful-Functions"><a href="Useful_Functions.html"Array>Useful Functions</a></li>
				<li id="n-NRP-Classes"><a href="NRP_Classes.html"Array>NRP Classes</a></li>
				<li id="n-NRP-Elements"><a href="Element.html"Array>NRP Elements</a></li>
				<li id="n-Element-Tree"><a href="Element_tree.html"Array>Element Tree</a></li>
			</ul>
		</div>
	</div>
	<div id="p-search" class="portlet">
		
		<div id="searchBody" class="pBody">
			<form action="/index.php" id="searchform"><div>
				
				
				
				
			</div></form>
		</div>
	</div>
	<div class="portlet" id="p-tb">
		<h5>Tools</h5>
		<div class="pBody">
			<ul>
				<li id="t-whatlinkshere"><a href="Special_WhatLinksHere/Resource_Mapmanager.html"Array>What links here</a></li>
				<li id="t-recentchangeslinked"><a href="Special_RecentChangesLinked/Resource_Mapmanager.html"Array>Related changes</a></li>
<li id="t-specialpages"><a href="Special_SpecialPages.html"Array>Special pages</a></li>
				<li id="t-print"><a index.html?title=Resource:Mapmanager&amp;printable=yes" rel="alternate"Array>Printable version</a></li>				<li id="t-permalink"><a index.html?title=Resource:Mapmanager&amp;oldid=35262"Array>Permanent link</a></li>			</ul>
		</div>
	</div>
	<div id="p-lang" class="portlet">
		<h5>In other languages</h5>
		<div class="pBody">
			<ul>
				<li class="interwiki-it"><a href="../wiki/IT/Map_manager">Italiano</a></li>
				<li class="interwiki-ru"><a href="../wiki/RU/Resource:Mapmanager">Русский</a></li>
			</ul>
		</div>
	</div>
</div><!-- end of the left (by default at least) column -->
<div class="visualClear"></div>
			<div id="footer">
				<div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="../skins/common/images/poweredby_mediawiki_88x31.png" height="31" width="88" alt="Powered by MediaWiki" /></a></div>
				<div id="f-copyrightico"><a href="http://www.gnu.org/copyleft/fdl.html"><img src="../skins/common/images/gnu-fdl.png" alt="GNU Free Documentation License 1.2" width="88" height="31" /></a></div>
	<ul id="f-list">
					<li id="lastmod"> This page was last modified on 2 April 2013, at 01:40.</li>
					<li id="viewcount">This page has been accessed 93,069 times.</li>
					<li id="copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.2</a> unless otherwise noted.</li>
					<li id="privacy"><a href="Nexus_RP__Wiki_Privacy_policy.html" title="Nexus RP: Wiki:Privacy policy">Privacy policy</a></li>
					<li id="about"><a href="Nexus_RP__Wiki_About.html" title="Nexus RP: Wiki:About">About Nexus RP: Wiki</a></li>
					<li id="disclaimer"><a href="Nexus_RP__Wiki_General_disclaimer.html" title="Nexus RP: Wiki:General disclaimer">Disclaimers</a></li>
			</ul>
</div>
</div>
<script>/*<![CDATA[*/window.jQuery && jQuery.ready();/*]]>*/</script><script>if(window.mw){
mw.loader.state({"site":"loading","user":"ready","user.groups":"ready"});
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.action.view.postEdit","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest","ext.cite"],null,true);
}</script>
<script src="/load.php?debug=false&amp;lang=en&amp;modules=site&amp;only=scripts&amp;skin=nrpbook&amp;*"></script>
<!-- Served in 0.046 secs. --></body>
<!-- Mirrored from wiki.nexusrp.com/wiki/Resource:Map_manager by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 27 Aug 2015 07:29:10 GMT -->
</html>
