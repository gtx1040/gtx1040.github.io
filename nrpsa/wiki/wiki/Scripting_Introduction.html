<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
	
<!-- Mirrored from wiki.nexusrp.com/wiki/Scripting_Introduction by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 27 Aug 2015 07:28:23 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<meta name="generator" content="MediaWiki 1.22.13" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="Nexus RP: Wiki (en)" />
<link rel="EditURI" type="application/rsd+xml" href="/api.php?action=rsd" />
<link rel="copyright" href="http://www.gnu.org/copyleft/fdl.html" />
<link rel="alternate" type="application/atom+xml" title="Nexus RP: Wiki Atom feed" index.html?title=Special:RecentChanges&amp;feed=atom" />		<title>Scripting Introduction - Nexus RP: Wiki</title>
		<link rel="stylesheet" href="/load.php?debug=false&amp;lang=en&amp;modules=ext.rtlcite%7Cmediawiki.legacy.commonPrint%2Cshared&amp;only=styles&amp;skin=nrpbook&amp;*" />
<link rel="stylesheet" href="../skins/nrpbook/main11b9.css?303" media="screen" />
<!--[if lt IE 5.5000]><link rel="stylesheet" href="/skins/nrpbook/IE50Fixes.css?303" media="screen" /><![endif]-->
<!--[if IE 5.5000]><link rel="stylesheet" href="/skins/nrpbook/IE55Fixes.css?303" media="screen" /><![endif]-->
<!--[if IE 6]><link rel="stylesheet" href="/skins/nrpbook/IE60Fixes.css?303" media="screen" /><![endif]-->
<!--[if IE 7]><link rel="stylesheet" href="/skins/nrpbook/IE70Fixes.css?303" media="screen" /><![endif]--><meta name="ResourceLoaderDynamicStyles" content="" />
<link rel="stylesheet" href="/load.php?debug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=nrpbook&amp;*" />
<style>a:lang(ar),a:lang(ckb),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: nrp_wiki_1_22_13-wiki_dev_:resourceloader:filter:minify-css:7:68ffccca97fd0532df6141dcbaf256b6 */</style>

		<!--[if lt IE 7]><script type="text/javascript" src="/skins/common/IEFixes.js?303"></script>
		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->

		<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Scripting_Introduction","wgTitle":"Scripting Introduction","wgCurRevisionId":44433,"wgRevisionId":44433,"wgArticleId":2751,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Tutorials"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransforNRPble":["",""],"wgDigitTransforNRPble":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Scripting_Introduction","wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[]});
}</script>
		<script type="text/javascript" src="../skins/common/wikibits11b9.js?303"><!-- wikibits js --></script>
		<!-- Head Scripts -->
<script src="/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=nrpbook&amp;*"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Scripting_Introduction","wgTitle":"Scripting Introduction","wgCurRevisionId":44433,"wgRevisionId":44433,"wgArticleId":2751,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Tutorials"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransforNRPble":["",""],"wgDigitTransforNRPble":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Scripting_Introduction","wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[]});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function(){mw.user.options.set({"ccmeonemails":0,"cols":80,"date":"default","diffonly":0,"disablemail":0,"disablesuggest":0,"editfont":"default","editondblclick":0,"editsection":1,"editsectiononrightclick":0,"enotifminoredits":0,"enotifrevealaddr":0,"enotifusertalkpages":1,"enotifwatchlistpages":0,"extendwatchlist":0,"fancysig":0,"forceeditsummary":0,"gender":"unknown","hideminor":0,"hidepatrolled":0,"imagesize":2,"justify":0,"math":1,"minordefault":0,"newpageshidepatrolled":0,"nocache":0,"noconvertlink":0,"norollbackdiff":0,"numberheadings":0,"previewonfirst":0,"previewontop":1,"rcdays":7,"rclimit":50,"rememberpassword":0,"rows":25,"searchlimit":20,"showhiddencats":0,"shownumberswatching":1,"showtoc":1,"showtoolbar":1,"skin":"nrpbook","stubthreshold":0,"thumbsize":2,"underline":2,"uselivepreview":0,"usenewrc":0,"vector-simplesearch":1,"watchcreations":0,"watchdefault":0,"watchdeletion":0,"watchlistdays":3,"watchlisthideanons":0,"watchlisthidebots":0,
"watchlisthideliu":0,"watchlisthideminor":0,"watchlisthideown":0,"watchlisthidepatrolled":0,"watchmoves":0,"wllimit":250,"useeditwarning":1,"prefershttps":1,"language":"en","variant-gan":"gan","variant-iu":"iu","variant-kk":"kk","variant-ku":"ku","variant-shi":"shi","variant-sr":"sr","variant-tg":"tg","variant-uz":"uz","variant-zh":"zh","searchNs0":true,"searchNs1":false,"searchNs2":false,"searchNs3":false,"searchNs4":false,"searchNs5":false,"searchNs6":false,"searchNs7":false,"searchNs8":false,"searchNs9":false,"searchNs10":false,"searchNs11":false,"searchNs12":false,"searchNs13":false,"searchNs14":false,"searchNs15":false,"searchNs100":false,"variant":"en"});},{},{});mw.loader.implement("user.tokens",function(){mw.user.tokens.set({"editToken":"+\\","patrolToken":false,"watchToken":false});},{},{});
/* cache key: nrp_wiki_1_22_13-wiki_dev_:resourceloader:filter:minify-js:7:925126ceab977200cdcc48193642dea0 */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax"]);
}</script><style type="text/css">/*<![CDATA[*/
.source-lua {line-height: normal;}
.source-lua li, .source-lua pre {
	line-height: normal; border: 0px none white;
}
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for lua
 * CSS class: source-lua, CSS id: 
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 * --------------------------------------
 */
.lua.source-lua .de1, .lua.source-lua .de2 {font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;font-family: monospace, monospace;}
.lua.source-lua  {font-family:monospace;}
.lua.source-lua .imp {font-weight: bold; color: red;}
.lua.source-lua li, .lua.source-lua .li1 {font-weight: normal; vertical-align:top;}
.lua.source-lua .ln {width:1px;text-align:right;margin:0;padding:0 2px;vertical-align:top;}
.lua.source-lua .li2 {font-weight: bold; vertical-align:top;}
.lua.source-lua .kw1 {color: #b1b100;}
.lua.source-lua .co1 {color: #808080; font-style: italic;}
.lua.source-lua .coMULTI {color: #808080; font-style: italic;}
.lua.source-lua .es0 {color: #000099; font-weight: bold;}
.lua.source-lua .br0 {color: #66cc66;}
.lua.source-lua .sy0 {color: #66cc66;}
.lua.source-lua .st0 {color: #00A600;}
.lua.source-lua .nu0 {color: #cc66cc;}
.lua.source-lua .me0 {color: #b1b100;}
.lua.source-lua .ln-xtra, .lua.source-lua li.ln-xtra, .lua.source-lua div.ln-xtra {background-color: #ffc;}
.lua.source-lua span.xtra { display:block; }

/*]]>*/
</style>	</head>
<body class="mediawiki ltr ns-0 ns-subject page-Scripting_Introduction skin-nrpbook">
	<div id="globalWrapper">
		
		<div id="column-content">
	<div id="content">
		<a name="top" id="top"></a>
			<h1 id="firstHeading" class="firstHeading">Scripting Introduction</h1>
		<div id="bodyContent">
			<h3 id="siteSub">From Nexus RP: Wiki</h3>
			<div id="contentSub"></div>
									<div id="jump-to-nav">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>		<!-- start content -->
<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><p>Resources are a key part of NRP. A resource is essentially a folder or zip file that contains a collection of files, plus a meta file that describes to the server how the resource should be loaded and what files it does contain. A resource can be seen as being partly equivalent to a program running in an operating system - it can be started and stopped, and multiple resources can run at once.
</p><p>Everything that has to do with scripting happens in resources, what a resource does defines if it is a gamemode, a map or anything else. NRP comes with resources that you can optionally use in your gamemodes, such as maplimits to keep playings within a playing area or deathpickups to create weapon pickups.
</p>
<table cellspacing="0" style="padding: 5px; width: 80%; margin: 2px auto 2px auto; border: 1px solid #81C687; background: #E2FFE5; border-left: 10px solid #81C687;">
<tr>
<td style="width: 32px; vertical-align:top; display: none;" rowspan="2"> [[{{{image}}}|link=]]
</td>
<td style=""> <b>Tip:</b> Your first step to begin Lua scripting should be using an Lua editor. This makes scripting much easier. We recommend <a rel="nofollow" class="external text" href="http://www.sublimetext.com/">Sublime Text</a>, <a rel="nofollow" class="external text" href="http://notepad-plus.sourceforge.net/uk/site.htm">Notepad++</a> or <a rel="nofollow" class="external text" href="http://luaedit.sourceforge.net/">LuaEdit</a>. There is also an unofficial <a href="NRPSE.html" title="NRPSE">NRP Script Editor</a> (in work-in-progress state) that you can test out.
</td></tr>
<tr>
<td rowspan="1" style="padding-left: 10px;">
</td></tr></table>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Creating_a_working_script"><span class="tocnumber">1</span> <span class="toctext">Creating a working script</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Where_are_all_the_scripts.3F"><span class="tocnumber">1.1</span> <span class="toctext">Where are all the scripts?</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#Identifying_your_resource"><span class="tocnumber">1.2</span> <span class="toctext">Identifying your resource</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Creating_a_simple_script"><span class="tocnumber">1.3</span> <span class="toctext">Creating a simple script</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Running_the_script"><span class="tocnumber">1.4</span> <span class="toctext">Running the script</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-6"><a href="#Creating_a_simple_command"><span class="tocnumber">2</span> <span class="toctext">Creating a simple command</span></a>
<ul>
<li class="toclevel-2 tocsection-7"><a href="#About_command_handlers"><span class="tocnumber">2.1</span> <span class="toctext">About command handlers</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Writing_the_function"><span class="tocnumber">2.2</span> <span class="toctext">Writing the function</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-9"><a href="#What_you_need_to_know"><span class="tocnumber">3</span> <span class="toctext">What you need to know</span></a>
<ul>
<li class="toclevel-2 tocsection-10"><a href="#Clientside_and_Serverside_scripts"><span class="tocnumber">3.1</span> <span class="toctext">Clientside and Serverside scripts</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#More_complex_resources"><span class="tocnumber">3.2</span> <span class="toctext">More complex resources</span></a>
<ul>
<li class="toclevel-3 tocsection-12"><a href="#First_example_-_A_utility_script"><span class="tocnumber">3.2.1</span> <span class="toctext">First example - A utility script</span></a></li>
<li class="toclevel-3 tocsection-13"><a href="#Second_example_-_A_gamemode"><span class="tocnumber">3.2.2</span> <span class="toctext">Second example - A gamemode</span></a></li>
<li class="toclevel-3 tocsection-14"><a href="#Third_example_-_A_Map"><span class="tocnumber">3.2.3</span> <span class="toctext">Third example - A Map</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-15"><a href="#Events"><span class="tocnumber">3.3</span> <span class="toctext">Events</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-16"><a href="#Where_to_go_from_here"><span class="tocnumber">4</span> <span class="toctext">Where to go from here</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Creating_a_working_script">Creating a working script</span></h2>
<p>We will first learn how to make a basic script that lets the player walk around in the city, step by step.
</p>
<h3><span class="mw-headline" id="Where_are_all_the_scripts.3F">Where are all the scripts?</span></h3>
<p>Let's take a look at the script's file structure. Go to your NRP Server folder, and follow the path below:
</p><p>	server/mods/deathmatch/resources/
</p><p>You will see a lot of .zip files, which are the packaged sample scripts shipped with NRP. Each file is a "resource", and they will all be unzipped and loaded by the server when it starts. To create your own resource, simply make a folder with your preferred name. We'll use "myserver" for this tutorial.
</p><p>Now you should be under this directory: 
</p><p>	server/mods/deathmatch/resources/myserver/
</p>
<h3><span class="mw-headline" id="Identifying_your_resource">Identifying your resource</span></h3>
<p>In order to let the server know what's in the resource, a <i>meta.xml</i> file must be created to list the resource's content. It must be located in the resource's root directory, which is the "myserver" folder in our case. So create a text file and name it "meta.xml", and open it with notepad.
</p><p>Enter the following codes in the <i>meta.xml</i> file:
</p>
<!-- PLAIN TEXT CODE FOR BOTS |<meta> <info author="YourName" type="gamemode" name="My Server" description="My first NRP server" /> <script src="script.lua" /> </meta>|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><span class="sy0">&lt;</span>meta<span class="sy0">&gt;</span>
     <span class="sy0">&lt;</span>info author<span class="sy0">=</span><span class="st0">&quot;YourName&quot;</span> <span class="kw1">type</span><span class="sy0">=</span><span class="st0">&quot;gamemode&quot;</span> name<span class="sy0">=</span><span class="st0">&quot;My Server&quot;</span> description<span class="sy0">=</span><span class="st0">&quot;My first NRP server&quot;</span> <span class="sy0">/&gt;</span>
     <span class="sy0">&lt;</span>script src<span class="sy0">=</span><span class="st0">&quot;script.lua&quot;</span> <span class="sy0">/&gt;</span>
<span class="sy0">&lt;/</span>meta<span class="sy0">&gt;</span></pre></div></div>
<p>In the <i>&lt;info /&gt;</i> tag, there's a "type" field which indicates that the resource is a <i>gamemode</i> instead of a regular include or a <i>map</i>, which will be explained later. A gamemode is what you need to make a stand-alone server. 
</p><p>The <i>&lt;script /&gt;</i> tag indicates the script files contained in the resource, which we will create next.
</p>
<h3><span class="mw-headline" id="Creating_a_simple_script">Creating a simple script</span></h3>
<p>Note that in the <i>&lt;script /&gt;</i> tag above, the .lua file is not under another directory. Therefore we'll create the file in the same folder as meta.xml. Now you can copy and paste the following code into script.lua:
</p>
<!-- PLAIN TEXT CODE FOR BOTS |local spawnX, spawnY, spawnZ = 1959.55, -1714.46, 10 function joinHandler() spawnPlayer(source, spawnX, spawnY, spawnZ) fadeCamera(source, true) setCameraTarget(source, source) outputChatBox("Welcome to My Server", source) end addEventHandler("onPlayerJoin", getRootElement(), joinHandler)|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><span class="kw1">local</span> spawnX, spawnY, spawnZ <span class="sy0">=</span> <span class="nu0">1959.55</span>, -<span class="nu0">1714.46</span>, <span class="nu0">10</span>
<span class="kw1">function</span> joinHandler<span class="br0">&#40;</span><span class="br0">&#41;</span>
	<a href="SpawnPlayer.html" class="kw6"><span class="kw6">spawnPlayer</span></a><span class="br0">&#40;</span>source, spawnX, spawnY, spawnZ<span class="br0">&#41;</span>
	<a href="FadeCamera.html" class="kw2"><span class="kw2">fadeCamera</span></a><span class="br0">&#40;</span>source, <span class="kw1">true</span><span class="br0">&#41;</span>
	<a href="SetCameraTarget.html" class="kw2"><span class="kw2">setCameraTarget</span></a><span class="br0">&#40;</span>source, source<span class="br0">&#41;</span>
	<a href="OutputChatBox.html" class="kw6"><span class="kw6">outputChatBox</span></a><span class="br0">&#40;</span><span class="st0">&quot;Welcome to My Server&quot;</span>, source<span class="br0">&#41;</span>
<span class="kw1">end</span>
<a href="AddEventHandler.html" class="kw2"><span class="kw2">addEventHandler</span></a><span class="br0">&#40;</span><span class="st0">&quot;onPlayerJoin&quot;</span>, <a href="GetRootElement.html" class="kw2"><span class="kw2">getRootElement</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span>, joinHandler<span class="br0">&#41;</span></pre></div></div>
<p>The script will spawn you at the coordinate (x, y, z) specified above, when you join the game. Note that the <i>fadeCamera</i> function must be used or the screen will be black. Also, in releases after DP2, you need to set the camera target (otherwise all the player will see is blue sky).
</p><p>The <b>source</b> variable indicates who triggered the event. Since a player has joined when the code is triggered, you use this variable to look which has joined. So it'll spawn that player instead of everyone or a random person.
</p><p>If we have a closer look on <a href="AddEventHandler.html" title="AddEventHandler">addEventHandler</a>, you can see 3 things: 'onPlayerJoin', which indicates when it's triggered. getRootElement(), which shows by what/who it can be triggered. (getRootElement() is everything/everyone) And joinHandler, which indicates the function that has to be triggered after the event is triggered. Other details will be explained later in another example, now let's just run the server and try it out!
</p>
<h3><span class="mw-headline" id="Running_the_script">Running the script</span></h3>
<p>To get the server started, simply run the executable under the server/ directory. A list of server stats will be shown first; note the port number, which you'll need when joining the game. Then the server loads all the resources under the mods/deathmatch/resources/ directory, and then "ready to accept connections!"
</p><p>Before you connect to the server, you must run the gamemode. Type "start myserver" and press Enter. The server will start the gamemode you just created, and will also show any errors and warnings from this point on. Now you can start the NRP client, and "Quick Connect" using the IP address of your server and the port number you saw earlier. If all goes well, after a few seconds your character will be walking on the streets of Los Santos.
</p><p>Next we'll add a command to your script that players can use to spawn a vehicle beside their position. You may skip it and check out more advanced scripting with the <a href="Map_manager.html" title="Map manager" class="mw-redirect">Map Manager</a>, which continues this tutorial. Another branch from this tutorial is <a href="Introduction_to_Scripting_GUI.html" title="Introduction to Scripting GUI" class="mw-redirect">Introduction to Scripting GUI</a>, you may follow it to see how Graphical User Interface in NRP is drawn and scripted.
</p>
<h2><span class="mw-headline" id="Creating_a_simple_command">Creating a simple command</span></h2>
<p>Let's go back to the content of the <i>script.lua</i> file. As mentioned above, we want to provide a command to create a vehicle beside your current position in the game. Firstly we need to create a function we want to call and a command handler that creates the command the player will be able to enter in the console.
</p>
<!-- PLAIN TEXT CODE FOR BOTS |function createVehicleForPlayer(thePlayer, command, vehicleModel) end addCommandHandler("createvehicle", createVehicleForPlayer)|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><span class="co1">-- create the function the command handler calls, with the arguments: thePlayer, command, vehicleModel</span>
<span class="kw1">function</span> createVehicleForPlayer<span class="br0">&#40;</span>thePlayer, command, vehicleModel<span class="br0">&#41;</span>
   <span class="co1">-- create a vehicle and stuff</span>
<span class="kw1">end</span>
&#160;
<span class="co1">-- create a command handler</span>
<a href="AddCommandHandler.html" class="kw6"><span class="kw6">addCommandHandler</span></a><span class="br0">&#40;</span><span class="st0">&quot;createvehicle&quot;</span>, createVehicleForPlayer<span class="br0">&#41;</span></pre></div></div>
<p><i>Note: Function names are clickable in code examples on the wiki and linked to the functions' documentation.</i>
</p>
<h4><span class="mw-headline" id="About_command_handlers">About command handlers</span></h4>
<p>The first argument of <a href="AddCommandHandler.html" title="AddCommandHandler">addCommandHandler</a> is the name of the command the player will be able to enter, the second argument is the function this will call, in this case <i>createVehicleForPlayer</i>.
</p><p>If you have already experience in scripting, you will know that you call a function like this:
</p>
<!-- PLAIN TEXT CODE FOR BOTS |functionName(argument1, argument2, argument3, ..)|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1">functionName<span class="br0">&#40;</span>argument1, argument2, argument3, ..<span class="br0">&#41;</span></pre></div></div>
<!-- PLAIN TEXT CODE FOR BOTS |functionName(thePlayer, commandName, argument3, ..)|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1">functionName<span class="br0">&#40;</span>thePlayer, commandName, argument3, ..<span class="br0">&#41;</span></pre></div></div>
<p>If we have a closer look on the lower example above, we can see argument1 is thePlayer and argument2 the commandName. thePlayer is simply the one who typed the command, so whatever you call it, the variable will contain the player who activated the command. commandName is simply the command they typed. So if they typed "/greet", this argument will contain "greet". Argument 3 is something extra the player typed, you'll learn it a little bit further in the tutorial. Never forget that the first 2 arguments are standard arguments, but you can name them to anything you want.
</p><p>We called the <a href="AddCommandHandler.html" title="AddCommandHandler">addCommandHandler</a> function this way already and since <i>createVehicleForPlayer</i> is a function too, it can be called that way as well. But we are using a command handler for that, which calls it in a similiar manner, internally.
</p><p>For example: Someone types "createvehicle 468" ingame in the console to spawn a Sanchez, the command handler calls the createVehicleForPlayer function, as <b>if</b> we would have this line of code in the script:
</p>
<!-- PLAIN TEXT CODE FOR BOTS |createVehicleForPlayer(thePlayer,"createvehicle","468") -- thePlayer is the player element of the player who entered the command|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1">createVehicleForPlayer<span class="br0">&#40;</span>thePlayer,<span class="st0">&quot;createvehicle&quot;</span>,<span class="st0">&quot;468&quot;</span><span class="br0">&#41;</span> <span class="co1">-- thePlayer is the player element of the player who entered the command</span></pre></div></div>
<p>As we can see, it provides several parameters: the player who called the command, the command he entered and whatever text he had after that, in this case "468" as vehicle id for the Sanchez. The first two parameters are the same with all command handlers, which you can read on the <a href="AddEventHandler.html" title="AddEventHandler">addEventHandler</a> page. For this fact, you always have to define at least those two parameters to use any after that (for example to process text that was entered after the command, like in our example the vehicle model id).
</p><p><i>Note: You have to add the command handler AFTER you defined the handler function, else it can't find it. The order of execution matters.</i>
</p>
<h4><span class="mw-headline" id="Writing_the_function">Writing the function</span></h4>
<p>In order to fill the function we created, we need to think about what we have to do:
</p>
<ul>
<li> Get the players position, so we know where to spawn the vehicle (we want it to appear right beside the player)
</li>
<li> Calculate the position we want to spawn the vehicle at (we don't want it to appear in the player)
</li>
<li> Spawn the vehicle
</li>
<li> Check if it has been spawned successfully, or output a message
</li>
</ul>
<p>In order to achieve our goals, we have to use several functions. To find function we need to use, we should visit the <a href="Scripting_Functions.html" title="Scripting Functions" class="mw-redirect">Server Functions List</a>. First we need a function to get the players position. Since players are Elements, we first jump to the <b>Element functions</b> where we find the <a href="GetElementPosition.html" title="GetElementPosition">getElementPosition</a> function. By clicking on the function name in the list, you get to the function description. There we can see the syntax, what it returns and usually an example. The syntax shows us what arguments we can or have to submit.
</p><p>For <a href="GetElementPosition.html" title="GetElementPosition">getElementPosition</a>, the syntax is:
</p>
<!-- PLAIN TEXT CODE FOR BOTS |float, float, float getElementPosition ( element theElement )|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><a href="Float.html" class="kw3"><span class="kw3">float</span></a>, <a href="Float.html" class="kw3"><span class="kw3">float</span></a>, <a href="Float.html" class="kw3"><span class="kw3">float</span></a> <a href="GetElementPosition.html" class="kw2"><span class="kw2">getElementPosition</span></a> <span class="br0">&#40;</span> <a href="Element.html" class="kw3"><span class="kw3">element</span></a> theElement <span class="br0">&#41;</span></pre></div></div>
<p>The three <i>float</i> in front of the function name are the return type. In this case it means the function returns three floating point numbers. (x, y and z) Within the parentheses, you can see what arguments you have to submit. In this case only the element whose position you want to get, which is the player in our example.
</p>
<!-- PLAIN TEXT CODE FOR BOTS |function createVehicleForPlayer(thePlayer, command, vehicleModel) local x,y,z = getElementPosition(thePlayer) end|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><span class="kw1">function</span> createVehicleForPlayer<span class="br0">&#40;</span>thePlayer, command, vehicleModel<span class="br0">&#41;</span>
	<span class="co1">-- get the position and put it in the x,y,z variables</span>
	<span class="co1">-- (local means, the variables only exist in the current scope, in this case, the function)</span>
	<span class="kw1">local</span> x,y,z <span class="sy0">=</span> <a href="GetElementPosition.html" class="kw2"><span class="kw2">getElementPosition</span></a><span class="br0">&#40;</span>thePlayer<span class="br0">&#41;</span>
<span class="kw1">end</span></pre></div></div>
<p>Next we want to ensure that the vehicle won't spawn directly in the player, so we add a few units to the <i>x</i> variable, which will make it spawn east from the player.
</p>
<!-- PLAIN TEXT CODE FOR BOTS |function createVehicleForPlayer(thePlayer, command, vehicleModel) local x,y,z = getElementPosition(thePlayer) x = x + 5 end|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><span class="kw1">function</span> createVehicleForPlayer<span class="br0">&#40;</span>thePlayer, command, vehicleModel<span class="br0">&#41;</span>
	<span class="kw1">local</span> x,y,z <span class="sy0">=</span> <a href="GetElementPosition.html" class="kw2"><span class="kw2">getElementPosition</span></a><span class="br0">&#40;</span>thePlayer<span class="br0">&#41;</span> <span class="co1">-- get the position of the player</span>
	x <span class="sy0">=</span> x + <span class="nu0">5</span> <span class="co1">-- add 5 units to the x position</span>
<span class="kw1">end</span></pre></div></div>
<p>Now we need another function, one to spawn a vehicle. We once again search for it on the <a href="Scripting_Functions.html" title="Scripting Functions" class="mw-redirect">Server Functions List</a>, this time - since we are talking about vehicles - in the <b>Vehicle functions</b> section, where we will choose <a href="CreateVehicle.html" title="CreateVehicle">createVehicle</a>. In this function's syntax, we only have one return type (which is more common), a vehicle element that points to the vehicle we just created. Also, we see that some arguments are enclosed within [ ] which means that those are optional.
</p><p>We already have all arguments we need for <a href="CreateVehicle.html" title="CreateVehicle">createVehicle</a> in our function: The position we just calculated in the <i>x,y,z</i> variables and the model id that we provided through the command ("createvehicle 468") and can access in the function as <i>vehicleModel</i> variable.
</p>
<!-- PLAIN TEXT CODE FOR BOTS |function createVehicleForPlayer(thePlayer, command, vehicleModel) local x,y,z = getElementPosition(thePlayer) x = x + 5 local createdVehicle = createVehicle(tonumber(vehicleModel),x,y,z) end|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><span class="kw1">function</span> createVehicleForPlayer<span class="br0">&#40;</span>thePlayer, command, vehicleModel<span class="br0">&#41;</span>
	<span class="kw1">local</span> x,y,z <span class="sy0">=</span> <a href="GetElementPosition.html" class="kw2"><span class="kw2">getElementPosition</span></a><span class="br0">&#40;</span>thePlayer<span class="br0">&#41;</span> <span class="co1">-- get the position of the player</span>
	x <span class="sy0">=</span> x + <span class="nu0">5</span> <span class="co1">-- add 5 units to the x position</span>
	<span class="co1">-- create the vehicle and store the returned vehicle element in the ''createdVehicle'' variable</span>
	<span class="kw1">local</span> createdVehicle <span class="sy0">=</span> <a href="CreateVehicle.html" class="kw2"><span class="kw2">createVehicle</span></a><span class="br0">&#40;</span><span class="kw1">tonumber</span><span class="br0">&#40;</span>vehicleModel<span class="br0">&#41;</span>,x,y,z<span class="br0">&#41;</span>
<span class="kw1">end</span></pre></div></div>
<p>Of course this code can be improved in many ways, but at least we want to add a check whether the vehicle was created successfully or not. As we can read on the <a href="CreateVehicle.html" title="CreateVehicle">createVehicle</a> page under <b>Returns</b>, the function returns <i>false</i> when it was unable to create the vehicle. Thus, we check the value of the <i>createVehicle</i> variable.
</p><p>Now we have our complete script:
</p>
<!-- PLAIN TEXT CODE FOR BOTS |function createVehicleForPlayer(thePlayer, command, vehicleModel) local x,y,z = getElementPosition(thePlayer) x = x + 5 local createdVehicle = createVehicle(tonumber(vehicleModel),x,y,z) if (createdVehicle == false) then outputChatBox("Failed to create vehicle.",thePlayer) end end addCommandHandler("createvehicle", createVehicleForPlayer)|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><span class="kw1">function</span> createVehicleForPlayer<span class="br0">&#40;</span>thePlayer, command, vehicleModel<span class="br0">&#41;</span>
	<span class="kw1">local</span> x,y,z <span class="sy0">=</span> <a href="GetElementPosition.html" class="kw2"><span class="kw2">getElementPosition</span></a><span class="br0">&#40;</span>thePlayer<span class="br0">&#41;</span> <span class="co1">-- get the position of the player</span>
	x <span class="sy0">=</span> x + <span class="nu0">5</span> <span class="co1">-- add 5 units to the x position</span>
	<span class="kw1">local</span> createdVehicle <span class="sy0">=</span> <a href="CreateVehicle.html" class="kw2"><span class="kw2">createVehicle</span></a><span class="br0">&#40;</span><span class="kw1">tonumber</span><span class="br0">&#40;</span>vehicleModel<span class="br0">&#41;</span>,x,y,z<span class="br0">&#41;</span>
	<span class="co1">-- check if the return value was ''false''</span>
	<span class="kw1">if</span> <span class="br0">&#40;</span>createdVehicle <span class="sy0">==</span> <span class="kw1">false</span><span class="br0">&#41;</span> <span class="kw1">then</span>
		<span class="co1">-- if so, output a message to the chatbox, but only to this player.</span>
		<a href="OutputChatBox.html" class="kw6"><span class="kw6">outputChatBox</span></a><span class="br0">&#40;</span><span class="st0">&quot;Failed to create vehicle.&quot;</span>,thePlayer<span class="br0">&#41;</span>
	<span class="kw1">end</span>
<span class="kw1">end</span>
<a href="AddCommandHandler.html" class="kw6"><span class="kw6">addCommandHandler</span></a><span class="br0">&#40;</span><span class="st0">&quot;createvehicle&quot;</span>, createVehicleForPlayer<span class="br0">&#41;</span></pre></div></div>
<p>As you can see, we introduced another function with <a href="OutputChatBox.html" title="OutputChatBox">outputChatBox</a>. By now, you should be able to explore the function's documentation page yourself. For more advanced scripting, please check out the <a href="Map_manager.html" title="Map manager" class="mw-redirect">Map Manager</a>.
</p>
<h2><span class="mw-headline" id="What_you_need_to_know">What you need to know</span></h2>
<p>You already read some things about resources, command handlers and finding functions in the documentation in the first paragraph, but there is much more to learn. This section will give you a rather short overview over some of these things, while linking to related pages if possible.
</p>
<h3><span class="mw-headline" id="Clientside_and_Serverside_scripts">Clientside and Serverside scripts</span></h3>
<p>You may have already noticed these or similiar terms (Server/Client) somewhere on this wiki, mostly in conjunction with functions. NRP not only supports scripts that run on the server and provide commands (like the one we wrote above) or other features, but also scripts that run on the NRP client the players use to connect to the server. The reason for this is, that some features NRP provides have to be clientside (like a GUI - Graphical User Interface), others should be because they work better and still others are better off to be serverside or just don't work clientside.
</p><p>Most scripts you will make (gamemodes, maps) will probably be serverside, like the one we wrote in the first section. If you run into something that can't be solved serverside, you will probably have to make it clientside. For a clientside script for example, you would create a ordinary script file (for example called <i>client.lua</i>) and specify it in the meta.xml, like this:
</p>
<!-- PLAIN TEXT CODE FOR BOTS |<script src="client.lua" type="client" />|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><span class="sy0">&lt;</span>script src<span class="sy0">=</span><span class="st0">&quot;client.lua&quot;</span> <span class="kw1">type</span><span class="sy0">=</span><span class="st0">&quot;client&quot;</span> <span class="sy0">/&gt;</span></pre></div></div>
<p>The <i>type</i> attribute defaults to 'server', so you only need to specify it for clientside scripts. When you do this, the clientside script will be downloaded to the player's computer once he connects to the server. Read more about <a href="Client_side_scripts.html" title="Client side scripts">Client side scripts</a>.
</p>
<h3><span class="mw-headline" id="More_complex_resources">More complex resources</span></h3>
<p>The previous section showed briefly how to add clientside scripts to the resource, but there is also much more possible. As mentioned at the very top of this page, resources can be pretty much everything. Their purpose is defined by what they do. Let's have some theoretical resources, by looking at the files it contains, the <i>meta.xml</i> and what they might do:
</p>
<h4><span class="mw-headline" id="First_example_-_A_utility_script">First example - A utility script</span></h4>
<!-- PLAIN TEXT CODE FOR BOTS |/admin_commands /meta.xml /commands.lua /client.lua|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><span class="sy0">/</span>admin_commands
	<span class="sy0">/</span>meta.xml
	<span class="sy0">/</span>commands.lua
	<span class="sy0">/</span><a href="Client.html" class="kw3"><span class="kw3">client</span></a>.lua</pre></div></div>
<!-- PLAIN TEXT CODE FOR BOTS |<meta> <info author="Someguy" description="admin commands" /> <script src="commands.lua" /> <script src="client.lua" type="client" /> </meta>|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><span class="sy0">&lt;</span>meta<span class="sy0">&gt;</span>
	<span class="sy0">&lt;</span>info author<span class="sy0">=</span><span class="st0">&quot;Someguy&quot;</span> description<span class="sy0">=</span><span class="st0">&quot;admin commands&quot;</span> <span class="sy0">/&gt;</span>
	<span class="sy0">&lt;</span>script src<span class="sy0">=</span><span class="st0">&quot;commands.lua&quot;</span> <span class="sy0">/&gt;</span>
	<span class="sy0">&lt;</span>script src<span class="sy0">=</span><span class="st0">&quot;client.lua&quot;</span> <span class="kw1">type</span><span class="sy0">=</span><span class="st0">&quot;client&quot;</span> <span class="sy0">/&gt;</span>
<span class="sy0">&lt;/</span>meta<span class="sy0">&gt;</span></pre></div></div>
<ul>
<li> The <i>commands.lua</i> provides some admin commands, like banning a player, muting or something else that can be used to admin the server
</li>
<li> The <i>client.lua</i> provides a GUI to be able to perform the mentioned actions easily
</li>
</ul>
<p>This example might be running all the time (maybe even auto-started when the server starts) as it's useful during the whole gaming experience and also wont interfere with the gameplay, unless an admin decides to take some action of course.
</p>
<h4><span class="mw-headline" id="Second_example_-_A_gamemode">Second example - A gamemode</span></h4>
<!-- PLAIN TEXT CODE FOR BOTS |/counterstrike /meta.xml /counterstrike.lua /buymenu.lua|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><span class="sy0">/</span>counterstrike
	<span class="sy0">/</span>meta.xml
	<span class="sy0">/</span>counterstrike.lua
	<span class="sy0">/</span>buymenu.lua</pre></div></div>
<!-- PLAIN TEXT CODE FOR BOTS |<meta> <info author="Someguy" description="Counterstrike remake" type="gamemode" /> <script src="counterstrike.lua" /> <script src="buymenu.lua" type="client" /> </meta>|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><span class="sy0">&lt;</span>meta<span class="sy0">&gt;</span>
	<span class="sy0">&lt;</span>info author<span class="sy0">=</span><span class="st0">&quot;Someguy&quot;</span> description<span class="sy0">=</span><span class="st0">&quot;Counterstrike remake&quot;</span> <span class="kw1">type</span><span class="sy0">=</span><span class="st0">&quot;gamemode&quot;</span> <span class="sy0">/&gt;</span>
	<span class="sy0">&lt;</span>script src<span class="sy0">=</span><span class="st0">&quot;counterstrike.lua&quot;</span> <span class="sy0">/&gt;</span>
	<span class="sy0">&lt;</span>script src<span class="sy0">=</span><span class="st0">&quot;buymenu.lua&quot;</span> <span class="kw1">type</span><span class="sy0">=</span><span class="st0">&quot;client&quot;</span> <span class="sy0">/&gt;</span>
<span class="sy0">&lt;/</span>meta<span class="sy0">&gt;</span></pre></div></div>
<ul>
<li> The <i>counterstrike.lua</i> contains similiar to the following features:
<ul>
<li> Let players choose their team and spawn them
</li>
<li> Provide them with weapons, targets and instructions (maybe read from a Map, see below)
</li>
<li> Define the game's rules, e.g. when does the round end, what happens when a player dies
</li>
<li> .. and maybe some more
</li>
</ul>
</li>
<li> The <i>buymenu.lua</i> is a clientside script and creates a menu to buy weapons
</li>
</ul>
<p>This example can be called a gamemode, since it not only intereferes with the gameplay, but actually defines the rules of it. The <i>type</i> attribute indicates that this example works with the <a href="Map_manager.html" title="Map manager" class="mw-redirect">Map manager</a>, yet another resource that was written by the QA Team to manage gamemodes and map loading. It is highly recommended that you base your gamemodes on the techniques it provides.
</p><p>This also means that the gamemode probably won't run without a map. Gamemodes should always be as generic as possible. An example for a map is stated in the next example.
</p>
<h4><span class="mw-headline" id="Third_example_-_A_Map">Third example - A Map</span></h4>
<!-- PLAIN TEXT CODE FOR BOTS |/cs-airport /meta.xml /airport.map /airport.lua|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><span class="sy0">/</span>cs-airport
	<span class="sy0">/</span>meta.xml
	<span class="sy0">/</span>airport.map
	<span class="sy0">/</span>airport.lua</pre></div></div>
<!-- PLAIN TEXT CODE FOR BOTS |<meta> <info author="Someguy" description="Counterstrike airport map" type="map" gamemodes="counterstrike" /> <map src="airport.map" /> <script src="airport.lua" /> </meta>|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><span class="sy0">&lt;</span>meta<span class="sy0">&gt;</span>
	<span class="sy0">&lt;</span>info author<span class="sy0">=</span><span class="st0">&quot;Someguy&quot;</span> description<span class="sy0">=</span><span class="st0">&quot;Counterstrike airport map&quot;</span> <span class="kw1">type</span><span class="sy0">=</span><span class="st0">&quot;map&quot;</span> gamemodes<span class="sy0">=</span><span class="st0">&quot;counterstrike&quot;</span> <span class="sy0">/&gt;</span>
	<span class="sy0">&lt;</span>map src<span class="sy0">=</span><span class="st0">&quot;airport.map&quot;</span> <span class="sy0">/&gt;</span>
	<span class="sy0">&lt;</span>script src<span class="sy0">=</span><span class="st0">&quot;airport.lua&quot;</span> <span class="sy0">/&gt;</span>
<span class="sy0">&lt;/</span>meta<span class="sy0">&gt;</span></pre></div></div>
<ul>
<li> The <i>airport.map</i> in a XML file that provides information about the map to the gamemode, these may include:
<ul>
<li> Where the players should spawn, with what weapons, what teams there are
</li>
<li> What the targets are
</li>
<li> Weather, World Time, Timelimit
</li>
<li> Provide vehicles
</li>
</ul>
</li>
<li> The <i>airport.lua</i> might contain map-specific features, that may include:
<ul>
<li> Opening some door/make something explode when something specific happens
</li>
<li> Create or move some custom objects, or manipulate objects that are created through the .map file
</li>
<li> .. anything else map-specific you can think of
</li>
</ul>
</li>
</ul>
<p>As you can see, the <i>type</i> attribute changed to 'map', telling the <a href="Map_manager.html" title="Map manager" class="mw-redirect">Map manager</a> that this resource is a map, while the <i>gamemodes</i> attribute tells it for which gamemodes this map is valid, in this case the gamemode from the above example.
What may come as a surprise is that there is also a script in the Map resource. Of course this is not necessarily needed in a map, but opens a wide range of possibilities for map makers to create their own world within the rules of the gamemode they create it for.
</p><p>The <i>airport.map</i> file might look similiar to this:
</p>
<!-- PLAIN TEXT CODE FOR BOTS |<map mode="deathmatch" version="1.0"> <terrorists> <spawnpoint posX="2332.23" posY="-12232.33" posZ="4.42223" skins="23-40" /> </terrorists> <counterterrorists> <spawnpoint posX="2334.23443" posY="-12300.233" posZ="10.2344" skins="40-50" /> </counterterrorists> <bomb posX="23342.23" posY="" posZ="" /> <vehicle posX="" posY="" posZ="" model="602" /> <vehicle posX="" posY="" posZ="" model="603" /> </map>|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><span class="sy0">&lt;</span>map mode<span class="sy0">=</span><span class="st0">&quot;deathmatch&quot;</span> version<span class="sy0">=</span><span class="st0">&quot;1.0&quot;</span><span class="sy0">&gt;</span>
	<span class="sy0">&lt;</span>terrorists<span class="sy0">&gt;</span>
		<span class="sy0">&lt;</span>spawnpoint posX<span class="sy0">=</span><span class="st0">&quot;2332.23&quot;</span> posY<span class="sy0">=</span><span class="st0">&quot;-12232.33&quot;</span> posZ<span class="sy0">=</span><span class="st0">&quot;4.42223&quot;</span> skins<span class="sy0">=</span><span class="st0">&quot;23-40&quot;</span> <span class="sy0">/&gt;</span>
	<span class="sy0">&lt;/</span>terrorists<span class="sy0">&gt;</span>
	<span class="sy0">&lt;</span>counterterrorists<span class="sy0">&gt;</span>
		<span class="sy0">&lt;</span>spawnpoint posX<span class="sy0">=</span><span class="st0">&quot;2334.23443&quot;</span> posY<span class="sy0">=</span><span class="st0">&quot;-12300.233&quot;</span> posZ<span class="sy0">=</span><span class="st0">&quot;10.2344&quot;</span> skins<span class="sy0">=</span><span class="st0">&quot;40-50&quot;</span> <span class="sy0">/&gt;</span>
	<span class="sy0">&lt;/</span>counterterrorists<span class="sy0">&gt;</span>
&#160;
	<span class="sy0">&lt;</span>bomb posX<span class="sy0">=</span><span class="st0">&quot;23342.23&quot;</span> posY<span class="sy0">=</span><span class="st0">&quot;&quot;</span> posZ<span class="sy0">=</span><span class="st0">&quot;&quot;</span> <span class="sy0">/&gt;</span>
&#160;
	<span class="sy0">&lt;</span><a href="Vehicle.html" class="kw3"><span class="kw3">vehicle</span></a> posX<span class="sy0">=</span><span class="st0">&quot;&quot;</span> posY<span class="sy0">=</span><span class="st0">&quot;&quot;</span> posZ<span class="sy0">=</span><span class="st0">&quot;&quot;</span> model<span class="sy0">=</span><span class="st0">&quot;602&quot;</span> <span class="sy0">/&gt;</span>	
	<span class="sy0">&lt;</span><a href="Vehicle.html" class="kw3"><span class="kw3">vehicle</span></a> posX<span class="sy0">=</span><span class="st0">&quot;&quot;</span> posY<span class="sy0">=</span><span class="st0">&quot;&quot;</span> posZ<span class="sy0">=</span><span class="st0">&quot;&quot;</span> model<span class="sy0">=</span><span class="st0">&quot;603&quot;</span> <span class="sy0">/&gt;</span>	
<span class="sy0">&lt;/</span>map<span class="sy0">&gt;</span></pre></div></div>
<p>When a gamemode is started with a map, the map resources is automatically started by the mapmanager and the information it contains can be read by the gamemode resource. When the map changes, the current map resource is stopped and the next map resource is started. For a more in-depth explanation and examples of how map resources are utilized in the main script, please visit the <a href="Writing_Gamemodes.html" title="Writing Gamemodes">Writing Gamemodes</a> page.
</p>
<h3><span class="mw-headline" id="Events">Events</span></h3>
<p><a href="Event.html" title="Event" class="mw-redirect">Events</a> are the way NRP tells scripts about things that happen. For example when a player dies, the <a href="OnPlayerWasted.html" title="OnPlayerWasted">onPlayerWasted</a> event is triggered. In order to perform any actions when a player dies, you have to prepare yourself similiar to adding a command handler, as shown in <a href="#Writing_the_script">the first chapter</a>.
</p><p>This example will output a message with the name of the player who died:
</p>
<!-- PLAIN TEXT CODE FOR BOTS |function playerDied(totalAmmo, killer, killerWeapon, bodypart) outputChatBox(getPlayerName(source).." died!") end addEventHandler("onPlayerWasted",getRootElement(),playerDied)|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><span class="kw1">function</span> playerDied<span class="br0">&#40;</span>totalAmmo, killer, killerWeapon, bodypart<span class="br0">&#41;</span>
	<a href="OutputChatBox.html" class="kw6"><span class="kw6">outputChatBox</span></a><span class="br0">&#40;</span><a href="GetPlayerName.html" class="kw2"><span class="kw2">getPlayerName</span></a><span class="br0">&#40;</span>source<span class="br0">&#41;</span>..<span class="st0">&quot; died!&quot;</span><span class="br0">&#41;</span>
<span class="kw1">end</span>
<a href="AddEventHandler.html" class="kw2"><span class="kw2">addEventHandler</span></a><span class="br0">&#40;</span><span class="st0">&quot;onPlayerWasted&quot;</span>,<a href="GetRootElement.html" class="kw2"><span class="kw2">getRootElement</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span>,playerDied<span class="br0">&#41;</span></pre></div></div>
<p>Instead of showing what arguments are needed, the documentation page for Events shows what parameters are passed to the handler function, similiar to the way a <a href="#About_command_handlers">command handler</a> does, just that it is different from event to event. Another important point is the <i>source</i> variable, that exists in handler functions. It doesn't have to be added to the parameter list of the function, but it still exists. It has a different value from event to event, for player events (as in the example above) it is the player element. As another example, you can take a look at the basic spawning player script in the first section to get an idea how <i>source</i> is used.
</p>
<h2><span class="mw-headline" id="Where_to_go_from_here">Where to go from here</span></h2>
<p>You should now be familiar with the most basic aspects of NRP scripting and also a bit with the documentation. The <a href="Main_Page.html" title="Main Page">Main Page</a> provides you with links to more information, Tutorials and References that allow a deeper look into the topics you desire to learn about.
</p>
<table cellspacing="0" style="padding: 5px; width: 80%; margin: 2px auto 2px auto; border: 1px solid #BFBFFF; background: #E0E0FF; border-left: 10px solid #BFBFFF;">
<tr>
<td style="width: 32px; vertical-align:top; display: none;" rowspan="2"> [[{{{image}}}|link=]]
</td>
<td style=""> <b>Note:</b> From here we recommend reading the <a href="Debugging.html" title="Debugging">debugging</a> tutorial. Good debugging skills are an absolute necessity when you are making scripts. We also recommend you to use the <a href="Predefined_variables_list.html" title="Predefined variables list">predefined variables list</a> to help you with certain tasks and make scripting easier and faster.
</td></tr>
<tr>
<td rowspan="1" style="padding-left: 10px;">
</td></tr></table>
<p><b>See also:</b>
</p>
<ul>
<li> <a href="OOP_Introduction.html" title="OOP Introduction">OOP Scripting Introduction</a>
</li>
<li> <a href="Advanced_Topics.html" title="Advanced Topics">Advanced Topics</a>
</li>
<li> <a href="Script_security.html" title="Script security">Script security</a>
</li>
<li> <a href="Scripting_Introduction_Urdu.html" title="Scripting Introduction Urdu">Scripting Introduction Urdu</a>
</li>
</ul>

<!-- 
NewPP limit report
CPU time usage: 0.460 seconds
Real time usage: 0.464 seconds
Preprocessor visited node count: 327/1000000
Preprocessor generated node count: 801/1000000
Post‐expand include size: 3383/2097152 bytes
Template argument size: 2038/2097152 bytes
Highest expansion depth: 5/40
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key nrp_wiki_1_22_13-wiki_dev_:pcache:idhash:2751-0!*!0!!en!*!* and timestamp 20150826122115
 -->
</div><div class="printfooter">
Retrieved from "<a index.html?title=Scripting_Introduction&amp;oldid=44433">/index.php?title=Scripting_Introduction&amp;oldid=44433</a>"</div>
		<div id='catlinks' class='catlinks'><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="Special_Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="Category_Tutorials.html" title="Category:Tutorials">Tutorials</a></li></ul></div></div>		<!-- end content -->
				<div class="visualClear"></div>
	</div>
	</div>
		</div>
		<div id="column-one">
	<div id="p-cactions" class="portlet">
		<h5>Views</h5>
		<div class="pBody">
			<ul>
	
				 <li id="ca-nstab-main" class="selected"><a href="Scripting_Introduction.html"Array>Page</a></li>
				 <li id="ca-talk"><a href="Talk_Scripting_Introduction.html"Array>Discussion</a></li>
				 <li id="ca-viewsource"><a index.html?title=Scripting_Introduction&amp;action=edit"Array>View source</a></li>
				 <li id="ca-history"><a index.html?title=Scripting_Introduction&amp;action=history"Array>History</a></li>			</ul>
		</div>
	</div>
	<div class="portlet" id="p-personal">
		<h5>Personal tools</h5>
		<div class="pBody">
			<ul>
				<li id="pt-login"><a index.html?title=Special:UserLogin&amp;returnto=Scripting+Introduction"Array></a></li>
			</ul>
		</div>
	</div>
	
	<div class="portlet" id="p-logo">
		<a style="background-image: url();" href="Main_Page.html"Array></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
	<div class='generated-sidebar portlet' id='p-navigation'>
		<h5>Navigation</h5>
		<div class='pBody'>
			<ul>
				<li id="n-Home"><a href="Main_Page.html"Array>Home</a></li>
				<li id="n-How-you-can-help"><a href="How_you_can_help.html"Array>How you can help</a></li>
				<li id="n-recentchanges"><a href="Special_RecentChanges.html"Array>Recent changes</a></li>
				<li id="n-randompage"><a href="OnElementDataChange.html"Array>Random page</a></li>
			</ul>
		</div>
	</div>
	<div class='generated-sidebar portlet' id='p-reference'>
		<h5>reference</h5>
		<div class='pBody'>
			<ul>
				<li id="n-Client-Functions"><a href="Client_Scripting_Functions.html"Array>Client Functions</a></li>
				<li id="n-Client-Events"><a href="Client_Scripting_Events.html"Array>Client Events</a></li>
				<li id="n-Server-Functions"><a href="Server_Scripting_Functions.html"Array>Server Functions</a></li>
				<li id="n-Server-Events"><a href="Server_Scripting_Events.html"Array>Server Events</a></li>
				<li id="n-Useful-Functions"><a href="Useful_Functions.html"Array>Useful Functions</a></li>
				<li id="n-NRP-Classes"><a href="NRP_Classes.html"Array>NRP Classes</a></li>
				<li id="n-NRP-Elements"><a href="Element.html"Array>NRP Elements</a></li>
				<li id="n-Element-Tree"><a href="Element_tree.html"Array>Element Tree</a></li>
			</ul>
		</div>
	</div>
	<div id="p-search" class="portlet">
		
		<div id="searchBody" class="pBody">
			<form action="/index.php" id="searchform"><div>
				
				
				
				
			</div></form>
		</div>
	</div>
	<div class="portlet" id="p-tb">
		<h5>Tools</h5>
		<div class="pBody">
			<ul>
				<li id="t-whatlinkshere"><a href="Special_WhatLinksHere/Scripting_Introduction.html"Array>What links here</a></li>
				<li id="t-recentchangeslinked"><a href="Special_RecentChangesLinked/Scripting_Introduction.html"Array>Related changes</a></li>
<li id="t-specialpages"><a href="Special_SpecialPages.html"Array>Special pages</a></li>
				<li id="t-print"><a index.html?title=Scripting_Introduction&amp;printable=yes" rel="alternate"Array>Printable version</a></li>				<li id="t-permalink"><a index.html?title=Scripting_Introduction&amp;oldid=44433"Array>Permanent link</a></li>			</ul>
		</div>
	</div>
	<div id="p-lang" class="portlet">
		<h5>In other languages</h5>
		<div class="pBody">
			<ul>
				<li class="interwiki-es"><a href="../wiki/ES/Introducci%C3%B3n_a_la_Programaci%C3%B3n">Español</a></li>
				<li class="interwiki-it"><a href="../wiki/IT/Introduzione_allo_scripting">Italiano</a></li>
				<li class="interwiki-nl"><a href="../wiki/NL/Scripting_introductie">Nederlands</a></li>
				<li class="interwiki-pt-br"><a href="../wiki/PT-BR/Introdu%C3%A7%C3%A3o_ao_Scripting">Português do Brasil</a></li>
				<li class="interwiki-ru"><a href="../wiki/RU/Scripting_Introduction">Русский</a></li>
				<li class="interwiki-ar"><a href="../wiki/AR/%D9%85%D9%82%D8%AF%D9%85%D9%87_%D9%81%D9%8A_%D8%A7%D9%84%D8%A8%D8%B1%D9%85%D8%AC%D9%87">العربية</a></li>
				<li class="interwiki-zh-cn"><a href="../wiki/ZH-CN/%E8%84%9A%E6%9C%AC%E7%BC%96%E5%86%99%E4%BB%8B%E7%BB%8D">中文（中国大陆）‎</a></li>
			</ul>
		</div>
	</div>
</div><!-- end of the left (by default at least) column -->
<div class="visualClear"></div>
			<div id="footer">
				<div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="../skins/common/images/poweredby_mediawiki_88x31.png" height="31" width="88" alt="Powered by MediaWiki" /></a></div>
				<div id="f-copyrightico"><a href="http://www.gnu.org/copyleft/fdl.html"><img src="../skins/common/images/gnu-fdl.png" alt="GNU Free Documentation License 1.2" width="88" height="31" /></a></div>
	<ul id="f-list">
					<li id="lastmod"> This page was last modified on 9 February 2015, at 19:17.</li>
					<li id="viewcount">This page has been accessed 240,617 times.</li>
					<li id="copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.2</a> unless otherwise noted.</li>
					<li id="privacy"><a href="Nexus_RP__Wiki_Privacy_policy.html" title="Nexus RP: Wiki:Privacy policy">Privacy policy</a></li>
					<li id="about"><a href="Nexus_RP__Wiki_About.html" title="Nexus RP: Wiki:About">About Nexus RP: Wiki</a></li>
					<li id="disclaimer"><a href="Nexus_RP__Wiki_General_disclaimer.html" title="Nexus RP: Wiki:General disclaimer">Disclaimers</a></li>
			</ul>
</div>
</div>
<script>/*<![CDATA[*/window.jQuery && jQuery.ready();/*]]>*/</script><script>if(window.mw){
mw.loader.state({"site":"loading","user":"ready","user.groups":"ready"});
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.action.view.postEdit","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest","ext.cite"],null,true);
}</script>
<script src="/load.php?debug=false&amp;lang=en&amp;modules=site&amp;only=scripts&amp;skin=nrpbook&amp;*"></script>
<!-- Served in 0.051 secs. --></body>
<!-- Mirrored from wiki.nexusrp.com/wiki/Scripting_Introduction by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 27 Aug 2015 07:28:24 GMT -->
</html>
