<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
	
<!-- Mirrored from wiki.nexusrp.com/wiki/Scripting_the_GUI_-_Tutorial_2 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 27 Aug 2015 07:33:03 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<meta name="generator" content="MediaWiki 1.22.13" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="Nexus RP: Wiki (en)" />
<link rel="EditURI" type="application/rsd+xml" href="/api.php?action=rsd" />
<link rel="copyright" href="http://www.gnu.org/copyleft/fdl.html" />
<link rel="alternate" type="application/atom+xml" title="Nexus RP: Wiki Atom feed" index.html?title=Special:RecentChanges&amp;feed=atom" />		<title>Scripting the GUI - Tutorial 2 - Nexus RP: Wiki</title>
		<link rel="stylesheet" href="/load.php?debug=false&amp;lang=en&amp;modules=ext.rtlcite%7Cmediawiki.legacy.commonPrint%2Cshared&amp;only=styles&amp;skin=nrpbook&amp;*" />
<link rel="stylesheet" href="../skins/nrpbook/main11b9.css?303" media="screen" />
<!--[if lt IE 5.5000]><link rel="stylesheet" href="/skins/nrpbook/IE50Fixes.css?303" media="screen" /><![endif]-->
<!--[if IE 5.5000]><link rel="stylesheet" href="/skins/nrpbook/IE55Fixes.css?303" media="screen" /><![endif]-->
<!--[if IE 6]><link rel="stylesheet" href="/skins/nrpbook/IE60Fixes.css?303" media="screen" /><![endif]-->
<!--[if IE 7]><link rel="stylesheet" href="/skins/nrpbook/IE70Fixes.css?303" media="screen" /><![endif]--><meta name="ResourceLoaderDynamicStyles" content="" />
<link rel="stylesheet" href="/load.php?debug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=nrpbook&amp;*" />
<style>a:lang(ar),a:lang(ckb),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: nrp_wiki_1_22_13-wiki_dev_:resourceloader:filter:minify-css:7:68ffccca97fd0532df6141dcbaf256b6 */</style>

		<!--[if lt IE 7]><script type="text/javascript" src="/skins/common/IEFixes.js?303"></script>
		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->

		<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Scripting_the_GUI_-_Tutorial_2","wgTitle":"Scripting the GUI - Tutorial 2","wgCurRevisionId":22284,"wgRevisionId":22284,"wgArticleId":5024,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["GUI Tutorials"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransforNRPble":["",""],"wgDigitTransforNRPble":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Scripting_the_GUI_-_Tutorial_2","wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[]});
}</script>
		<script type="text/javascript" src="../skins/common/wikibits11b9.js?303"><!-- wikibits js --></script>
		<!-- Head Scripts -->
<script src="/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=nrpbook&amp;*"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Scripting_the_GUI_-_Tutorial_2","wgTitle":"Scripting the GUI - Tutorial 2","wgCurRevisionId":22284,"wgRevisionId":22284,"wgArticleId":5024,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["GUI Tutorials"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransforNRPble":["",""],"wgDigitTransforNRPble":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Scripting_the_GUI_-_Tutorial_2","wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[]});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function(){mw.user.options.set({"ccmeonemails":0,"cols":80,"date":"default","diffonly":0,"disablemail":0,"disablesuggest":0,"editfont":"default","editondblclick":0,"editsection":1,"editsectiononrightclick":0,"enotifminoredits":0,"enotifrevealaddr":0,"enotifusertalkpages":1,"enotifwatchlistpages":0,"extendwatchlist":0,"fancysig":0,"forceeditsummary":0,"gender":"unknown","hideminor":0,"hidepatrolled":0,"imagesize":2,"justify":0,"math":1,"minordefault":0,"newpageshidepatrolled":0,"nocache":0,"noconvertlink":0,"norollbackdiff":0,"numberheadings":0,"previewonfirst":0,"previewontop":1,"rcdays":7,"rclimit":50,"rememberpassword":0,"rows":25,"searchlimit":20,"showhiddencats":0,"shownumberswatching":1,"showtoc":1,"showtoolbar":1,"skin":"nrpbook","stubthreshold":0,"thumbsize":2,"underline":2,"uselivepreview":0,"usenewrc":0,"vector-simplesearch":1,"watchcreations":0,"watchdefault":0,"watchdeletion":0,"watchlistdays":3,"watchlisthideanons":0,"watchlisthidebots":0,
"watchlisthideliu":0,"watchlisthideminor":0,"watchlisthideown":0,"watchlisthidepatrolled":0,"watchmoves":0,"wllimit":250,"useeditwarning":1,"prefershttps":1,"language":"en","variant-gan":"gan","variant-iu":"iu","variant-kk":"kk","variant-ku":"ku","variant-shi":"shi","variant-sr":"sr","variant-tg":"tg","variant-uz":"uz","variant-zh":"zh","searchNs0":true,"searchNs1":false,"searchNs2":false,"searchNs3":false,"searchNs4":false,"searchNs5":false,"searchNs6":false,"searchNs7":false,"searchNs8":false,"searchNs9":false,"searchNs10":false,"searchNs11":false,"searchNs12":false,"searchNs13":false,"searchNs14":false,"searchNs15":false,"searchNs100":false,"variant":"en"});},{},{});mw.loader.implement("user.tokens",function(){mw.user.tokens.set({"editToken":"+\\","patrolToken":false,"watchToken":false});},{},{});
/* cache key: nrp_wiki_1_22_13-wiki_dev_:resourceloader:filter:minify-js:7:925126ceab977200cdcc48193642dea0 */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax"]);
}</script><style type="text/css">/*<![CDATA[*/
.source-lua {line-height: normal;}
.source-lua li, .source-lua pre {
	line-height: normal; border: 0px none white;
}
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for lua
 * CSS class: source-lua, CSS id: 
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 * --------------------------------------
 */
.lua.source-lua .de1, .lua.source-lua .de2 {font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;font-family: monospace, monospace;}
.lua.source-lua  {font-family:monospace;}
.lua.source-lua .imp {font-weight: bold; color: red;}
.lua.source-lua li, .lua.source-lua .li1 {font-weight: normal; vertical-align:top;}
.lua.source-lua .ln {width:1px;text-align:right;margin:0;padding:0 2px;vertical-align:top;}
.lua.source-lua .li2 {font-weight: bold; vertical-align:top;}
.lua.source-lua .kw1 {color: #b1b100;}
.lua.source-lua .co1 {color: #808080; font-style: italic;}
.lua.source-lua .coMULTI {color: #808080; font-style: italic;}
.lua.source-lua .es0 {color: #000099; font-weight: bold;}
.lua.source-lua .br0 {color: #66cc66;}
.lua.source-lua .sy0 {color: #66cc66;}
.lua.source-lua .st0 {color: #00A600;}
.lua.source-lua .nu0 {color: #cc66cc;}
.lua.source-lua .me0 {color: #b1b100;}
.lua.source-lua .ln-xtra, .lua.source-lua li.ln-xtra, .lua.source-lua div.ln-xtra {background-color: #ffc;}
.lua.source-lua span.xtra { display:block; }

/*]]>*/
</style>	</head>
<body class="mediawiki ltr ns-0 ns-subject page-Scripting_the_GUI_-_Tutorial_2 skin-nrpbook">
	<div id="globalWrapper">
		
		<div id="column-content">
	<div id="content">
		<a name="top" id="top"></a>
			<h1 id="firstHeading" class="firstHeading">Scripting the GUI - Tutorial 2</h1>
		<div id="bodyContent">
			<h3 id="siteSub">From Nexus RP: Wiki</h3>
			<div id="contentSub"></div>
									<div id="jump-to-nav">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>		<!-- start content -->
<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><p><b>Scripting the GUI - Tutorial 2 (Gates + Keypads)</b>
</p><p>In this tutorial we will look at creating GUI keypads with combination codes for map-defined object gates.
We will be using serverside keycodes, with some client - server interaction to verify the codes and report the outcome.
</p><p><b>Note that this tutorial assumes you are familiar with all the content covered in the <a href="Introduction_to_Scripting_GUI.html" title="Introduction to Scripting GUI" class="mw-redirect">GUI Scripting Introduction</a>.</b>
</p>
<div class="thumb tright"><div class="thumbinner" style="width:152px;"><a href="File_Gui_keypad_tutorial.html" class="image"><img alt="" src="../images/4/4e/Gui_keypad_tutorial.png" width="150" height="286" class="thumbimage" /></a>  <div class="thumbcaption"><div class="magnify"><a href="File_Gui_keypad_tutorial.html" class="internal" title="Enlarge"><img src="../skins/common/images/magnify-clip.png" width="15" height="11" alt="" /></a></div>GUI Keypad</div></div></div>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Setting_up_the_Keypad"><span class="tocnumber">1</span> <span class="toctext">Setting up the Keypad</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Creating_the_GUI"><span class="tocnumber">1.1</span> <span class="toctext">Creating the GUI</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#Managing_the_display"><span class="tocnumber">1.2</span> <span class="toctext">Managing the display</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Detecting_the_clicks"><span class="tocnumber">1.3</span> <span class="toctext">Detecting the clicks</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Handling_the_clicks"><span class="tocnumber">1.4</span> <span class="toctext">Handling the clicks</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-6"><a href="#Serverside_Verification"><span class="tocnumber">2</span> <span class="toctext">Serverside Verification</span></a>
<ul>
<li class="toclevel-2 tocsection-7"><a href="#Defining_the_keycode"><span class="tocnumber">2.1</span> <span class="toctext">Defining the keycode</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Verifying_the_code"><span class="tocnumber">2.2</span> <span class="toctext">Verifying the code</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-9"><a href="#Receiving_the_result"><span class="tocnumber">3</span> <span class="toctext">Receiving the result</span></a>
<ul>
<li class="toclevel-2 tocsection-10"><a href="#Catching_and_processing_the_result"><span class="tocnumber">3.1</span> <span class="toctext">Catching and processing the result</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-11"><a href="#Applying_the_Keypad"><span class="tocnumber">4</span> <span class="toctext">Applying the Keypad</span></a>
<ul>
<li class="toclevel-2 tocsection-12"><a href="#Creating_the_gate"><span class="tocnumber">4.1</span> <span class="toctext">Creating the gate</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#Opening_the_keypad"><span class="tocnumber">4.2</span> <span class="toctext">Opening the keypad</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#Opening_the_gate"><span class="tocnumber">4.3</span> <span class="toctext">Opening the gate</span></a></li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="Setting_up_the_Keypad">Setting up the Keypad</span></h2>
<p>To begin, open up a clientside lua file (if you have been following the <a href="Introduction_to_Scripting_GUI.html" title="Introduction to Scripting GUI" class="mw-redirect">GUI Scripting Introduction</a>, this is gui.lua) to work with.
</p>
<h3><span class="mw-headline" id="Creating_the_GUI">Creating the GUI</span></h3>
<p>By now, GUI creation should seem relatively straight forward, so we will not go over this in too much detail.
As in <a href="Scripting_the_GUI_-_Tutorial_1.html" title="Scripting the GUI - Tutorial 1">Tutorial 1</a> we will be using <b>absolute</b> values in this tutorial.
</p>
<!-- PLAIN TEXT CODE FOR BOTS |function createKeypad() local sWidth, sHeight = guiGetScreenSize() local Width,Height = 142,276 local X = (sWidth/2) - (Width/2) local Y = (sHeight/2) - (Height/2) keypadWindow = guiCreateWindow(X,Y,Width,Height,"Keypad",false) guiWindowSetSizable(keypadWindow,false) keypadButton1 = guiCreateButton(13,68,37,36,"1",false,keypadWindow) keypadButton2 = guiCreateButton(53,68,37,36,"2",false,keypadWindow) keypadButton3 = guiCreateButton(93,68,37,36,"3",false,keypadWindow) keypadButton4 = guiCreateButton(13,108,37,36,"4",false,keypadWindow) keypadButton5 = guiCreateButton(53,108,37,36,"5",false,keypadWindow) keypadButton6 = guiCreateButton(93,108,37,36,"6",false,keypadWindow) keypadButton7 = guiCreateButton(13,148,37,36,"7",false,keypadWindow) keypadButton8 = guiCreateButton(53,148,37,36,"8",false,keypadWindow) keypadButton9 = guiCreateButton(93,148,37,36,"9",false,keypadWindow) keypadButtonAsterix = guiCreateButton(13,188,37,36,"*",false,keypadWindow) keypadButton0 = guiCreateButton(53,188,37,36,"0",false,keypadWindow) keypadButtonHash = guiCreateButton(93,188,37,36,"#",false,keypadWindow) keypadButtonExit = guiCreateButton(13,228,37,36,"Exit",false,keypadWindow) keypadButtonEnter = guiCreateButton(53,228,37,36,"Enter",false,keypadWindow) keypadButtonClear = guiCreateButton(93,228,37,36,"Clear",false,keypadWindow) keypadGridlistDisplay = guiCreateGridList(13,25,117,33,false,keypadWindow) guiGridListSetSelectionMode(keypadGridlistDisplay,2) guiSetAlpha(keypadGridlistDisplay,0.6) keypadLabelDisplay = guiCreateLabel(14,26,115,30,"Enter Keycode.",false,keypadWindow) guiLabelSetColor(keypadLabelDisplay,255,000,000) guiLabelSetVerticalAlign(keypadLabelDisplay,"center") guiLabelSetHorizontalAlign(keypadLabelDisplay,"center",false) guiSetVisible(keypadWindow,false) end addEventHandler("onClientResourceStart",getResourceRootElement(getThisResource()),createKeypad)|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><span class="kw1">function</span> createKeypad<span class="br0">&#40;</span><span class="br0">&#41;</span>
	<span class="co1">-- get the screen width and height</span>
	<span class="kw1">local</span> sWidth, sHeight <span class="sy0">=</span> <a href="GuiGetScreenSize.html" class="kw4"><span class="kw4">guiGetScreenSize</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span>
&#160;
	<span class="co1">-- create the window, using some maths to find the centre of the screen</span>
	<span class="kw1">local</span> Width,Height <span class="sy0">=</span> <span class="nu0">142</span>,<span class="nu0">276</span>
	<span class="kw1">local</span> X <span class="sy0">=</span> <span class="br0">&#40;</span>sWidth<span class="sy0">/</span><span class="nu0">2</span><span class="br0">&#41;</span> - <span class="br0">&#40;</span>Width<span class="sy0">/</span><span class="nu0">2</span><span class="br0">&#41;</span>
	<span class="kw1">local</span> Y <span class="sy0">=</span> <span class="br0">&#40;</span>sHeight<span class="sy0">/</span><span class="nu0">2</span><span class="br0">&#41;</span> - <span class="br0">&#40;</span>Height<span class="sy0">/</span><span class="nu0">2</span><span class="br0">&#41;</span>
	keypadWindow <span class="sy0">=</span> <a href="GuiCreateWindow.html" class="kw4"><span class="kw4">guiCreateWindow</span></a><span class="br0">&#40;</span>X,Y,Width,Height,<span class="st0">&quot;Keypad&quot;</span>,<span class="kw1">false</span><span class="br0">&#41;</span>
&#160;
	<span class="co1">-- don't allow people to resize the keypad</span>
	<a href="GuiWindowSetSizable.html" class="kw4"><span class="kw4">guiWindowSetSizable</span></a><span class="br0">&#40;</span>keypadWindow,<span class="kw1">false</span><span class="br0">&#41;</span>
&#160;
	<span class="co1">-- create buttons labeled 0-9, &quot;*&quot;, &quot;#&quot;, &quot;Enter&quot; and &quot;C&quot; (clear)</span>
	keypadButton1 <span class="sy0">=</span> <a href="GuiCreateButton.html" class="kw4"><span class="kw4">guiCreateButton</span></a><span class="br0">&#40;</span><span class="nu0">13</span>,<span class="nu0">68</span>,<span class="nu0">37</span>,<span class="nu0">36</span>,<span class="st0">&quot;1&quot;</span>,<span class="kw1">false</span>,keypadWindow<span class="br0">&#41;</span>
	keypadButton2 <span class="sy0">=</span> <a href="GuiCreateButton.html" class="kw4"><span class="kw4">guiCreateButton</span></a><span class="br0">&#40;</span><span class="nu0">53</span>,<span class="nu0">68</span>,<span class="nu0">37</span>,<span class="nu0">36</span>,<span class="st0">&quot;2&quot;</span>,<span class="kw1">false</span>,keypadWindow<span class="br0">&#41;</span>
	keypadButton3 <span class="sy0">=</span> <a href="GuiCreateButton.html" class="kw4"><span class="kw4">guiCreateButton</span></a><span class="br0">&#40;</span><span class="nu0">93</span>,<span class="nu0">68</span>,<span class="nu0">37</span>,<span class="nu0">36</span>,<span class="st0">&quot;3&quot;</span>,<span class="kw1">false</span>,keypadWindow<span class="br0">&#41;</span>
	keypadButton4 <span class="sy0">=</span> <a href="GuiCreateButton.html" class="kw4"><span class="kw4">guiCreateButton</span></a><span class="br0">&#40;</span><span class="nu0">13</span>,<span class="nu0">108</span>,<span class="nu0">37</span>,<span class="nu0">36</span>,<span class="st0">&quot;4&quot;</span>,<span class="kw1">false</span>,keypadWindow<span class="br0">&#41;</span>
	keypadButton5 <span class="sy0">=</span> <a href="GuiCreateButton.html" class="kw4"><span class="kw4">guiCreateButton</span></a><span class="br0">&#40;</span><span class="nu0">53</span>,<span class="nu0">108</span>,<span class="nu0">37</span>,<span class="nu0">36</span>,<span class="st0">&quot;5&quot;</span>,<span class="kw1">false</span>,keypadWindow<span class="br0">&#41;</span>
	keypadButton6 <span class="sy0">=</span> <a href="GuiCreateButton.html" class="kw4"><span class="kw4">guiCreateButton</span></a><span class="br0">&#40;</span><span class="nu0">93</span>,<span class="nu0">108</span>,<span class="nu0">37</span>,<span class="nu0">36</span>,<span class="st0">&quot;6&quot;</span>,<span class="kw1">false</span>,keypadWindow<span class="br0">&#41;</span>
	keypadButton7 <span class="sy0">=</span> <a href="GuiCreateButton.html" class="kw4"><span class="kw4">guiCreateButton</span></a><span class="br0">&#40;</span><span class="nu0">13</span>,<span class="nu0">148</span>,<span class="nu0">37</span>,<span class="nu0">36</span>,<span class="st0">&quot;7&quot;</span>,<span class="kw1">false</span>,keypadWindow<span class="br0">&#41;</span>
	keypadButton8 <span class="sy0">=</span> <a href="GuiCreateButton.html" class="kw4"><span class="kw4">guiCreateButton</span></a><span class="br0">&#40;</span><span class="nu0">53</span>,<span class="nu0">148</span>,<span class="nu0">37</span>,<span class="nu0">36</span>,<span class="st0">&quot;8&quot;</span>,<span class="kw1">false</span>,keypadWindow<span class="br0">&#41;</span>
	keypadButton9 <span class="sy0">=</span> <a href="GuiCreateButton.html" class="kw4"><span class="kw4">guiCreateButton</span></a><span class="br0">&#40;</span><span class="nu0">93</span>,<span class="nu0">148</span>,<span class="nu0">37</span>,<span class="nu0">36</span>,<span class="st0">&quot;9&quot;</span>,<span class="kw1">false</span>,keypadWindow<span class="br0">&#41;</span>
	keypadButtonAsterix <span class="sy0">=</span> <a href="GuiCreateButton.html" class="kw4"><span class="kw4">guiCreateButton</span></a><span class="br0">&#40;</span><span class="nu0">13</span>,<span class="nu0">188</span>,<span class="nu0">37</span>,<span class="nu0">36</span>,<span class="st0">&quot;*&quot;</span>,<span class="kw1">false</span>,keypadWindow<span class="br0">&#41;</span>
	keypadButton0 <span class="sy0">=</span> <a href="GuiCreateButton.html" class="kw4"><span class="kw4">guiCreateButton</span></a><span class="br0">&#40;</span><span class="nu0">53</span>,<span class="nu0">188</span>,<span class="nu0">37</span>,<span class="nu0">36</span>,<span class="st0">&quot;0&quot;</span>,<span class="kw1">false</span>,keypadWindow<span class="br0">&#41;</span>
	keypadButtonHash <span class="sy0">=</span> <a href="GuiCreateButton.html" class="kw4"><span class="kw4">guiCreateButton</span></a><span class="br0">&#40;</span><span class="nu0">93</span>,<span class="nu0">188</span>,<span class="nu0">37</span>,<span class="nu0">36</span>,<span class="st0">&quot;#&quot;</span>,<span class="kw1">false</span>,keypadWindow<span class="br0">&#41;</span>
	keypadButtonExit <span class="sy0">=</span> <a href="GuiCreateButton.html" class="kw4"><span class="kw4">guiCreateButton</span></a><span class="br0">&#40;</span><span class="nu0">13</span>,<span class="nu0">228</span>,<span class="nu0">37</span>,<span class="nu0">36</span>,<span class="st0">&quot;Exit&quot;</span>,<span class="kw1">false</span>,keypadWindow<span class="br0">&#41;</span>
	keypadButtonEnter <span class="sy0">=</span> <a href="GuiCreateButton.html" class="kw4"><span class="kw4">guiCreateButton</span></a><span class="br0">&#40;</span><span class="nu0">53</span>,<span class="nu0">228</span>,<span class="nu0">37</span>,<span class="nu0">36</span>,<span class="st0">&quot;Enter&quot;</span>,<span class="kw1">false</span>,keypadWindow<span class="br0">&#41;</span>
	keypadButtonClear <span class="sy0">=</span> <a href="GuiCreateButton.html" class="kw4"><span class="kw4">guiCreateButton</span></a><span class="br0">&#40;</span><span class="nu0">93</span>,<span class="nu0">228</span>,<span class="nu0">37</span>,<span class="nu0">36</span>,<span class="st0">&quot;Clear&quot;</span>,<span class="kw1">false</span>,keypadWindow<span class="br0">&#41;</span>
&#160;
	<span class="co1">-- create a gridlist to act as a backdrop on the kaypad display</span>
	keypadGridlistDisplay <span class="sy0">=</span> <a href="GuiCreateGridList.html" class="kw4"><span class="kw4">guiCreateGridList</span></a><span class="br0">&#40;</span><span class="nu0">13</span>,<span class="nu0">25</span>,<span class="nu0">117</span>,<span class="nu0">33</span>,<span class="kw1">false</span>,keypadWindow<span class="br0">&#41;</span>
	<a href="GuiGridListSetSelectionMode.html" class="kw4"><span class="kw4">guiGridListSetSelectionMode</span></a><span class="br0">&#40;</span>keypadGridlistDisplay,<span class="nu0">2</span><span class="br0">&#41;</span>
	<a href="GuiSetAlpha.html" class="kw4"><span class="kw4">guiSetAlpha</span></a><span class="br0">&#40;</span>keypadGridlistDisplay,<span class="nu0">0.6</span><span class="br0">&#41;</span>
	<span class="co1">-- create a label so we can write text on the keypad display</span>
	keypadLabelDisplay <span class="sy0">=</span> <a href="GuiCreateLabel.html" class="kw4"><span class="kw4">guiCreateLabel</span></a><span class="br0">&#40;</span><span class="nu0">14</span>,<span class="nu0">26</span>,<span class="nu0">115</span>,<span class="nu0">30</span>,<span class="st0">&quot;Enter Keycode.&quot;</span>,<span class="kw1">false</span>,keypadWindow<span class="br0">&#41;</span>
	<a href="GuiLabelSetColor.html" class="kw4"><span class="kw4">guiLabelSetColor</span></a><span class="br0">&#40;</span>keypadLabelDisplay,<span class="nu0">255</span>,000,000<span class="br0">&#41;</span>
	<a href="GuiLabelSetVerticalAlign.html" class="kw4"><span class="kw4">guiLabelSetVerticalAlign</span></a><span class="br0">&#40;</span>keypadLabelDisplay,<span class="st0">&quot;center&quot;</span><span class="br0">&#41;</span>
	<a href="GuiLabelSetHorizontalAlign.html" class="kw4"><span class="kw4">guiLabelSetHorizontalAlign</span></a><span class="br0">&#40;</span>keypadLabelDisplay,<span class="st0">&quot;center&quot;</span>,<span class="kw1">false</span><span class="br0">&#41;</span>
&#160;
	<a href="GuiSetVisible.html" class="kw4"><span class="kw4">guiSetVisible</span></a><span class="br0">&#40;</span>keypadWindow,<span class="kw1">false</span><span class="br0">&#41;</span>
<span class="kw1">end</span>
&#160;
<span class="co1">-- create the GUI when the resource starts</span>
<a href="AddEventHandler.html" class="kw2"><span class="kw2">addEventHandler</span></a><span class="br0">&#40;</span><span class="st0">&quot;onClientResourceStart&quot;</span>,<a href="GetResourceRootElement.html" class="kw2"><span class="kw2">getResourceRootElement</span></a><span class="br0">&#40;</span><a href="GetThisResource.html" class="kw2"><span class="kw2">getThisResource</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>,createKeypad<span class="br0">&#41;</span></pre></div></div>
<p>As you can see, the keypad consists of 10 numerical keys (0-9), two character keys (* and #), a clear key, an exit key and an enter key.
This means the codes used on the keypad can contain any of these characters (0123456789*#).
</p>
<h3><span class="mw-headline" id="Managing_the_display">Managing the display</span></h3>
<p>We will begin by writing a small function to control the display on the keypad.
This is done by encapsulating several methods of changing the text into a single function,
which will enable us to easily add/remove text from the display later on.
</p>
<!-- PLAIN TEXT CODE FOR BOTS |function updateDisplay(text) if text then if tonumber(text) or text == "*" or text == "#" then guiSetText(keypadLabelDisplay,guiGetText(keypadLabelDisplay) .. text) else guiSetText(keypadLabelDisplay,text) end else guiSetText(keypadLabelDisplay,"") end end|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><span class="kw1">function</span> updateDisplay<span class="br0">&#40;</span>text<span class="br0">&#41;</span>
	<span class="co1">-- if we are passing some text</span>
	<span class="kw1">if</span> text <span class="kw1">then</span>
		<span class="co1">-- if its a digit or * or #, then append it to the end of the display</span>
		<span class="kw1">if</span> <span class="kw1">tonumber</span><span class="br0">&#40;</span>text<span class="br0">&#41;</span> <span class="kw1">or</span> text <span class="sy0">==</span> <span class="st0">&quot;*&quot;</span> <span class="kw1">or</span> text <span class="sy0">==</span> <span class="st0">&quot;#&quot;</span> <span class="kw1">then</span>
			<a href="GuiSetText.html" class="kw4"><span class="kw4">guiSetText</span></a><span class="br0">&#40;</span>keypadLabelDisplay,<a href="GuiGetText.html" class="kw4"><span class="kw4">guiGetText</span></a><span class="br0">&#40;</span>keypadLabelDisplay<span class="br0">&#41;</span> .. text<span class="br0">&#41;</span>
		<span class="co1">-- otherwise replace the display with the new text</span>
		<span class="kw1">else</span>
			<a href="GuiSetText.html" class="kw4"><span class="kw4">guiSetText</span></a><span class="br0">&#40;</span>keypadLabelDisplay,text<span class="br0">&#41;</span>
		<span class="kw1">end</span>	
	<span class="co1">-- if we pass nil, clear the display entirely</span>
	<span class="kw1">else</span>
		<a href="GuiSetText.html" class="kw4"><span class="kw4">guiSetText</span></a><span class="br0">&#40;</span>keypadLabelDisplay,<span class="st0">&quot;&quot;</span><span class="br0">&#41;</span>
	<span class="kw1">end</span>
<span class="kw1">end</span></pre></div></div>
<p>We can now simply call updateDisplay(our text) to change the text on the display, or updateDisplay(nil) to clear it.
</p>
<h3><span class="mw-headline" id="Detecting_the_clicks">Detecting the clicks</span></h3>
<p>With so many buttons that do very similar tasks on our keypad, there are two methods available to us for detecting when a player clicks on them.
</p><p>We could add <a href="OnClientGUIClick.html" title="OnClientGUIClick">onClientGUIClick</a> events for every button individually, as we have done in previous tutorials; Or, alternatively, 
we could add a single <a href="OnClientGUIClick.html" title="OnClientGUIClick">onClientGUIClick</a> handle for the window (which is the parent of all our other keypad GUI elements), filter our results to include only the buttons we want and trigger our own custom event.
</p><p><br />
For the purposes of this tutorial and in the interest of outlining multiple approaches, we will explore the second method, though either one is an acceptable solution.
</p>
<!-- PLAIN TEXT CODE FOR BOTS |addEventHandler("onClientGUIClick",keypadWindow,processKeypadClicks,true)|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><a href="AddEventHandler.html" class="kw2"><span class="kw2">addEventHandler</span></a><span class="br0">&#40;</span><span class="st0">&quot;onClientGUIClick&quot;</span>,keypadWindow,processKeypadClicks,<span class="kw1">true</span><span class="br0">&#41;</span></pre></div></div>
<p><b>Notice the final argument is set to 'true'. This means that clicks on any other elements in the same branch of the tree will also trigger this event handle (eg. clicks on our buttons).</b>
</p><p>Add this line of code into your createKeypad function, after your GUI has been created.
</p><p><br />
Now that we are detecting all clicks on our GUI, we need to filter out the ones we do not want (ie: clicks on the window or display) and trigger our custom event:
</p>
<!-- PLAIN TEXT CODE FOR BOTS |function processKeypadClicks(button,state) if button == "left" and state == "up" then if getElementType(source) == "gui-button" then triggerEvent("onKeypadButtonClicked",source,getElementData(keypadWindow,"keypadID")) end end end|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><span class="kw1">function</span> processKeypadClicks<span class="br0">&#40;</span>button,state<span class="br0">&#41;</span>
	<span class="kw1">if</span> button <span class="sy0">==</span> <span class="st0">&quot;left&quot;</span> <span class="kw1">and</span> state <span class="sy0">==</span> <span class="st0">&quot;up&quot;</span> <span class="kw1">then</span>
		<span class="co1">-- if the source of this event is a gui button</span>
		<span class="kw1">if</span> <a href="GetElementType.html" class="kw2"><span class="kw2">getElementType</span></a><span class="br0">&#40;</span>source<span class="br0">&#41;</span> <span class="sy0">==</span> <span class="st0">&quot;gui-button&quot;</span> <span class="kw1">then</span>
			<span class="co1">-- trigger our custom event and send the keypad id of this keypad as an argument</span>
			<a href="TriggerEvent.html" class="kw2"><span class="kw2">triggerEvent</span></a><span class="br0">&#40;</span><span class="st0">&quot;onKeypadButtonClicked&quot;</span>,source,<a href="GetElementData.html" class="kw2"><span class="kw2">getElementData</span></a><span class="br0">&#40;</span>keypadWindow,<span class="st0">&quot;keypadID&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
		<span class="kw1">end</span>
	<span class="kw1">end</span>
<span class="kw1">end</span></pre></div></div>
<p>As you can see, we are now triggering our custom event "onKeypadButtonClicked" whenever a button is clicked on the keypad.
Also note we use element data "keypadID" to differentiate between keypads. This data will need to be set whenever the player is shown a new keypad.
We will cover this in more detail later.
</p>
<h3><span class="mw-headline" id="Handling_the_clicks">Handling the clicks</span></h3>
<p>Much like when using <a href="TriggerServerEvent.html" title="TriggerServerEvent">triggerServerEvent</a> in previous tutorials, we now need to define the event, only this time it is purely clientside:
</p>
<!-- PLAIN TEXT CODE FOR BOTS |addEvent("onKeypadButtonClicked",false) addEventHandler("onKeypadButtonClicked",root, function(keypadID) end )|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><a href="AddEvent.html" class="kw2"><span class="kw2">addEvent</span></a><span class="br0">&#40;</span><span class="st0">&quot;onKeypadButtonClicked&quot;</span>,<span class="kw1">false</span><span class="br0">&#41;</span>
<a href="AddEventHandler.html" class="kw2"><span class="kw2">addEventHandler</span></a><span class="br0">&#40;</span><span class="st0">&quot;onKeypadButtonClicked&quot;</span>,root,
	<span class="kw1">function</span><span class="br0">&#40;</span>keypadID<span class="br0">&#41;</span>
&#160;
	<span class="kw1">end</span>
<span class="br0">&#41;</span></pre></div></div>
<p>Note the second argument in <a href="AddEvent.html" title="AddEvent">addEvent</a> is set to false, indicating that this event cannot be triggered from the server.
Also note, the function we are using in the <a href="AddEventHandler.html" title="AddEventHandler">addEventHandler</a> does not have a name. If you contract it down and remove the spacing, you get:
</p>
<!-- PLAIN TEXT CODE FOR BOTS |addEventHandler("onKeypadButtonClicked",root,function() ... end)|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><a href="AddEventHandler.html" class="kw2"><span class="kw2">addEventHandler</span></a><span class="br0">&#40;</span><span class="st0">&quot;onKeypadButtonClicked&quot;</span>,root,<span class="kw1">function</span><span class="br0">&#40;</span><span class="br0">&#41;</span> ... <span class="kw1">end</span><span class="br0">&#41;</span></pre></div></div>
<p>This simply means instead of storing the pointer to the function in a variable, we are passing it directly as an argument.
Doing it this way cleans up the code and will often make it easier to follow.
</p><p>Now that the event has been created, we can fill in the code logic that will control our button presses.
</p>
<!-- PLAIN TEXT CODE FOR BOTS |addEvent("onKeypadButtonClicked",false) addEventHandler("onKeypadButtonClicked",root, function(keypadID) if guiGetText(keypadLabelDisplay) == "Enter Keycode." or guiGetText(keypadLabelDisplay) == "Invalid Keycode." then updateDisplay() end if guiGetText(source) == "Clear" then updateDisplay() elseif guiGetText(source) == "Enter" then local code = guiGetText(keypadLabelDisplay) if code then triggerServerEvent("verifyKeypadCode",getLocalPlayer(),code,keypadID) end elseif guiGetText(source) == "Exit" then guiSetVisible(keypadWindow,false) updateDisplay("Enter Keycode.") showCursor(false,false) else updateDisplay(guiGetText(source)) end end )|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><a href="AddEvent.html" class="kw2"><span class="kw2">addEvent</span></a><span class="br0">&#40;</span><span class="st0">&quot;onKeypadButtonClicked&quot;</span>,<span class="kw1">false</span><span class="br0">&#41;</span>
<a href="AddEventHandler.html" class="kw2"><span class="kw2">addEventHandler</span></a><span class="br0">&#40;</span><span class="st0">&quot;onKeypadButtonClicked&quot;</span>,root,
	<span class="kw1">function</span><span class="br0">&#40;</span>keypadID<span class="br0">&#41;</span>
		<span class="co1">-- clear the display if this is the first time its being used</span>
		<span class="kw1">if</span> <a href="GuiGetText.html" class="kw4"><span class="kw4">guiGetText</span></a><span class="br0">&#40;</span>keypadLabelDisplay<span class="br0">&#41;</span> <span class="sy0">==</span> <span class="st0">&quot;Enter Keycode.&quot;</span> <span class="kw1">or</span> <a href="GuiGetText.html" class="kw4"><span class="kw4">guiGetText</span></a><span class="br0">&#40;</span>keypadLabelDisplay<span class="br0">&#41;</span> <span class="sy0">==</span> <span class="st0">&quot;Invalid Keycode.&quot;</span> <span class="kw1">then</span>
			updateDisplay<span class="br0">&#40;</span><span class="br0">&#41;</span>
		<span class="kw1">end</span>
&#160;
&#160;
		<span class="co1">-- if its the clear button</span>
		<span class="kw1">if</span> <a href="GuiGetText.html" class="kw4"><span class="kw4">guiGetText</span></a><span class="br0">&#40;</span>source<span class="br0">&#41;</span> <span class="sy0">==</span> <span class="st0">&quot;Clear&quot;</span> <span class="kw1">then</span>
			<span class="co1">-- clear the display</span>
			updateDisplay<span class="br0">&#40;</span><span class="br0">&#41;</span>
&#160;
		<span class="co1">-- if its the enter button</span>
		<span class="kw1">elseif</span> <a href="GuiGetText.html" class="kw4"><span class="kw4">guiGetText</span></a><span class="br0">&#40;</span>source<span class="br0">&#41;</span> <span class="sy0">==</span> <span class="st0">&quot;Enter&quot;</span> <span class="kw1">then</span>
			<span class="co1">-- get the currently entered code from the display</span>
			<span class="kw1">local</span> code <span class="sy0">=</span> <a href="GuiGetText.html" class="kw4"><span class="kw4">guiGetText</span></a><span class="br0">&#40;</span>keypadLabelDisplay<span class="br0">&#41;</span>
&#160;
			<span class="co1">-- if they have entered a code</span>
			<span class="kw1">if</span> code <span class="kw1">then</span>
				<span class="co1">-- trigger the server so we can verify their code</span>
				<a href="TriggerServerEvent.html" class="kw4"><span class="kw4">triggerServerEvent</span></a><span class="br0">&#40;</span><span class="st0">&quot;verifyKeypadCode&quot;</span>,<a href="GetLocalPlayer.html" class="kw4"><span class="kw4">getLocalPlayer</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span>,code,keypadID<span class="br0">&#41;</span>
			<span class="kw1">end</span>
&#160;
		<span class="co1">-- if its the exit button</span>
		<span class="kw1">elseif</span> <a href="GuiGetText.html" class="kw4"><span class="kw4">guiGetText</span></a><span class="br0">&#40;</span>source<span class="br0">&#41;</span> <span class="sy0">==</span> <span class="st0">&quot;Exit&quot;</span> <span class="kw1">then</span>
			<span class="co1">-- hide the keypad and reset the display text ready for next time</span>
			<a href="GuiSetVisible.html" class="kw4"><span class="kw4">guiSetVisible</span></a><span class="br0">&#40;</span>keypadWindow,<span class="kw1">false</span><span class="br0">&#41;</span>
			updateDisplay<span class="br0">&#40;</span><span class="st0">&quot;Enter Keycode.&quot;</span><span class="br0">&#41;</span>
			<a href="ShowCursor.html" class="kw2"><span class="kw2">showCursor</span></a><span class="br0">&#40;</span><span class="kw1">false</span>,<span class="kw1">false</span><span class="br0">&#41;</span>
&#160;
		<span class="co1">-- otherwise, it must be a character button</span>
		<span class="kw1">else</span>
			updateDisplay<span class="br0">&#40;</span><a href="GuiGetText.html" class="kw4"><span class="kw4">guiGetText</span></a><span class="br0">&#40;</span>source<span class="br0">&#41;</span><span class="br0">&#41;</span>	
		<span class="kw1">end</span>
	<span class="kw1">end</span>
<span class="br0">&#41;</span></pre></div></div>
<p>Note how when we are clearing the display, we simply call updateDisplay() with no arguments. We do not need to pass 'nil' to it as all parameters (and variables) are nil by default.
</p>
<h2><span class="mw-headline" id="Serverside_Verification">Serverside Verification</span></h2>
<p>For this part of the tutorial, you will need to open up a serverside lua file from your resource to work with.
</p>
<h3><span class="mw-headline" id="Defining_the_keycode">Defining the keycode</span></h3>
<p>Now that we have completed the keypad clicking logic, we need to move on to verifying the code entered into the keypad.
To do this, we need to have the correct code stored somewhere on the server, which we can check the players code against.
</p><p><b>Do not store sensitive information, such as keycodes or passwords, in a clientside file. All clientside files will be downloaded to the clients computer and can be accessed and read by anyone who has joined your server.</b>
</p><p>For the purposes of this tutorial we will simply store the code in a serverside table, however it can be done any number of ways (such as serverside xml files or MySQL databases).
</p>
<!-- PLAIN TEXT CODE FOR BOTS |local keypadCodes = { ["a51MainGateKeypadCode"] = "4455*#" }|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><span class="kw1">local</span> keypadCodes <span class="sy0">=</span> <span class="br0">&#123;</span>
	<span class="br0">&#91;</span><span class="st0">&quot;a51MainGateKeypadCode&quot;</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="st0">&quot;4455*#&quot;</span>
<span class="br0">&#125;</span></pre></div></div>
<p>This table stores an entry called "a51MainGateKeypadCode" with the code 4455*#
</p><p><b>This is the keycode that you will use to open the gate later on in this tutorial.</b>
</p>
<h3><span class="mw-headline" id="Verifying_the_code">Verifying the code</span></h3>
<p>Now that we have a keycode to verify against, we can write our serverside event:
</p>
<!-- PLAIN TEXT CODE FOR BOTS |addEvent("verifyKeypadCode",true) addEventHandler("verifyKeypadCode",root,function(code,keypadID) if code then if code == keypadCodes[keypadID] then triggerClientEvent(client,"onKeypadVerificationSuccessful",client,keypadID) else triggerClientEvent(client,"onKeypadVerificationFailed",client,keypadID) end end end)|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><a href="AddEvent.html" class="kw2"><span class="kw2">addEvent</span></a><span class="br0">&#40;</span><span class="st0">&quot;verifyKeypadCode&quot;</span>,<span class="kw1">true</span><span class="br0">&#41;</span>
<a href="AddEventHandler.html" class="kw2"><span class="kw2">addEventHandler</span></a><span class="br0">&#40;</span><span class="st0">&quot;verifyKeypadCode&quot;</span>,root,<span class="kw1">function</span><span class="br0">&#40;</span>code,keypadID<span class="br0">&#41;</span>
	<span class="kw1">if</span> code <span class="kw1">then</span>
		<span class="co1">-- using the table we created earlier, check if the code supplied is the same as the code for this gate</span>
		<span class="kw1">if</span> code <span class="sy0">==</span> keypadCodes<span class="br0">&#91;</span>keypadID<span class="br0">&#93;</span> <span class="kw1">then</span>
			<span class="co1">-- if it is, tell the client that it was successful</span>
			<a href="TriggerClientEvent.html" class="kw6"><span class="kw6">triggerClientEvent</span></a><span class="br0">&#40;</span><a href="Client.html" class="kw3"><span class="kw3">client</span></a>,<span class="st0">&quot;onKeypadVerificationSuccessful&quot;</span>,<a href="Client.html" class="kw3"><span class="kw3">client</span></a>,keypadID<span class="br0">&#41;</span>
		<span class="kw1">else</span>
			<span class="co1">-- if it is not, tell the client that it was not successful</span>
			<a href="TriggerClientEvent.html" class="kw6"><span class="kw6">triggerClientEvent</span></a><span class="br0">&#40;</span><a href="Client.html" class="kw3"><span class="kw3">client</span></a>,<span class="st0">&quot;onKeypadVerificationFailed&quot;</span>,<a href="Client.html" class="kw3"><span class="kw3">client</span></a>,keypadID<span class="br0">&#41;</span>
		<span class="kw1">end</span>
	<span class="kw1">end</span>
<span class="kw1">end</span><span class="br0">&#41;</span></pre></div></div>
<p>Here we use our table and the keypadID supplied by the player to check if the codes match.
</p><p>If you are not using a table to store the codes, then you will need to replace 'keypadCodes[keypadID]' with your own storage method.
Once it is verified (or not), we can trigger the client so the appropriate information can be shown on the keypad display.
</p><p><br />
</p>
<h2><span class="mw-headline" id="Receiving_the_result">Receiving the result</span></h2>
<p>We have now finished the serverside section of the tutorial, so you will need to open up the clientside lua file from your resource 
that you were previously working on.
</p><p><br />
Once our code has been verified, the server will send back the response to the client.
In just the same way as client -&gt; server interaction, we now need to add the event that the server is going to trigger on the client.
</p>
<h3><span class="mw-headline" id="Catching_and_processing_the_result">Catching and processing the result</span></h3>
<p>First we will add the event for when the verification is successful:
</p>
<!-- PLAIN TEXT CODE FOR BOTS |addEvent("onKeypadVerificationSuccessful",true) addEventHandler("onKeypadVerificationSuccessful",root, function() guiSetVisible(keypadWindow,false) updateDisplay("Enter Keycode.") showCursor(false,false) end )|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><a href="AddEvent.html" class="kw2"><span class="kw2">addEvent</span></a><span class="br0">&#40;</span><span class="st0">&quot;onKeypadVerificationSuccessful&quot;</span>,<span class="kw1">true</span><span class="br0">&#41;</span>
<a href="AddEventHandler.html" class="kw2"><span class="kw2">addEventHandler</span></a><span class="br0">&#40;</span><span class="st0">&quot;onKeypadVerificationSuccessful&quot;</span>,root,
	<span class="kw1">function</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
		<span class="co1">-- hide the keypad and reset the display text ready for next time</span>
		<a href="GuiSetVisible.html" class="kw4"><span class="kw4">guiSetVisible</span></a><span class="br0">&#40;</span>keypadWindow,<span class="kw1">false</span><span class="br0">&#41;</span>
		updateDisplay<span class="br0">&#40;</span><span class="st0">&quot;Enter Keycode.&quot;</span><span class="br0">&#41;</span>
		<a href="ShowCursor.html" class="kw2"><span class="kw2">showCursor</span></a><span class="br0">&#40;</span><span class="kw1">false</span>,<span class="kw1">false</span><span class="br0">&#41;</span>
	<span class="kw1">end</span>
<span class="br0">&#41;</span></pre></div></div>
<p>Finally we can add the event for when the verification is unsuccessful:
</p>
<!-- PLAIN TEXT CODE FOR BOTS |addEvent("onKeypadVerificationFailed",true) addEventHandler("onKeypadVerificationFailed",root, function() updateDisplay("Invalid Keycode.") end )|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><a href="AddEvent.html" class="kw2"><span class="kw2">addEvent</span></a><span class="br0">&#40;</span><span class="st0">&quot;onKeypadVerificationFailed&quot;</span>,<span class="kw1">true</span><span class="br0">&#41;</span>
<a href="AddEventHandler.html" class="kw2"><span class="kw2">addEventHandler</span></a><span class="br0">&#40;</span><span class="st0">&quot;onKeypadVerificationFailed&quot;</span>,root,
	<span class="kw1">function</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
		<span class="co1">-- update the display text to show the code was invalid</span>
		updateDisplay<span class="br0">&#40;</span><span class="st0">&quot;Invalid Keycode.&quot;</span><span class="br0">&#41;</span>
	<span class="kw1">end</span>
<span class="br0">&#41;</span></pre></div></div>
<p>This completes the keypad section of the tutorial.
</p><p>For an example of how to implement this into a working gate system, carry on reading the next section.
</p><p><br />
</p>
<h2><span class="mw-headline" id="Applying_the_Keypad">Applying the Keypad</span></h2>
<p>For the keypad to have any use, we need something to use it on.
For this tutorial we will be using gates, and as mentioned earlier we will create a main gate into A51.
</p>
<h3><span class="mw-headline" id="Creating_the_gate">Creating the gate</span></h3>
<p>First of all, we need to create the gate object.
For the purposes of this example, we will be using a map file to store the object. 
While this is the recommended method for defining objects, it is not the only way to approach it.
</p><p>Navigate to your resource folder and make a new file called gate.map, then add your new map file to your meta.xml using:
</p>
<!-- PLAIN TEXT CODE FOR BOTS |<map src="gate.map"/>|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><span class="sy0">&lt;</span>map src<span class="sy0">=</span><span class="st0">&quot;gate.map&quot;</span><span class="sy0">/&gt;</span></pre></div></div>
<p><i>If you are unsure of map file syntax, please see the <a href="Writing_Gamemodes.html" title="Writing Gamemodes"> Writing Gamemodes Tutorial</a> or check the <a href="Object.html" title="Object" class="mw-redirect">Object</a> page for help.</i>
</p>
<!-- PLAIN TEXT CODE FOR BOTS |<map> <object id="a51MainGateKeypadCode" model="971" posX="96.736" posY="1918.352" posZ="20.694" rotX="0" rotY="0" rotZ="270.40" newPosX="96.751" newPosY="1914.474" newPosZ="20.694" /> </map>|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><span class="sy0">&lt;</span>map<span class="sy0">&gt;</span>
    <span class="sy0">&lt;</span><a href="Object.html" class="kw3"><span class="kw3">object</span></a> id<span class="sy0">=</span><span class="st0">&quot;a51MainGateKeypadCode&quot;</span> model<span class="sy0">=</span><span class="st0">&quot;971&quot;</span> posX<span class="sy0">=</span><span class="st0">&quot;96.736&quot;</span> posY<span class="sy0">=</span><span class="st0">&quot;1918.352&quot;</span> posZ<span class="sy0">=</span><span class="st0">&quot;20.694&quot;</span> rotX<span class="sy0">=</span><span class="st0">&quot;0&quot;</span> rotY<span class="sy0">=</span><span class="st0">&quot;0&quot;</span> rotZ<span class="sy0">=</span><span class="st0">&quot;270.40&quot;</span> newPosX<span class="sy0">=</span><span class="st0">&quot;96.751&quot;</span> newPosY<span class="sy0">=</span><span class="st0">&quot;1914.474&quot;</span> newPosZ<span class="sy0">=</span><span class="st0">&quot;20.694&quot;</span> <span class="sy0">/&gt;</span>
<span class="sy0">&lt;/</span>map<span class="sy0">&gt;</span></pre></div></div>
<p>This will create a gate object across the A51 entrance. The object will have position and rotation data, as well as its newPosX,newPosY and newPosZ information that we need to be able to move it.
</p><p><b>Note that the object id is the same as the table entry we created earlier to hold the access code.</b>
This is one possible method that could be accessed to link this gate with that particular keycode.
</p>
<h3><span class="mw-headline" id="Opening_the_keypad">Opening the keypad</span></h3>
<p>Back in the clientside lua file again, we can now work on linking the gate and the keypad.
</p><p>Now that we have our gate, we need a way of accessing the keypad to open it.
For the purposes of this tutorial we will use a simple command, however you could just as easily use a colshape or button press.
</p>
<!-- PLAIN TEXT CODE FOR BOTS |addCommandHandler("a51gate",function() guiSetVisible(keypadWindow,true) showCursor(true,true) setElementData(keypadWindow,"keypadID","a51MainGateKeypadCode") end)|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><a href="AddCommandHandler.html" class="kw6"><span class="kw6">addCommandHandler</span></a><span class="br0">&#40;</span><span class="st0">&quot;a51gate&quot;</span>,<span class="kw1">function</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
	<a href="GuiSetVisible.html" class="kw4"><span class="kw4">guiSetVisible</span></a><span class="br0">&#40;</span>keypadWindow,<span class="kw1">true</span><span class="br0">&#41;</span>
	<a href="ShowCursor.html" class="kw2"><span class="kw2">showCursor</span></a><span class="br0">&#40;</span><span class="kw1">true</span>,<span class="kw1">true</span><span class="br0">&#41;</span>
	<a href="SetElementData.html" class="kw2"><span class="kw2">setElementData</span></a><span class="br0">&#40;</span>keypadWindow,<span class="st0">&quot;keypadID&quot;</span>,<span class="st0">&quot;a51MainGateKeypadCode&quot;</span><span class="br0">&#41;</span>
<span class="kw1">end</span><span class="br0">&#41;</span></pre></div></div>
<p>Note that we set the element data "keypadID".
This is very important because it allows us to keep track of which gate we are trying to open (in this case, the "a51MainGateKeypadCode" gate).
</p><p><br />
</p>
<h3><span class="mw-headline" id="Opening_the_gate">Opening the gate</span></h3>
<p>With our gate created and our keypad ready, all thats left now is to open the gate.
Having created custom events earlier for successfully and unsuccessfully verifying the code, this now becomes very easy to do.
All we do is add an event handler for our custom "success" event, and using the keypadID we defined earlier we can move the gate inside it:
</p>
<!-- PLAIN TEXT CODE FOR BOTS |addEventHandler("onKeypadVerificationSuccessful",root, function(keypadID) local gate = getElementByID(keypadID) if gate then local x = tonumber(getElementData(gate,"newPosX")) local y = tonumber(getElementData(gate,"newPosY")) local z = tonumber(getElementData(gate,"newPosZ")) moveObject(gate,1500,x,y,z) x = tonumber(getElementData(gate,"posX")) y = tonumber(getElementData(gate,"posY")) z = tonumber(getElementData(gate,"posZ")) setTimer(moveObject,5000,1,gate,1500,x,y,z) end end )|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><a href="AddEventHandler.html" class="kw2"><span class="kw2">addEventHandler</span></a><span class="br0">&#40;</span><span class="st0">&quot;onKeypadVerificationSuccessful&quot;</span>,root,
	<span class="co1">-- keypadID is sent back from the server</span>
	<span class="kw1">function</span><span class="br0">&#40;</span>keypadID<span class="br0">&#41;</span>
		<span class="co1">-- get the gate object (this is where the id=&quot;a51MainGateKeypadCode&quot; tag in the map file becomes useful)</span>
		<span class="kw1">local</span> gate <span class="sy0">=</span> <a href="GetElementByID.html" class="kw2"><span class="kw2">getElementByID</span></a><span class="br0">&#40;</span>keypadID<span class="br0">&#41;</span>
&#160;
		<span class="co1">-- if we found the object</span>
		<span class="kw1">if</span> gate <span class="kw1">then</span>
			<span class="co1">-- get the new position (as we defined in the map file)</span>
			<span class="kw1">local</span> x <span class="sy0">=</span> <span class="kw1">tonumber</span><span class="br0">&#40;</span><a href="GetElementData.html" class="kw2"><span class="kw2">getElementData</span></a><span class="br0">&#40;</span>gate,<span class="st0">&quot;newPosX&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
			<span class="kw1">local</span> y <span class="sy0">=</span> <span class="kw1">tonumber</span><span class="br0">&#40;</span><a href="GetElementData.html" class="kw2"><span class="kw2">getElementData</span></a><span class="br0">&#40;</span>gate,<span class="st0">&quot;newPosY&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
			<span class="kw1">local</span> z <span class="sy0">=</span> <span class="kw1">tonumber</span><span class="br0">&#40;</span><a href="GetElementData.html" class="kw2"><span class="kw2">getElementData</span></a><span class="br0">&#40;</span>gate,<span class="st0">&quot;newPosZ&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
&#160;
			<span class="co1">-- move the gate</span>
			<a href="MoveObject.html" class="kw2"><span class="kw2">moveObject</span></a><span class="br0">&#40;</span>gate,<span class="nu0">1500</span>,x,y,z<span class="br0">&#41;</span>
&#160;
			<span class="co1">-- get the original position</span>
			x <span class="sy0">=</span> <span class="kw1">tonumber</span><span class="br0">&#40;</span><a href="GetElementData.html" class="kw2"><span class="kw2">getElementData</span></a><span class="br0">&#40;</span>gate,<span class="st0">&quot;posX&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
			y <span class="sy0">=</span> <span class="kw1">tonumber</span><span class="br0">&#40;</span><a href="GetElementData.html" class="kw2"><span class="kw2">getElementData</span></a><span class="br0">&#40;</span>gate,<span class="st0">&quot;posY&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
			z <span class="sy0">=</span> <span class="kw1">tonumber</span><span class="br0">&#40;</span><a href="GetElementData.html" class="kw2"><span class="kw2">getElementData</span></a><span class="br0">&#40;</span>gate,<span class="st0">&quot;posZ&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>	
&#160;
			<span class="co1">-- set a timer to close the gate in 5 seconds</span>
			<a href="SetTimer.html" class="kw2"><span class="kw2">setTimer</span></a><span class="br0">&#40;</span><a href="MoveObject.html" class="kw2"><span class="kw2">moveObject</span></a>,<span class="nu0">5000</span>,<span class="nu0">1</span>,gate,<span class="nu0">1500</span>,x,y,z<span class="br0">&#41;</span>
		<span class="kw1">end</span>
	<span class="kw1">end</span>
<span class="br0">&#41;</span></pre></div></div>
<p>Note how by using the keypadID sent back from the server, we can use if statements and checks against the id to control any number of gates from the same function.
</p><p>You should now have a working example of a GUI Keypad controlling an A51 Gate.
</p><p>For further GUI tutorials, see <a href="Scripting_the_GUI_-_Tutorial_3.html" title="Scripting the GUI - Tutorial 3">Tutorial 3 (Scrolling News Feed)</a>
</p>
<!-- 
NewPP limit report
CPU time usage: 0.376 seconds
Real time usage: 0.398 seconds
Preprocessor visited node count: 184/1000000
Preprocessor generated node count: 360/1000000
Postexpand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key nrp_wiki_1_22_13-wiki_dev_:pcache:idhash:5024-0!*!0!!en!2!* and timestamp 20150826141846
 -->
</div><div class="printfooter">
Retrieved from "<a index.html?title=Scripting_the_GUI_-_Tutorial_2&amp;oldid=22284">/index.php?title=Scripting_the_GUI_-_Tutorial_2&amp;oldid=22284</a>"</div>
		<div id='catlinks' class='catlinks'><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="Special_Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="Category_GUI_Tutorials.html" title="Category:GUI Tutorials">GUI Tutorials</a></li></ul></div></div>		<!-- end content -->
				<div class="visualClear"></div>
	</div>
	</div>
		</div>
		<div id="column-one">
	<div id="p-cactions" class="portlet">
		<h5>Views</h5>
		<div class="pBody">
			<ul>
	
				 <li id="ca-nstab-main" class="selected"><a href="Scripting_the_GUI_-_Tutorial_2.html"Array>Page</a></li>
				 <li id="ca-talk" class="new"><a index.html?title=Talk:Scripting_the_GUI_-_Tutorial_2&amp;action=edit&amp;redlink=1"Array>Discussion</a></li>
				 <li id="ca-viewsource"><a index.html?title=Scripting_the_GUI_-_Tutorial_2&amp;action=edit"Array>View source</a></li>
				 <li id="ca-history"><a index.html?title=Scripting_the_GUI_-_Tutorial_2&amp;action=history"Array>History</a></li>			</ul>
		</div>
	</div>
	<div class="portlet" id="p-personal">
		<h5>Personal tools</h5>
		<div class="pBody">
			<ul>
				<li id="pt-anonuserpage"><a href="User_75.81.255.html"Array class="new">75.81.255.73</a></li>
				<li id="pt-anontalk"><a href="User_talk_75.81.255.html"Array class="new">Talk for this IP address</a></li>
				<li id="pt-anonlogin"><a index.html?title=Special:UserLogin&amp;returnto=Scripting+the+GUI+-+Tutorial+2"Array></a></li>
			</ul>
		</div>
	</div>
	
	<div class="portlet" id="p-logo">
		<a style="background-image: url();" href="Main_Page.html"Array></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
	<div class='generated-sidebar portlet' id='p-navigation'>
		<h5>Navigation</h5>
		<div class='pBody'>
			<ul>
				<li id="n-Home"><a href="Main_Page.html"Array>Home</a></li>
				<li id="n-How-you-can-help"><a href="How_you_can_help.html"Array>How you can help</a></li>
				<li id="n-recentchanges"><a href="Special_RecentChanges.html"Array>Recent changes</a></li>
				<li id="n-randompage"><a href="OnElementDataChange.html"Array>Random page</a></li>
			</ul>
		</div>
	</div>
	<div class='generated-sidebar portlet' id='p-reference'>
		<h5>reference</h5>
		<div class='pBody'>
			<ul>
				<li id="n-Client-Functions"><a href="Client_Scripting_Functions.html"Array>Client Functions</a></li>
				<li id="n-Client-Events"><a href="Client_Scripting_Events.html"Array>Client Events</a></li>
				<li id="n-Server-Functions"><a href="Server_Scripting_Functions.html"Array>Server Functions</a></li>
				<li id="n-Server-Events"><a href="Server_Scripting_Events.html"Array>Server Events</a></li>
				<li id="n-Useful-Functions"><a href="Useful_Functions.html"Array>Useful Functions</a></li>
				<li id="n-NRP-Classes"><a href="NRP_Classes.html"Array>NRP Classes</a></li>
				<li id="n-NRP-Elements"><a href="Element.html"Array>NRP Elements</a></li>
				<li id="n-Element-Tree"><a href="Element_tree.html"Array>Element Tree</a></li>
			</ul>
		</div>
	</div>
	<div id="p-search" class="portlet">
		
		<div id="searchBody" class="pBody">
			<form action="/index.php" id="searchform"><div>
				
				
				
				
			</div></form>
		</div>
	</div>
	<div class="portlet" id="p-tb">
		<h5>Tools</h5>
		<div class="pBody">
			<ul>
				<li id="t-whatlinkshere"><a href="Special_WhatLinksHere/Scripting_the_GUI_-_Tutorial_2.html"Array>What links here</a></li>
				<li id="t-recentchangeslinked"><a href="Special_RecentChangesLinked/Scripting_the_GUI_-_Tutorial_2.html"Array>Related changes</a></li>
<li id="t-specialpages"><a href="Special_SpecialPages.html"Array>Special pages</a></li>
				<li id="t-print"><a index.html?title=Scripting_the_GUI_-_Tutorial_2&amp;printable=yes" rel="alternate"Array>Printable version</a></li>				<li id="t-permalink"><a index.html?title=Scripting_the_GUI_-_Tutorial_2&amp;oldid=22284"Array>Permanent link</a></li>			</ul>
		</div>
	</div>
</div><!-- end of the left (by default at least) column -->
<div class="visualClear"></div>
			<div id="footer">
				<div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="../skins/common/images/poweredby_mediawiki_88x31.png" height="31" width="88" alt="Powered by MediaWiki" /></a></div>
				<div id="f-copyrightico"><a href="http://www.gnu.org/copyleft/fdl.html"><img src="../skins/common/images/gnu-fdl.png" alt="GNU Free Documentation License 1.2" width="88" height="31" /></a></div>
	<ul id="f-list">
					<li id="lastmod"> This page was last modified on 15 January 2010, at 01:29.</li>
					<li id="viewcount">This page has been accessed 8,593 times.</li>
					<li id="copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.2</a> unless otherwise noted.</li>
					<li id="privacy"><a href="Nexus_RP__Wiki_Privacy_policy.html" title="Nexus RP: Wiki:Privacy policy">Privacy policy</a></li>
					<li id="about"><a href="Nexus_RP__Wiki_About.html" title="Nexus RP: Wiki:About">About Nexus RP: Wiki</a></li>
					<li id="disclaimer"><a href="Nexus_RP__Wiki_General_disclaimer.html" title="Nexus RP: Wiki:General disclaimer">Disclaimers</a></li>
			</ul>
</div>
</div>
<script>/*<![CDATA[*/window.jQuery && jQuery.ready();/*]]>*/</script><script>if(window.mw){
mw.loader.state({"site":"loading","user":"ready","user.groups":"ready"});
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.action.view.postEdit","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest","ext.cite"],null,true);
}</script>
<script src="/load.php?debug=false&amp;lang=en&amp;modules=site&amp;only=scripts&amp;skin=nrpbook&amp;*"></script>
<!-- Served in 0.848 secs. --></body>
<!-- Mirrored from wiki.nexusrp.com/wiki/Scripting_the_GUI_-_Tutorial_2 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 27 Aug 2015 07:33:03 GMT -->
</html>
