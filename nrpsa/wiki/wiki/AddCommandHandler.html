<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
	
<!-- Mirrored from wiki.nexusrp.com/wiki/AddCommandHandler by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 27 Aug 2015 07:29:34 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<meta name="generator" content="MediaWiki 1.22.13" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="Nexus RP: Wiki (en)" />
<link rel="EditURI" type="application/rsd+xml" href="/api.php?action=rsd" />
<link rel="copyright" href="http://www.gnu.org/copyleft/fdl.html" />
<link rel="alternate" type="application/atom+xml" title="Nexus RP: Wiki Atom feed" index.html?title=Special:RecentChanges&amp;feed=atom" />		<title>AddCommandHandler - Nexus RP: Wiki</title>
		<link rel="stylesheet" href="/load.php?debug=false&amp;lang=en&amp;modules=ext.rtlcite%7Cmediawiki.legacy.commonPrint%2Cshared&amp;only=styles&amp;skin=nrpbook&amp;*" />
<link rel="stylesheet" href="../skins/nrpbook/main11b9.css?303" media="screen" />
<!--[if lt IE 5.5000]><link rel="stylesheet" href="/skins/nrpbook/IE50Fixes.css?303" media="screen" /><![endif]-->
<!--[if IE 5.5000]><link rel="stylesheet" href="/skins/nrpbook/IE55Fixes.css?303" media="screen" /><![endif]-->
<!--[if IE 6]><link rel="stylesheet" href="/skins/nrpbook/IE60Fixes.css?303" media="screen" /><![endif]-->
<!--[if IE 7]><link rel="stylesheet" href="/skins/nrpbook/IE70Fixes.css?303" media="screen" /><![endif]--><meta name="ResourceLoaderDynamicStyles" content="" />
<link rel="stylesheet" href="/load.php?debug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=nrpbook&amp;*" />
<style>a:lang(ar),a:lang(ckb),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: nrp_wiki_1_22_13-wiki_dev_:resourceloader:filter:minify-css:7:68ffccca97fd0532df6141dcbaf256b6 */</style>

		<!--[if lt IE 7]><script type="text/javascript" src="/skins/common/IEFixes.js?303"></script>
		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->

		<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"AddCommandHandler","wgTitle":"AddCommandHandler","wgCurRevisionId":33355,"wgRevisionId":33355,"wgArticleId":1493,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Server functions","Client functions"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransforNRPble":["",""],"wgDigitTransforNRPble":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"AddCommandHandler","wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[]});
}</script>
		<script type="text/javascript" src="../skins/common/wikibits11b9.js?303"><!-- wikibits js --></script>
		<!-- Head Scripts -->
<script src="/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=nrpbook&amp;*"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"AddCommandHandler","wgTitle":"AddCommandHandler","wgCurRevisionId":33355,"wgRevisionId":33355,"wgArticleId":1493,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Server functions","Client functions"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransforNRPble":["",""],"wgDigitTransforNRPble":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"AddCommandHandler","wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[]});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function(){mw.user.options.set({"ccmeonemails":0,"cols":80,"date":"default","diffonly":0,"disablemail":0,"disablesuggest":0,"editfont":"default","editondblclick":0,"editsection":1,"editsectiononrightclick":0,"enotifminoredits":0,"enotifrevealaddr":0,"enotifusertalkpages":1,"enotifwatchlistpages":0,"extendwatchlist":0,"fancysig":0,"forceeditsummary":0,"gender":"unknown","hideminor":0,"hidepatrolled":0,"imagesize":2,"justify":0,"math":1,"minordefault":0,"newpageshidepatrolled":0,"nocache":0,"noconvertlink":0,"norollbackdiff":0,"numberheadings":0,"previewonfirst":0,"previewontop":1,"rcdays":7,"rclimit":50,"rememberpassword":0,"rows":25,"searchlimit":20,"showhiddencats":0,"shownumberswatching":1,"showtoc":1,"showtoolbar":1,"skin":"nrpbook","stubthreshold":0,"thumbsize":2,"underline":2,"uselivepreview":0,"usenewrc":0,"vector-simplesearch":1,"watchcreations":0,"watchdefault":0,"watchdeletion":0,"watchlistdays":3,"watchlisthideanons":0,"watchlisthidebots":0,
"watchlisthideliu":0,"watchlisthideminor":0,"watchlisthideown":0,"watchlisthidepatrolled":0,"watchmoves":0,"wllimit":250,"useeditwarning":1,"prefershttps":1,"language":"en","variant-gan":"gan","variant-iu":"iu","variant-kk":"kk","variant-ku":"ku","variant-shi":"shi","variant-sr":"sr","variant-tg":"tg","variant-uz":"uz","variant-zh":"zh","searchNs0":true,"searchNs1":false,"searchNs2":false,"searchNs3":false,"searchNs4":false,"searchNs5":false,"searchNs6":false,"searchNs7":false,"searchNs8":false,"searchNs9":false,"searchNs10":false,"searchNs11":false,"searchNs12":false,"searchNs13":false,"searchNs14":false,"searchNs15":false,"searchNs100":false,"variant":"en"});},{},{});mw.loader.implement("user.tokens",function(){mw.user.tokens.set({"editToken":"+\\","patrolToken":false,"watchToken":false});},{},{});
/* cache key: nrp_wiki_1_22_13-wiki_dev_:resourceloader:filter:minify-js:7:925126ceab977200cdcc48193642dea0 */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax"]);
}</script><style type="text/css">/*<![CDATA[*/
.source-lua {line-height: normal;}
.source-lua li, .source-lua pre {
	line-height: normal; border: 0px none white;
}
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for lua
 * CSS class: source-lua, CSS id: 
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 * --------------------------------------
 */
.lua.source-lua .de1, .lua.source-lua .de2 {font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;font-family: monospace, monospace;}
.lua.source-lua  {font-family:monospace;}
.lua.source-lua .imp {font-weight: bold; color: red;}
.lua.source-lua li, .lua.source-lua .li1 {font-weight: normal; vertical-align:top;}
.lua.source-lua .ln {width:1px;text-align:right;margin:0;padding:0 2px;vertical-align:top;}
.lua.source-lua .li2 {font-weight: bold; vertical-align:top;}
.lua.source-lua .kw1 {color: #b1b100;}
.lua.source-lua .co1 {color: #808080; font-style: italic;}
.lua.source-lua .coMULTI {color: #808080; font-style: italic;}
.lua.source-lua .es0 {color: #000099; font-weight: bold;}
.lua.source-lua .br0 {color: #66cc66;}
.lua.source-lua .sy0 {color: #66cc66;}
.lua.source-lua .st0 {color: #00A600;}
.lua.source-lua .nu0 {color: #cc66cc;}
.lua.source-lua .me0 {color: #b1b100;}
.lua.source-lua .ln-xtra, .lua.source-lua li.ln-xtra, .lua.source-lua div.ln-xtra {background-color: #ffc;}
.lua.source-lua span.xtra { display:block; }

/*]]>*/
</style>	</head>
<body class="mediawiki ltr ns-0 ns-subject page-AddCommandHandler skin-nrpbook">
	<div id="globalWrapper">
		
		<div id="column-content">
	<div id="content">
		<a name="top" id="top"></a>
			<h1 id="firstHeading" class="firstHeading">AddCommandHandler</h1>
		<div id="bodyContent">
			<h3 id="siteSub">From Nexus RP: Wiki</h3>
			<div id="contentSub"></div>
									<div id="jump-to-nav">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>		<!-- start content -->
<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><p><script type='text/javascript'>setHeadingClass('both','Shared function');</script>
<script type='text/javascript'>makeTitleLowercaseFirstLetter();</script>
</p>
<div style="border: 1px solid #AFAFAF; border-right: 5px solid #AFAFAF; background: #FFFF99; float: right; width: 200px; padding: 5px; margin: 5px; margin-right: 0px;"><b>Note:</b>
It is strongly advised that you do not use the same name for your handler function as the command name, as this can lead to confusion if multiple handler functions are used. Use a name that describes your handler's purpose more specifically.</div>
<p>This function will attach a scripting function (handler) to a console command, so that whenever a player or administrator uses the command the function is called.
<b>Note:</b> You cannot use "list" or "test" as command name.
</p><p>Multiple command handlers can be attached to a single command, and they will be called in the order that the handlers were attached. Equally, multiple commands can be handled by a single function, and the <i>commandName</i> parameter used to decide the course of action.
</p><p>For users, a command is in the format:
</p><p><i>commandName</i> <i>argument1</i> <i>argument2</i>
</p><p>This can be triggered from the player's console or directly from the chat box by prefixing the message with a forward slash (<i>/</i>). For server side handlers, the server admin is also able to trigger these directly from the server's console in the same way as they are triggered from a player's console.
</p>
<h2><span class="mw-headline" id="Syntax">Syntax</span></h2>
<!-- BEGIN SECTION |1|server|Server|--><div class='serverHeader' onclick='expandSection(1);' style='cursor:pointer;'><div style='float:right;font-size: 0.75em;' id='sectionExpander1'>Click to collapse [-]</div>Server</div><div style='display:;' class='serverContent' id='section1'>
<!-- PLAIN TEXT CODE FOR BOTS |bool addCommandHandler ( string commandName, function handlerFunction, [bool restricted = false, bool caseSensitive = true] )|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><a href="Bool.html" class="kw3"><span class="kw3">bool</span></a> <a href="AddCommandHandler.html" class="kw6"><span class="kw6">addCommandHandler</span></a> <span class="br0">&#40;</span> <a href="String-3.html" class="kw3"><span class="kw3">string</span></a> commandName, <span class="kw1">function</span> handlerFunction, <span class="br0">&#91;</span><a href="Bool.html" class="kw3"><span class="kw3">bool</span></a> restricted <span class="sy0">=</span> <span class="kw1">false</span>, <a href="Bool.html" class="kw3"><span class="kw3">bool</span></a> caseSensitive <span class="sy0">=</span> <span class="kw1">true</span><span class="br0">&#93;</span> <span class="br0">&#41;</span></pre></div></div> 
<h3><span class="mw-headline" id="Required_Arguments">Required Arguments</span></h3>
<ul>
<li><b>commandName:</b> This is the name of the command you wish to attach a handler to. This is what must be typed into the console to trigger the function.
</li>
<li><b>handlerFunction:</b> This is the function that you want the command to trigger, which has to be defined before you add the handler. This function can take two parameters, playerSource and commandName, followed by as many parameters you expect after your command (see below). These are all optional.
</li>
</ul>
<h3><span class="mw-headline" id="Optional_Arguments">Optional Arguments</span></h3>
<p><i>NOTE:</i> When using optional arguments, you must supply all arguments before the one you wish to use. For more information on optional arguments, see <a href="Optional_Arguments.html" title="Optional Arguments">Optional Arguments</a>. 
</p>
<ul>
<li><b>restricted:</b> Specify whether or not this command should be restricted by default. Use this on commands that should be inaccessible to everyone as default except special users specified in the ACL (Access Control List). This is to make sure admin commands such as ie. 'punish' won't be available to everyone if a server administrator forgets masking it in ACL. Make sure to add the command to your ACL under the proper group for it to be usefull (i.e &lt;right name="command.killEveryone" access="true"&gt;&lt;/right&gt;). This argument defaults to false if nothing is specified.
</li>
</ul>
<ul>
<li><b>caseSensitive:</b> Specifies if the command handler will ignore the case for this command name.
</li>
</ul>
</div><!-- END SECTION |1|-->
<p><br />
</p>
<!-- BEGIN SECTION |2|client|Client|--><div class='clientHeader' onclick='expandSection(2);' style='cursor:pointer;'><div style='float:right;font-size: 0.75em;' id='sectionExpander2'>Click to collapse [-]</div>Client</div><div style='display:;' class='clientContent' id='section2'>
<!-- PLAIN TEXT CODE FOR BOTS |bool addCommandHandler ( string commandName, function handlerFunction, [bool caseSensitive = true] )|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><a href="Bool.html" class="kw3"><span class="kw3">bool</span></a> <a href="AddCommandHandler.html" class="kw6"><span class="kw6">addCommandHandler</span></a> <span class="br0">&#40;</span> <a href="String-3.html" class="kw3"><span class="kw3">string</span></a> commandName, <span class="kw1">function</span> handlerFunction, <span class="br0">&#91;</span><a href="Bool.html" class="kw3"><span class="kw3">bool</span></a> caseSensitive <span class="sy0">=</span> <span class="kw1">true</span><span class="br0">&#93;</span> <span class="br0">&#41;</span></pre></div></div> 
<h3><span class="mw-headline" id="Required_Arguments">Required Arguments</span></h3>
<ul>
<li><b>commandName:</b> This is the name of the command you wish to attach a handler to. This is what must be typed into the console to trigger the function.
</li>
<li><b>handlerFunction:</b> This is the function that you want the command to trigger, which has to be defined before you add the handler. This function can take two parameters, playerSource and commandName, followed by as many parameters you expect after your command (see below). These are all optional.
</li>
</ul>
<h3><span class="mw-headline" id="Optional_Arguments">Optional Arguments</span></h3>
<p><i>NOTE:</i> When using optional arguments, you must supply all arguments before the one you wish to use. For more information on optional arguments, see <a href="Optional_Arguments.html" title="Optional Arguments">Optional Arguments</a>. 
</p>
<ul>
<li><b>caseSensitive:</b> Specifies if the command handler will ignore the case for this command name.
</li>
</ul>
</div><!-- END SECTION |2|-->
<h4><span class="mw-headline" id="Handler_function_parameters">Handler function parameters</span></h4>
<p>These are the parameters for the handler function that is called when the command is used.
</p>
<!-- BEGIN SECTION |3|server|Server|--><div class='serverHeader' onclick='expandSection(3);' style='cursor:pointer;'><div style='float:right;font-size: 0.75em;' id='sectionExpander3'>Click to collapse [-]</div>Server</div><div style='display:;' class='serverContent' id='section3'>
<!-- PLAIN TEXT CODE FOR BOTS |player playerSource, string commandName, [string arg1, string arg2, ...]|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><a href="Player.html" class="kw3"><span class="kw3">player</span></a> playerSource, <a href="String-3.html" class="kw3"><span class="kw3">string</span></a> commandName, <span class="br0">&#91;</span><a href="String-3.html" class="kw3"><span class="kw3">string</span></a> arg1, <a href="String-3.html" class="kw3"><span class="kw3">string</span></a> arg2, ...<span class="br0">&#93;</span></pre></div></div>
<ul>
<li> <b>playerSource:</b> The player who triggered the command. If not triggered by a player (e.g. by admin), this will be <i>false</i>.
</li>
<li> <b>commandName:</b> The name of the command triggered. This is useful if multiple commands go through one function.
</li>
<li> <b>arg1, arg2, ...:</b> Each word after command name in the original command is passed here in a seperate variable. If there is no value for an argument, its variable will contain <a href="Nil.html" title="Nil">nil</a>. You can deal with a variable number of arguments using the vararg expression, as shown in <b>Server Example 2</b> below.
</li>
</ul>
</div><!-- END SECTION |3|-->
<!-- BEGIN SECTION |4|client|Client|--><div class='clientHeader' onclick='expandSection(4);' style='cursor:pointer;'><div style='float:right;font-size: 0.75em;' id='sectionExpander4'>Click to collapse [-]</div>Client</div><div style='display:;' class='clientContent' id='section4'>
<!-- PLAIN TEXT CODE FOR BOTS |string commandName, [string arg1, string arg2, ...]|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><a href="String-3.html" class="kw3"><span class="kw3">string</span></a> commandName, <span class="br0">&#91;</span><a href="String-3.html" class="kw3"><span class="kw3">string</span></a> arg1, <a href="String-3.html" class="kw3"><span class="kw3">string</span></a> arg2, ...<span class="br0">&#93;</span></pre></div></div>
<ul>
<li> <b>commandName:</b> The name of the command triggered. This is useful if multiple commands go through one function.
</li>
<li> <b>arg1, arg2, ...:</b> Each word after command name in the original command is passed here in a seperate variable. If there is no value for an argument, its variable will contain <a href="Nil.html" title="Nil">nil</a>. You can deal with a variable number of arguments using the vararg expression, as shown in <b>Server Example 2</b> below.
</li>
</ul>
</div><!-- END SECTION |4|-->
<h3><span class="mw-headline" id="Returns">Returns</span></h3>
<p>Returns <i>true</i> if the command handler was added successfully, <i>false</i> otherwise.
</p>
<h2><span class="mw-headline" id="Examples">Examples</span></h2>
<!-- BEGIN SECTION |5|server|Server|--><div class='serverHeader' onclick='expandSection(5);' style='cursor:pointer;'><div style='float:right;font-size: 0.75em;' id='sectionExpander5'>Click to collapse [-]</div>Server</div><div style='display:;' class='serverContent' id='section5'>
<p><b>Example 1:</b> This example defines a command handler for the command <i>createmarker</i>. This will create a red marker at the position of the player player who uses it.
</p>
<!-- PLAIN TEXT CODE FOR BOTS |function consoleCreateMarker ( playerSource ) if ( playerSource ) then local x, y, z = getElementPosition ( playerSource ) createMarker ( x, y, z, "checkpoint", 2, 255, 0, 0, 255 ) outputChatBox ( "You got a red marker", playerSource ) end end addCommandHandler ( "createmarker", consoleCreateMarker )|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><span class="co1">-- Define our function that will handle this command</span>
<span class="kw1">function</span> consoleCreateMarker <span class="br0">&#40;</span> playerSource <span class="br0">&#41;</span>
	<span class="co1">-- If a player triggered it (rather than the admin) then</span>
	<span class="kw1">if</span> <span class="br0">&#40;</span> playerSource <span class="br0">&#41;</span> <span class="kw1">then</span>
		<span class="co1">-- Get that player's position</span>
		<span class="kw1">local</span> x, y, z <span class="sy0">=</span> <a href="GetElementPosition.html" class="kw2"><span class="kw2">getElementPosition</span></a> <span class="br0">&#40;</span> playerSource <span class="br0">&#41;</span>
		<span class="co1">-- Create a size 2, red checkpoint marker at their position</span>
		<a href="CreateMarker.html" class="kw2"><span class="kw2">createMarker</span></a> <span class="br0">&#40;</span> x, y, z, <span class="st0">&quot;checkpoint&quot;</span>, <span class="nu0">2</span>, <span class="nu0">255</span>, <span class="nu0">0</span>, <span class="nu0">0</span>, <span class="nu0">255</span> <span class="br0">&#41;</span>
		<span class="co1">-- Output it in his chat box</span>
		<a href="OutputChatBox.html" class="kw6"><span class="kw6">outputChatBox</span></a> <span class="br0">&#40;</span> <span class="st0">&quot;You got a red marker&quot;</span>, playerSource <span class="br0">&#41;</span>
	<span class="kw1">end</span>
<span class="kw1">end</span>
<span class="co1">-- Attach the 'consoleCreateMarker' function to the &quot;createmarker&quot; command</span>
<a href="AddCommandHandler.html" class="kw6"><span class="kw6">addCommandHandler</span></a> <span class="br0">&#40;</span> <span class="st0">&quot;createmarker&quot;</span>, consoleCreateMarker <span class="br0">&#41;</span></pre></div></div>
</div><!-- END SECTION |5|-->
<!-- BEGIN SECTION |6|server|Server|--><div class='serverHeader' onclick='expandSection(6);' style='cursor:pointer;'><div style='float:right;font-size: 0.75em;' id='sectionExpander6'>Click to expand [+]</div>Server</div><div style='display:none;' class='serverContent' id='section6'>
<p><b>Example 2:</b> This example makes use of Lua's vararg expression to implement a <i>check_parameters</i> command to count the number of parameters passed, merge them all into a single string and output it. This is also shows you how you can use table.concat to merge all the passed arguments. This is particularly useful when you want to read in a sentence of text passed from the user. 
</p>
<!-- PLAIN TEXT CODE FOR BOTS |function consoleCheckParameters ( playerSource, commandName, ... ) if playerSource then local arg = {...} local parameterCount = #arg outputChatBox ( "Number of parameters: " .. parameterCount, playerSource ) local stringWithAllParameters = table.concat( arg, ", " ) outputChatBox ( "Parameters passed: " .. stringWithAllParameters, playerSource ) end end addCommandHandler ( "check_parameters", consoleCheckParameters )|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><span class="co1">-- Define our function that will handle this command (which can accept a variable number of arguments after commandName)</span>
<span class="kw1">function</span> consoleCheckParameters <span class="br0">&#40;</span> playerSource, commandName, ... <span class="br0">&#41;</span>
	<span class="co1">-- If a player, not an admin, triggered it,</span>
	<span class="kw1">if</span> playerSource <span class="kw1">then</span>
		<span class="kw1">local</span> arg <span class="sy0">=</span> <span class="br0">&#123;</span>...<span class="br0">&#125;</span>
		<span class="co1">-- Get the number of arguments in the arg table (arg table is the same as: {...})</span>
		<span class="kw1">local</span> parameterCount <span class="sy0">=</span> #arg
		<span class="co1">-- Output it to the player's chatbox</span>
		<a href="OutputChatBox.html" class="kw6"><span class="kw6">outputChatBox</span></a> <span class="br0">&#40;</span> <span class="st0">&quot;Number of parameters: &quot;</span> .. parameterCount, playerSource <span class="br0">&#41;</span>
		<span class="co1">-- Join them together in a single comma-separated string</span>
		<span class="kw1">local</span> stringWithAllParameters <span class="sy0">=</span> <span class="kw1"><a href="Table.html" class="kw3"><span class="kw3">table</span></a>.concat</span><span class="br0">&#40;</span> arg, <span class="st0">&quot;, &quot;</span> <span class="br0">&#41;</span>
		<span class="co1">-- Output this parameter list to the player's chatbox</span>
		<a href="OutputChatBox.html" class="kw6"><span class="kw6">outputChatBox</span></a> <span class="br0">&#40;</span> <span class="st0">&quot;Parameters passed: &quot;</span> .. stringWithAllParameters, playerSource <span class="br0">&#41;</span>
	<span class="kw1">end</span>
<span class="kw1">end</span>
<span class="co1">-- Attach the 'consoleCheckParameters' function to the &quot;check_parameters&quot; command</span>
<a href="AddCommandHandler.html" class="kw6"><span class="kw6">addCommandHandler</span></a> <span class="br0">&#40;</span> <span class="st0">&quot;check_parameters&quot;</span>, consoleCheckParameters <span class="br0">&#41;</span></pre></div></div>
</div><!-- END SECTION |6|-->
<!-- BEGIN SECTION |7|server|Server|--><div class='serverHeader' onclick='expandSection(7);' style='cursor:pointer;'><div style='float:right;font-size: 0.75em;' id='sectionExpander7'>Click to expand [+]</div>Server</div><div style='display:none;' class='serverContent' id='section7'>
<p><b>Example 3:</b> This example shows using a single function to handle multiple command handlers. This isn't advised for general usage, as it makes code harder to understand, but where multiple command handlers share some logic, it can be a useful way of reducing duplicated code. Generally, it would be preferable to put this shared logic in a separate function instead, as this gives you more control over the flow.
</p>
<!-- PLAIN TEXT CODE FOR BOTS |function moneyCmd(player, cmd, amount) if getElementData(player, "canUseMoneyFunctions") then if cmd == "givemoney" then amount = tonumber(amount) if amount then givePlayerMoney(player, amount) else outputChatBox("[usage] /givemoney [amount]", player) end else if cmd == "takemoney" then amount = tonumber(amount) if amount then takePlayerMoney(player, amount) else outputChatBox("[usage] /takemoney [amount]", player) end end else outputChatBox("You aren't able to use this command", player) end end addCommandHandler("givemoney", moneyCmd); addCommandHandler("takemoney", moneyCmd);|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><span class="co1">-- make the function</span>
<span class="kw1">function</span> moneyCmd<span class="br0">&#40;</span><a href="Player.html" class="kw3"><span class="kw3">player</span></a>, cmd, amount<span class="br0">&#41;</span>
    <span class="kw1">if</span> <a href="GetElementData.html" class="kw2"><span class="kw2">getElementData</span></a><span class="br0">&#40;</span><a href="Player.html" class="kw3"><span class="kw3">player</span></a>, <span class="st0">&quot;canUseMoneyFunctions&quot;</span><span class="br0">&#41;</span> <span class="kw1">then</span> <span class="co1">-- the shared logic</span>
        <span class="kw1">if</span> cmd <span class="sy0">==</span> <span class="st0">&quot;givemoney&quot;</span> <span class="kw1">then</span>
            amount  <span class="sy0">=</span> <span class="kw1">tonumber</span><span class="br0">&#40;</span>amount<span class="br0">&#41;</span>
            <span class="kw1">if</span> amount <span class="kw1">then</span>
                <a href="GivePlayerMoney.html" class="kw2"><span class="kw2">givePlayerMoney</span></a><span class="br0">&#40;</span><a href="Player.html" class="kw3"><span class="kw3">player</span></a>, amount<span class="br0">&#41;</span>
            <span class="kw1">else</span>
                <a href="OutputChatBox.html" class="kw6"><span class="kw6">outputChatBox</span></a><span class="br0">&#40;</span><span class="st0">&quot;[usage] /givemoney [amount]&quot;</span>, <a href="Player.html" class="kw3"><span class="kw3">player</span></a><span class="br0">&#41;</span>
            <span class="kw1">end</span>
        <span class="kw1">else</span> <span class="kw1">if</span> cmd <span class="sy0">==</span> <span class="st0">&quot;takemoney&quot;</span> <span class="kw1">then</span>
            amount <span class="sy0">=</span> <span class="kw1">tonumber</span><span class="br0">&#40;</span>amount<span class="br0">&#41;</span>
            <span class="kw1">if</span> amount <span class="kw1">then</span>
                <a href="TakePlayerMoney.html" class="kw2"><span class="kw2">takePlayerMoney</span></a><span class="br0">&#40;</span><a href="Player.html" class="kw3"><span class="kw3">player</span></a>, amount<span class="br0">&#41;</span>
            <span class="kw1">else</span>
                <a href="OutputChatBox.html" class="kw6"><span class="kw6">outputChatBox</span></a><span class="br0">&#40;</span><span class="st0">&quot;[usage] /takemoney [amount]&quot;</span>, <a href="Player.html" class="kw3"><span class="kw3">player</span></a><span class="br0">&#41;</span>
            <span class="kw1">end</span>
        <span class="kw1">end</span>
    <span class="kw1">else</span>
        <a href="OutputChatBox.html" class="kw6"><span class="kw6">outputChatBox</span></a><span class="br0">&#40;</span><span class="st0">&quot;You aren't able to use this command&quot;</span>, <a href="Player.html" class="kw3"><span class="kw3">player</span></a><span class="br0">&#41;</span>
    <span class="kw1">end</span>
<span class="kw1">end</span>
&#160;
<a href="AddCommandHandler.html" class="kw6"><span class="kw6">addCommandHandler</span></a><span class="br0">&#40;</span><span class="st0">&quot;givemoney&quot;</span>, moneyCmd<span class="br0">&#41;</span><span class="sy0">;</span>
<a href="AddCommandHandler.html" class="kw6"><span class="kw6">addCommandHandler</span></a><span class="br0">&#40;</span><span class="st0">&quot;takemoney&quot;</span>, moneyCmd<span class="br0">&#41;</span><span class="sy0">;</span></pre></div></div>
</div><!-- END SECTION |7|-->
<!-- BEGIN SECTION |8|client|Client|--><div class='clientHeader' onclick='expandSection(8);' style='cursor:pointer;'><div style='float:right;font-size: 0.75em;' id='sectionExpander8'>Click to expand [+]</div>Client</div><div style='display:none;' class='clientContent' id='section8'>
<p><b>Example 1:</b> This example warps the local player to a random nearby location (useful for when a player gets stuck somewhere).
</p>
<!-- PLAIN TEXT CODE FOR BOTS |function escapeMe () local x, y, z = getElementPosition ( localPlayer ) setElementPosition ( localPlayer, x+(math.random(-10,10)), y+(math.random(-10,10)), z+(math.random(1,15)) ) end addCommandHandler ( "escape", escapeMe ) --When player types "/escape" in chatbox or "escape" in console|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><span class="kw1">function</span> escapeMe <span class="br0">&#40;</span><span class="br0">&#41;</span>
	<span class="kw1">local</span> x, y, z <span class="sy0">=</span> <a href="GetElementPosition.html" class="kw2"><span class="kw2">getElementPosition</span></a> <span class="br0">&#40;</span> localPlayer <span class="br0">&#41;</span> <span class="co1">--Get player's position</span>
	<a href="SetElementPosition.html" class="kw2"><span class="kw2">setElementPosition</span></a> <span class="br0">&#40;</span> localPlayer, x+<span class="br0">&#40;</span><span class="kw1">math.random</span><span class="br0">&#40;</span>-<span class="nu0">10</span>,<span class="nu0">10</span><span class="br0">&#41;</span><span class="br0">&#41;</span>, y+<span class="br0">&#40;</span><span class="kw1">math.random</span><span class="br0">&#40;</span>-<span class="nu0">10</span>,<span class="nu0">10</span><span class="br0">&#41;</span><span class="br0">&#41;</span>, z+<span class="br0">&#40;</span><span class="kw1">math.random</span><span class="br0">&#40;</span><span class="nu0">1</span>,<span class="nu0">15</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#41;</span> <span class="co1">--Move a player randomly to a nearby location. X is current x + a number between -10, 10 and so on.</span>
<span class="kw1">end</span>    
<a href="AddCommandHandler.html" class="kw6"><span class="kw6">addCommandHandler</span></a> <span class="br0">&#40;</span> <span class="st0">&quot;escape&quot;</span>, escapeMe <span class="br0">&#41;</span> <span class="co1">--When player types &quot;/escape&quot; in chatbox or &quot;escape&quot; in console</span></pre></div></div>
</div><!-- END SECTION |8|-->
<h2><span class="mw-headline" id="See_Also">See Also</span></h2>
<ul>
<li><strong class="selflink">addCommandHandler</strong>
</li>
<li><a href="ExecuteCommandHandler.html" title="ExecuteCommandHandler">executeCommandHandler</a>
</li>
<li><a href="FromJSON.html" title="FromJSON">fromJSON</a>
</li>
<li><a href="GetFPSLimit.html" title="GetFPSLimit">getFPSLimit</a>
</li>
<li><a href="GetMaxPlayers.html" title="GetMaxPlayers">getMaxPlayers</a>
</li>
<li><a href="GetServerHttpPort.html" title="GetServerHttpPort">getServerHttpPort</a>
</li>
<li><a href="GetServerName.html" title="GetServerName">getServerName</a>
</li>
<li><a href="GetServerPassword.html" title="GetServerPassword">getServerPassword</a>
</li>
<li><a href="GetServerPort.html" title="GetServerPort">getServerPort</a>
</li>
<li><a href="GetVersion.html" title="GetVersion">getVersion</a>
</li>
<li><a href="IsGlitchEnabled.html" title="IsGlitchEnabled">isGlitchEnabled</a>
</li>
<li><a href="OutputChatBox.html" title="OutputChatBox">outputChatBox</a>
</li>
<li><a href="OutputConsole.html" title="OutputConsole">outputConsole</a>
</li>
<li><a href="OutputDebugString.html" title="OutputDebugString">outputDebugString</a>
</li>
<li><a href="OutputServerLog.html" title="OutputServerLog">outputServerLog</a>
</li>
<li><a href="RemoveCommandHandler.html" title="RemoveCommandHandler">removeCommandHandler</a>
</li>
<li><a href="SetFPSLimit.html" title="SetFPSLimit">setFPSLimit</a>
</li>
<li><a href="SetGlitchEnabled.html" title="SetGlitchEnabled">setGlitchEnabled</a>
</li>
<li><a href="SetMaxPlayers.html" title="SetMaxPlayers">setMaxPlayers</a>
</li>
<li><a href="SetServerPassword.html" title="SetServerPassword">setServerPassword</a>
</li>
<li><a href="ShowChat.html" title="ShowChat">showChat</a>
</li>
<li><a href="Shutdown.html" title="Shutdown">shutdown</a>
</li>
<li><a href="ToJSON.html" title="ToJSON">toJSON</a>
</li>
</ul>

<!-- 
NewPP limit report
CPU time usage: 0.202 seconds
Real time usage: 0.207 seconds
Preprocessor visited node count: 192/1000000
Preprocessor generated node count: 758/1000000
Post‐expand include size: 1795/2097152 bytes
Template argument size: 443/2097152 bytes
Highest expansion depth: 5/40
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key nrp_wiki_1_22_13-wiki_dev_:pcache:idhash:1493-0!*!0!!*!*!* and timestamp 20150826120601
 -->
</div><div class="printfooter">
Retrieved from "<a index.html?title=AddCommandHandler&amp;oldid=33355">/index.php?title=AddCommandHandler&amp;oldid=33355</a>"</div>
		<div id='catlinks' class='catlinks'><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="Special_Categories.html" title="Special:Categories">Categories</a>: <ul><li><a href="Category_Server_functions.html" title="Category:Server functions">Server functions</a></li><li><a href="Category_Client_functions.html" title="Category:Client functions">Client functions</a></li></ul></div></div>		<!-- end content -->
				<div class="visualClear"></div>
	</div>
	</div>
		</div>
		<div id="column-one">
	<div id="p-cactions" class="portlet">
		<h5>Views</h5>
		<div class="pBody">
			<ul>
	
				 <li id="ca-nstab-main" class="selected"><a href="AddCommandHandler.html"Array>Page</a></li>
				 <li id="ca-talk" class="new"><a index.html?title=Talk:AddCommandHandler&amp;action=edit&amp;redlink=1"Array>Discussion</a></li>
				 <li id="ca-viewsource"><a index.html?title=AddCommandHandler&amp;action=edit"Array>View source</a></li>
				 <li id="ca-history"><a index.html?title=AddCommandHandler&amp;action=history"Array>History</a></li>			</ul>
		</div>
	</div>
	<div class="portlet" id="p-personal">
		<h5>Personal tools</h5>
		<div class="pBody">
			<ul>
				<li id="pt-login"><a index.html?title=Special:UserLogin&amp;returnto=AddCommandHandler"Array></a></li>
			</ul>
		</div>
	</div>
	
	<div class="portlet" id="p-logo">
		<a style="background-image: url();" href="Main_Page.html"Array></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
	<div class='generated-sidebar portlet' id='p-navigation'>
		<h5>Navigation</h5>
		<div class='pBody'>
			<ul>
				<li id="n-Home"><a href="Main_Page.html"Array>Home</a></li>
				<li id="n-How-you-can-help"><a href="How_you_can_help.html"Array>How you can help</a></li>
				<li id="n-recentchanges"><a href="Special_RecentChanges.html"Array>Recent changes</a></li>
				<li id="n-randompage"><a href="OnElementDataChange.html"Array>Random page</a></li>
			</ul>
		</div>
	</div>
	<div class='generated-sidebar portlet' id='p-reference'>
		<h5>reference</h5>
		<div class='pBody'>
			<ul>
				<li id="n-Client-Functions"><a href="Client_Scripting_Functions.html"Array>Client Functions</a></li>
				<li id="n-Client-Events"><a href="Client_Scripting_Events.html"Array>Client Events</a></li>
				<li id="n-Server-Functions"><a href="Server_Scripting_Functions.html"Array>Server Functions</a></li>
				<li id="n-Server-Events"><a href="Server_Scripting_Events.html"Array>Server Events</a></li>
				<li id="n-Useful-Functions"><a href="Useful_Functions.html"Array>Useful Functions</a></li>
				<li id="n-NRP-Classes"><a href="NRP_Classes.html"Array>NRP Classes</a></li>
				<li id="n-NRP-Elements"><a href="Element.html"Array>NRP Elements</a></li>
				<li id="n-Element-Tree"><a href="Element_tree.html"Array>Element Tree</a></li>
			</ul>
		</div>
	</div>
	<div id="p-search" class="portlet">
		
		<div id="searchBody" class="pBody">
			<form action="/index.php" id="searchform"><div>
				
				
				
				
			</div></form>
		</div>
	</div>
	<div class="portlet" id="p-tb">
		<h5>Tools</h5>
		<div class="pBody">
			<ul>
				<li id="t-whatlinkshere"><a href="Special_WhatLinksHere/AddCommandHandler.html"Array>What links here</a></li>
				<li id="t-recentchangeslinked"><a href="Special_RecentChangesLinked/AddCommandHandler.html"Array>Related changes</a></li>
<li id="t-specialpages"><a href="Special_SpecialPages.html"Array>Special pages</a></li>
				<li id="t-print"><a index.html?title=AddCommandHandler&amp;printable=yes" rel="alternate"Array>Printable version</a></li>				<li id="t-permalink"><a index.html?title=AddCommandHandler&amp;oldid=33355"Array>Permanent link</a></li>			</ul>
		</div>
	</div>
</div><!-- end of the left (by default at least) column -->
<div class="visualClear"></div>
			<div id="footer">
				<div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="../skins/common/images/poweredby_mediawiki_88x31.png" height="31" width="88" alt="Powered by MediaWiki" /></a></div>
				<div id="f-copyrightico"><a href="http://www.gnu.org/copyleft/fdl.html"><img src="../skins/common/images/gnu-fdl.png" alt="GNU Free Documentation License 1.2" width="88" height="31" /></a></div>
	<ul id="f-list">
					<li id="lastmod"> This page was last modified on 11 September 2012, at 15:24.</li>
					<li id="viewcount">This page has been accessed 129,415 times.</li>
					<li id="copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.2</a> unless otherwise noted.</li>
					<li id="privacy"><a href="Nexus_RP__Wiki_Privacy_policy.html" title="Nexus RP: Wiki:Privacy policy">Privacy policy</a></li>
					<li id="about"><a href="Nexus_RP__Wiki_About.html" title="Nexus RP: Wiki:About">About Nexus RP: Wiki</a></li>
					<li id="disclaimer"><a href="Nexus_RP__Wiki_General_disclaimer.html" title="Nexus RP: Wiki:General disclaimer">Disclaimers</a></li>
			</ul>
</div>
</div>
<script>/*<![CDATA[*/window.jQuery && jQuery.ready();/*]]>*/</script><script>if(window.mw){
mw.loader.state({"site":"loading","user":"ready","user.groups":"ready"});
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.action.view.postEdit","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest","ext.cite"],null,true);
}</script>
<script src="/load.php?debug=false&amp;lang=en&amp;modules=site&amp;only=scripts&amp;skin=nrpbook&amp;*"></script>
<!-- Served in 0.038 secs. --></body>
<!-- Mirrored from wiki.nexusrp.com/wiki/AddCommandHandler by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 27 Aug 2015 07:29:34 GMT -->
</html>
