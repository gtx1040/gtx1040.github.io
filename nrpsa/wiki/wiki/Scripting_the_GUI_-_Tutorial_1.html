<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
	
<!-- Mirrored from wiki.nexusrp.com/wiki/Scripting_the_GUI_-_Tutorial_1 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 27 Aug 2015 07:33:03 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<meta name="generator" content="MediaWiki 1.22.13" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="Nexus RP: Wiki (en)" />
<link rel="EditURI" type="application/rsd+xml" href="/api.php?action=rsd" />
<link rel="copyright" href="http://www.gnu.org/copyleft/fdl.html" />
<link rel="alternate" type="application/atom+xml" title="Nexus RP: Wiki Atom feed" index.html?title=Special:RecentChanges&amp;feed=atom" />		<title>Scripting the GUI - Tutorial 1 - Nexus RP: Wiki</title>
		<link rel="stylesheet" href="/load.php?debug=false&amp;lang=en&amp;modules=ext.rtlcite%7Cmediawiki.legacy.commonPrint%2Cshared&amp;only=styles&amp;skin=nrpbook&amp;*" />
<link rel="stylesheet" href="../skins/nrpbook/main11b9.css?303" media="screen" />
<!--[if lt IE 5.5000]><link rel="stylesheet" href="/skins/nrpbook/IE50Fixes.css?303" media="screen" /><![endif]-->
<!--[if IE 5.5000]><link rel="stylesheet" href="/skins/nrpbook/IE55Fixes.css?303" media="screen" /><![endif]-->
<!--[if IE 6]><link rel="stylesheet" href="/skins/nrpbook/IE60Fixes.css?303" media="screen" /><![endif]-->
<!--[if IE 7]><link rel="stylesheet" href="/skins/nrpbook/IE70Fixes.css?303" media="screen" /><![endif]--><meta name="ResourceLoaderDynamicStyles" content="" />
<link rel="stylesheet" href="/load.php?debug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=nrpbook&amp;*" />
<style>a:lang(ar),a:lang(ckb),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: nrp_wiki_1_22_13-wiki_dev_:resourceloader:filter:minify-css:7:68ffccca97fd0532df6141dcbaf256b6 */</style>

		<!--[if lt IE 7]><script type="text/javascript" src="/skins/common/IEFixes.js?303"></script>
		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->

		<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Scripting_the_GUI_-_Tutorial_1","wgTitle":"Scripting the GUI - Tutorial 1","wgCurRevisionId":22259,"wgRevisionId":22259,"wgArticleId":5023,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["GUI Tutorials"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransforNRPble":["",""],"wgDigitTransforNRPble":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Scripting_the_GUI_-_Tutorial_1","wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[]});
}</script>
		<script type="text/javascript" src="../skins/common/wikibits11b9.js?303"><!-- wikibits js --></script>
		<!-- Head Scripts -->
<script src="/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=nrpbook&amp;*"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Scripting_the_GUI_-_Tutorial_1","wgTitle":"Scripting the GUI - Tutorial 1","wgCurRevisionId":22259,"wgRevisionId":22259,"wgArticleId":5023,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["GUI Tutorials"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransforNRPble":["",""],"wgDigitTransforNRPble":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Scripting_the_GUI_-_Tutorial_1","wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[]});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function(){mw.user.options.set({"ccmeonemails":0,"cols":80,"date":"default","diffonly":0,"disablemail":0,"disablesuggest":0,"editfont":"default","editondblclick":0,"editsection":1,"editsectiononrightclick":0,"enotifminoredits":0,"enotifrevealaddr":0,"enotifusertalkpages":1,"enotifwatchlistpages":0,"extendwatchlist":0,"fancysig":0,"forceeditsummary":0,"gender":"unknown","hideminor":0,"hidepatrolled":0,"imagesize":2,"justify":0,"math":1,"minordefault":0,"newpageshidepatrolled":0,"nocache":0,"noconvertlink":0,"norollbackdiff":0,"numberheadings":0,"previewonfirst":0,"previewontop":1,"rcdays":7,"rclimit":50,"rememberpassword":0,"rows":25,"searchlimit":20,"showhiddencats":0,"shownumberswatching":1,"showtoc":1,"showtoolbar":1,"skin":"nrpbook","stubthreshold":0,"thumbsize":2,"underline":2,"uselivepreview":0,"usenewrc":0,"vector-simplesearch":1,"watchcreations":0,"watchdefault":0,"watchdeletion":0,"watchlistdays":3,"watchlisthideanons":0,"watchlisthidebots":0,
"watchlisthideliu":0,"watchlisthideminor":0,"watchlisthideown":0,"watchlisthidepatrolled":0,"watchmoves":0,"wllimit":250,"useeditwarning":1,"prefershttps":1,"language":"en","variant-gan":"gan","variant-iu":"iu","variant-kk":"kk","variant-ku":"ku","variant-shi":"shi","variant-sr":"sr","variant-tg":"tg","variant-uz":"uz","variant-zh":"zh","searchNs0":true,"searchNs1":false,"searchNs2":false,"searchNs3":false,"searchNs4":false,"searchNs5":false,"searchNs6":false,"searchNs7":false,"searchNs8":false,"searchNs9":false,"searchNs10":false,"searchNs11":false,"searchNs12":false,"searchNs13":false,"searchNs14":false,"searchNs15":false,"searchNs100":false,"variant":"en"});},{},{});mw.loader.implement("user.tokens",function(){mw.user.tokens.set({"editToken":"+\\","patrolToken":false,"watchToken":false});},{},{});
/* cache key: nrp_wiki_1_22_13-wiki_dev_:resourceloader:filter:minify-js:7:925126ceab977200cdcc48193642dea0 */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax"]);
}</script><style type="text/css">/*<![CDATA[*/
.source-lua {line-height: normal;}
.source-lua li, .source-lua pre {
	line-height: normal; border: 0px none white;
}
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for lua
 * CSS class: source-lua, CSS id: 
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 * --------------------------------------
 */
.lua.source-lua .de1, .lua.source-lua .de2 {font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;font-family: monospace, monospace;}
.lua.source-lua  {font-family:monospace;}
.lua.source-lua .imp {font-weight: bold; color: red;}
.lua.source-lua li, .lua.source-lua .li1 {font-weight: normal; vertical-align:top;}
.lua.source-lua .ln {width:1px;text-align:right;margin:0;padding:0 2px;vertical-align:top;}
.lua.source-lua .li2 {font-weight: bold; vertical-align:top;}
.lua.source-lua .kw1 {color: #b1b100;}
.lua.source-lua .co1 {color: #808080; font-style: italic;}
.lua.source-lua .coMULTI {color: #808080; font-style: italic;}
.lua.source-lua .es0 {color: #000099; font-weight: bold;}
.lua.source-lua .br0 {color: #66cc66;}
.lua.source-lua .sy0 {color: #66cc66;}
.lua.source-lua .st0 {color: #00A600;}
.lua.source-lua .nu0 {color: #cc66cc;}
.lua.source-lua .me0 {color: #b1b100;}
.lua.source-lua .ln-xtra, .lua.source-lua li.ln-xtra, .lua.source-lua div.ln-xtra {background-color: #ffc;}
.lua.source-lua span.xtra { display:block; }

/*]]>*/
</style>	</head>
<body class="mediawiki ltr ns-0 ns-subject page-Scripting_the_GUI_-_Tutorial_1 skin-nrpbook">
	<div id="globalWrapper">
		
		<div id="column-content">
	<div id="content">
		<a name="top" id="top"></a>
			<h1 id="firstHeading" class="firstHeading">Scripting the GUI - Tutorial 1</h1>
		<div id="bodyContent">
			<h3 id="siteSub">From Nexus RP: Wiki</h3>
			<div id="contentSub"></div>
									<div id="jump-to-nav">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>		<!-- start content -->
<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><p><b>Scripting the Gui - Tutorial 1 (Gridlists)</b>
</p><p>In this tutorial we will explore the use of gridlists in creating a vehicle selection screen, with optional clientside vehicle xml data reading.
</p><p><b>Note that this tutorial assumes you are familiar with all the content covered in the <a href="Introduction_to_Scripting_GUI.html" title="Introduction to Scripting GUI" class="mw-redirect">Previous tutorial</a>.</b>
</p><p><br />
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Setting_up_the_Vehicle_Selection"><span class="tocnumber">1</span> <span class="toctext">Setting up the Vehicle Selection</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Creating_the_GUI"><span class="tocnumber">1.1</span> <span class="toctext">Creating the GUI</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#Showing_the_GUI"><span class="tocnumber">1.2</span> <span class="toctext">Showing the GUI</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Populating_the_Gridlist_from_a_table"><span class="tocnumber">1.3</span> <span class="toctext">Populating the Gridlist from a table</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Managing_the_click"><span class="tocnumber">1.4</span> <span class="toctext">Managing the click</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Creating_the_Vehicle"><span class="tocnumber">1.5</span> <span class="toctext">Creating the Vehicle</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-7"><a href="#Expanding_the_code"><span class="tocnumber">2</span> <span class="toctext">Expanding the code</span></a>
<ul>
<li class="toclevel-2 tocsection-8"><a href="#Importing_Data"><span class="tocnumber">2.1</span> <span class="toctext">Importing Data</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#Collapsing.2FExpanding_the_Gridlist"><span class="tocnumber">2.2</span> <span class="toctext">Collapsing/Expanding the Gridlist</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#Loading_the_data"><span class="tocnumber">2.3</span> <span class="toctext">Loading the data</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#Managing_the_double_click"><span class="tocnumber">2.4</span> <span class="toctext">Managing the double click</span></a></li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="Setting_up_the_Vehicle_Selection">Setting up the Vehicle Selection</span></h2>
<h3><span class="mw-headline" id="Creating_the_GUI">Creating the GUI</span></h3>
<p>To begin, open up a clientside lua file (if you have been following the <a href="Scripting_Introduction.html" title="Scripting Introduction">Scripting Introduction</a>, this is gui.lua) to work with.
</p><p>In this file, we will start writing our function for creating the GUI.
As covered in the <a href="Introduction_to_Scripting_GUI.html" title="Introduction to Scripting GUI" class="mw-redirect">Previous tutorial</a>, there are 2 value type options available when creating gui: <b>relative</b> and <b>absolute</b>.
</p><p>For the purposes of this tutorial, we will be using <b>absolute</b> values.
</p><p><br />
This will create a simple GUI with a window, gridlist and button:
</p>
<!-- PLAIN TEXT CODE FOR BOTS |function createVehicleSelection() local sWidth, sHeight = guiGetScreenSize() local Width,Height = 376,259 local X = (sWidth/2) - (Width/2) local Y = (sHeight/2) - (Height/2) windowVehicleSelection = guiCreateWindow(X,Y,Width,Height,"Vehicle Selection Window",false) gridlistVehicleSelection = guiCreateGridList(10,26,357,192,false,windowVehicleSelection) guiGridListAddColumn(gridlistVehicleSelection,"Vehicle",0.2) guiGridListAddColumn(gridlistVehicleSelection,"Type",0.2) guiGridListSetColumnWidth(gridlistVehicleSelection,1,0.4,true) guiGridListSetColumnWidth(gridlistVehicleSelection,2,0.5,true) buttonCreate = guiCreateButton(121,227,120,20,"Create",false,windowVehicleSelection) addEventHandler("onClientGUIClick",buttonCreate,createVehicleHandler,false) guiSetVisible(windowVehicleSelection,false) populateGridlist() end|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><span class="kw1">function</span> createVehicleSelection<span class="br0">&#40;</span><span class="br0">&#41;</span>
	<span class="co1">-- get the screen width and height</span>
	<span class="kw1">local</span> sWidth, sHeight <span class="sy0">=</span> <a href="GuiGetScreenSize.html" class="kw4"><span class="kw4">guiGetScreenSize</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span>
&#160;
	<span class="co1">-- use some simple maths to position the window in the centre of the screen</span>
	<span class="kw1">local</span> Width,Height <span class="sy0">=</span> <span class="nu0">376</span>,<span class="nu0">259</span>
	<span class="kw1">local</span> X <span class="sy0">=</span> <span class="br0">&#40;</span>sWidth<span class="sy0">/</span><span class="nu0">2</span><span class="br0">&#41;</span> - <span class="br0">&#40;</span>Width<span class="sy0">/</span><span class="nu0">2</span><span class="br0">&#41;</span>
	<span class="kw1">local</span> Y <span class="sy0">=</span> <span class="br0">&#40;</span>sHeight<span class="sy0">/</span><span class="nu0">2</span><span class="br0">&#41;</span> - <span class="br0">&#40;</span>Height<span class="sy0">/</span><span class="nu0">2</span><span class="br0">&#41;</span>
	windowVehicleSelection <span class="sy0">=</span> <a href="GuiCreateWindow.html" class="kw4"><span class="kw4">guiCreateWindow</span></a><span class="br0">&#40;</span>X,Y,Width,Height,<span class="st0">&quot;Vehicle Selection Window&quot;</span>,<span class="kw1">false</span><span class="br0">&#41;</span>
&#160;
	gridlistVehicleSelection <span class="sy0">=</span> <a href="GuiCreateGridList.html" class="kw4"><span class="kw4">guiCreateGridList</span></a><span class="br0">&#40;</span><span class="nu0">10</span>,<span class="nu0">26</span>,<span class="nu0">357</span>,<span class="nu0">192</span>,<span class="kw1">false</span>,windowVehicleSelection<span class="br0">&#41;</span>
	<span class="co1">-- add a &quot;Vehicle&quot; and a &quot;Type&quot; collumn to the gridlist</span>
	<a href="GuiGridListAddColumn.html" class="kw4"><span class="kw4">guiGridListAddColumn</span></a><span class="br0">&#40;</span>gridlistVehicleSelection,<span class="st0">&quot;Vehicle&quot;</span>,<span class="nu0">0.2</span><span class="br0">&#41;</span>
	<a href="GuiGridListAddColumn.html" class="kw4"><span class="kw4">guiGridListAddColumn</span></a><span class="br0">&#40;</span>gridlistVehicleSelection,<span class="st0">&quot;Type&quot;</span>,<span class="nu0">0.2</span><span class="br0">&#41;</span>
&#160;
	<span class="co1">-- set the default width of the columns to roughly half the size of the gridlist (each)</span>
	<a href="GuiGridListSetColumnWidth.html" class="kw4"><span class="kw4">guiGridListSetColumnWidth</span></a><span class="br0">&#40;</span>gridlistVehicleSelection,<span class="nu0">1</span>,<span class="nu0">0.4</span>,<span class="kw1">true</span><span class="br0">&#41;</span>
	<a href="GuiGridListSetColumnWidth.html" class="kw4"><span class="kw4">guiGridListSetColumnWidth</span></a><span class="br0">&#40;</span>gridlistVehicleSelection,<span class="nu0">2</span>,<span class="nu0">0.5</span>,<span class="kw1">true</span><span class="br0">&#41;</span>
&#160;
	buttonCreate <span class="sy0">=</span> <a href="GuiCreateButton.html" class="kw4"><span class="kw4">guiCreateButton</span></a><span class="br0">&#40;</span><span class="nu0">121</span>,<span class="nu0">227</span>,<span class="nu0">120</span>,<span class="nu0">20</span>,<span class="st0">&quot;Create&quot;</span>,<span class="kw1">false</span>,windowVehicleSelection<span class="br0">&#41;</span>
&#160;
	<span class="co1">-- add the event handler for when the button is clicked</span>
	<a href="AddEventHandler.html" class="kw2"><span class="kw2">addEventHandler</span></a><span class="br0">&#40;</span><span class="st0">&quot;onClientGUIClick&quot;</span>,buttonCreate,createVehicleHandler,<span class="kw1">false</span><span class="br0">&#41;</span>
&#160;
	<span class="co1">-- hide the GUI</span>
	<a href="GuiSetVisible.html" class="kw4"><span class="kw4">guiSetVisible</span></a><span class="br0">&#40;</span>windowVehicleSelection,<span class="kw1">false</span><span class="br0">&#41;</span>
&#160;
	<span class="co1">-- this will add all the vehicle options onto the gridlist, it is explained later in this tutorial</span>
	populateGridlist<span class="br0">&#40;</span><span class="br0">&#41;</span>
<span class="kw1">end</span></pre></div></div>
<p>We now also need to call this function somewhere, otherwise the GUI will never be created.
As in previous tutorials, to do this we can use <a href="OnClientResourceStart.html" title="OnClientResourceStart">onClientResourceStart</a>.
</p>
<!-- PLAIN TEXT CODE FOR BOTS |addEventHandler("onClientResourceStart",getResourceRootElement(getThisResource()), function() createVehicleSelection() end )|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><span class="co1">-- when the resource is started, create the GUI and hide it</span>
<a href="AddEventHandler.html" class="kw2"><span class="kw2">addEventHandler</span></a><span class="br0">&#40;</span><span class="st0">&quot;onClientResourceStart&quot;</span>,<a href="GetResourceRootElement.html" class="kw2"><span class="kw2">getResourceRootElement</span></a><span class="br0">&#40;</span><a href="GetThisResource.html" class="kw2"><span class="kw2">getThisResource</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>,
	<span class="kw1">function</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
		createVehicleSelection<span class="br0">&#40;</span><span class="br0">&#41;</span>
	<span class="kw1">end</span>
<span class="br0">&#41;</span></pre></div></div>
<p><br />
</p>
<h3><span class="mw-headline" id="Showing_the_GUI">Showing the GUI</span></h3>
<p>Unlike in previous tutorials, we want players to be able to open this window whenever they chose, not when the resource starts. 
So, we can add a <a href="AddCommandHandler.html" title="AddCommandHandler">Command</a> to do this.
</p>
<!-- PLAIN TEXT CODE FOR BOTS |function showVehicleSelection() if not guiGetVisible(windowVehicleSelection) then guiSetVisible(windowVehicleSelection,true) showCursor(true,true) end end addCommandHandler("vehicleselection",showVehicleSelection)|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><span class="co1">-- create the function that will show the window</span>
<span class="kw1">function</span> showVehicleSelection<span class="br0">&#40;</span><span class="br0">&#41;</span>
	<span class="co1">-- if the window isnt visible, show it</span>
	<span class="kw1">if</span> <span class="kw1">not</span> <a href="GuiGetVisible.html" class="kw4"><span class="kw4">guiGetVisible</span></a><span class="br0">&#40;</span>windowVehicleSelection<span class="br0">&#41;</span> <span class="kw1">then</span>
		<a href="GuiSetVisible.html" class="kw4"><span class="kw4">guiSetVisible</span></a><span class="br0">&#40;</span>windowVehicleSelection,<span class="kw1">true</span><span class="br0">&#41;</span>
&#160;
		<a href="ShowCursor.html" class="kw2"><span class="kw2">showCursor</span></a><span class="br0">&#40;</span><span class="kw1">true</span>,<span class="kw1">true</span><span class="br0">&#41;</span>
	<span class="kw1">end</span>
<span class="kw1">end</span>
&#160;
<span class="co1">-- add the command /vehicleselection and set it to call the showVehicleSelection function</span>
<a href="AddCommandHandler.html" class="kw6"><span class="kw6">addCommandHandler</span></a><span class="br0">&#40;</span><span class="st0">&quot;vehicleselection&quot;</span>,showVehicleSelection<span class="br0">&#41;</span></pre></div></div>
<h3><span class="mw-headline" id="Populating_the_Gridlist_from_a_table">Populating the Gridlist from a table</span></h3>
<p>Now that we have our basic GUI created, we need to fill the gridlist with all of our vehicles.
</p><p>To begin with, we will do this using a simple clientside table. 
Later in the tutorial, we will explore expanding this method to use .xml files for storing information.
To begin, we must create a small table containing a selection of vehicles that we can spawn.
</p><p>The table contains vehicles in the format ["description"] = vehicle_id&#160;:
</p>
<!-- PLAIN TEXT CODE FOR BOTS |local vehicleSelectionTable = { ["Sparrow"] = 469, ["Stuntplane"] = 513, ["BF-400"] = 581, ["Freeway"] = 463, ["Speeder"] = 452, ["Jester"] = 559, ["Sabre"] = 475, ["Police Ranger"] = 599, ["Utility Van"] = 552, ["Tug"] = 583 }|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><span class="co1">-- create the table and fill it with a selection of vehicle ids and names</span>
<span class="kw1">local</span> vehicleSelectionTable <span class="sy0">=</span> <span class="br0">&#123;</span>
	<span class="br0">&#91;</span><span class="st0">&quot;Sparrow&quot;</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="nu0">469</span>,
	<span class="br0">&#91;</span><span class="st0">&quot;Stuntplane&quot;</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="nu0">513</span>,
	<span class="br0">&#91;</span><span class="st0">&quot;BF-400&quot;</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="nu0">581</span>,
	<span class="br0">&#91;</span><span class="st0">&quot;Freeway&quot;</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="nu0">463</span>,
	<span class="br0">&#91;</span><span class="st0">&quot;Speeder&quot;</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="nu0">452</span>,
	<span class="br0">&#91;</span><span class="st0">&quot;Jester&quot;</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="nu0">559</span>,
	<span class="br0">&#91;</span><span class="st0">&quot;Sabre&quot;</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="nu0">475</span>,
	<span class="br0">&#91;</span><span class="st0">&quot;Police Ranger&quot;</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="nu0">599</span>,
	<span class="br0">&#91;</span><span class="st0">&quot;Utility Van&quot;</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="nu0">552</span>,
	<span class="br0">&#91;</span><span class="st0">&quot;Tug&quot;</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="nu0">583</span>
<span class="br0">&#125;</span></pre></div></div>
<p>Place this code at the very top of your file (it does not need to be inside a function).
</p><p>Next, we can write our "populateGridlist" function which will fill the Gridlist with all the vehicles in the table.
To do this we simply need to loop through all the values in the table, adding each one to the gridlist as we go.
We will also set hidden data using <a href="GuiGridListSetItemData.html" title="GuiGridListSetItemData">guiGridListSetItemData</a> to store the vehicle id:
</p>
<!-- PLAIN TEXT CODE FOR BOTS |function populateGridlist() for name,vehicle in pairs(vehicleSelectionTable) do local row = guiGridListAddRow(gridlistVehicleSelection) guiGridListSetItemText(gridlistVehicleSelection,row,1,name,false,false) guiGridListSetItemText(gridlistVehicleSelection,row,2,getVehicleType(vehicle),false,false) guiGridListSetItemData(gridlistVehicleSelection,row,1,tostring(vehicle)) end end|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><span class="kw1">function</span> populateGridlist<span class="br0">&#40;</span><span class="br0">&#41;</span>
	<span class="co1">-- loop through the table</span>
	<span class="kw1">for</span> name,<a href="Vehicle.html" class="kw3"><span class="kw3">vehicle</span></a> <span class="kw1">in</span> <span class="kw1">pairs</span><span class="br0">&#40;</span>vehicleSelectionTable<span class="br0">&#41;</span> <span class="kw1">do</span>
		<span class="co1">-- add a new row to the gridlist</span>
		<span class="kw1">local</span> row <span class="sy0">=</span> <a href="GuiGridListAddRow.html" class="kw4"><span class="kw4">guiGridListAddRow</span></a><span class="br0">&#40;</span>gridlistVehicleSelection<span class="br0">&#41;</span>
&#160;
		<span class="co1">-- set the text in the first column to the vehicle name</span>
		<a href="GuiGridListSetItemText.html" class="kw4"><span class="kw4">guiGridListSetItemText</span></a><span class="br0">&#40;</span>gridlistVehicleSelection,row,<span class="nu0">1</span>,name,<span class="kw1">false</span>,<span class="kw1">false</span><span class="br0">&#41;</span>
		<span class="co1">-- set the text in the second column to the vehicle type</span>
		<a href="GuiGridListSetItemText.html" class="kw4"><span class="kw4">guiGridListSetItemText</span></a><span class="br0">&#40;</span>gridlistVehicleSelection,row,<span class="nu0">2</span>,<a href="GetVehicleType.html" class="kw2"><span class="kw2">getVehicleType</span></a><span class="br0">&#40;</span><a href="Vehicle.html" class="kw3"><span class="kw3">vehicle</span></a><span class="br0">&#41;</span>,<span class="kw1">false</span>,<span class="kw1">false</span><span class="br0">&#41;</span>
&#160;
		<span class="co1">-- set the data for gridlist slot as the vehicle id</span>
		<a href="GuiGridListSetItemData.html" class="kw4"><span class="kw4">guiGridListSetItemData</span></a><span class="br0">&#40;</span>gridlistVehicleSelection,row,<span class="nu0">1</span>,<span class="kw1">tostring</span><span class="br0">&#40;</span><a href="Vehicle.html" class="kw3"><span class="kw3">vehicle</span></a><span class="br0">&#41;</span><span class="br0">&#41;</span>
	<span class="kw1">end</span>
<span class="kw1">end</span></pre></div></div> 
<h3><span class="mw-headline" id="Managing_the_click">Managing the click</span></h3>
<p>Now that we have our GUI completed, we need to be able to catch any clicks made on the "create" button.
We have attached the <a href="OnClientGUIClick.html" title="OnClientGUIClick">onClientGUIClick</a> event to buttonCreate already, so now we need to write the function that it calls.
In this function we do some basic error checking, such as making sure a vehicle has been selected in the list. 
We can then use some maths to find a position infront of the player and send the server this information to spawn the vehicle (using <a href="TriggerServerEvent.html" title="TriggerServerEvent">triggerServerEvent</a>) 
</p>
<!-- PLAIN TEXT CODE FOR BOTS |function createVehicleHandler(button,state) if button == "left" and state == "up" then local row,col = guiGridListGetSelectedItem(gridlistVehicleSelection) if row and col and row ~= -1 and col ~= -1 then local selected = guiGridListGetItemData(gridlistVehicleSelection,row,col) selected = tonumber(selected) local rotz = getPedRotation(getLocalPlayer()) local x,y,z = getElementPosition(getLocalPlayer()) x = x + ( math.cos ( math.rad ( rotz+90 ) ) * 3) y = y + ( math.sin ( math.rad ( rotz+90 ) ) * 3) if selected and x and y and z then triggerServerEvent("createVehicleFromGUI",getRootElement(),selected,x,y,z) guiSetVisible(windowVehicleSelection,false) showCursor(false,false) else outputChatBox("Invalid arguments.") end else outputChatBox("Please select a vehicle.") end end end|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><span class="kw1">function</span> createVehicleHandler<span class="br0">&#40;</span>button,state<span class="br0">&#41;</span>
	<span class="kw1">if</span> button <span class="sy0">==</span> <span class="st0">&quot;left&quot;</span> <span class="kw1">and</span> state <span class="sy0">==</span> <span class="st0">&quot;up&quot;</span> <span class="kw1">then</span>
		<span class="co1">-- get the selected item in the gridlist</span>
		<span class="kw1">local</span> row,col <span class="sy0">=</span> <a href="GuiGridListGetSelectedItem.html" class="kw4"><span class="kw4">guiGridListGetSelectedItem</span></a><span class="br0">&#40;</span>gridlistVehicleSelection<span class="br0">&#41;</span>
&#160;
		<span class="co1">-- if something is selected</span>
		<span class="kw1">if</span> row <span class="kw1">and</span> col <span class="kw1">and</span> row ~<span class="sy0">=</span> -<span class="nu0">1</span> <span class="kw1">and</span> col ~<span class="sy0">=</span> -<span class="nu0">1</span> <span class="kw1">then</span>
			<span class="co1">-- get the vehicle id data from the gridlist that is selected</span>
			<span class="kw1">local</span> selected <span class="sy0">=</span> <a href="GuiGridListGetItemData.html" class="kw4"><span class="kw4">guiGridListGetItemData</span></a><span class="br0">&#40;</span>gridlistVehicleSelection,row,col<span class="br0">&#41;</span>
&#160;
			<span class="co1">-- make sure the vehicle id is a number not a string</span>
			selected <span class="sy0">=</span> <span class="kw1">tonumber</span><span class="br0">&#40;</span>selected<span class="br0">&#41;</span>
&#160;
			<span class="co1">-- get the players position and rotation</span>
			<span class="kw1">local</span> rotz <span class="sy0">=</span> <a href="GetPedRotation.html" class="kw2"><span class="kw2">getPedRotation</span></a><span class="br0">&#40;</span><a href="GetLocalPlayer.html" class="kw4"><span class="kw4">getLocalPlayer</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
			<span class="kw1">local</span> x,y,z <span class="sy0">=</span> <a href="GetElementPosition.html" class="kw2"><span class="kw2">getElementPosition</span></a><span class="br0">&#40;</span><a href="GetLocalPlayer.html" class="kw4"><span class="kw4">getLocalPlayer</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
			<span class="co1">-- find the position directly infront of the player</span>
			x <span class="sy0">=</span> x + <span class="br0">&#40;</span> <span class="kw1">math.cos</span> <span class="br0">&#40;</span> <span class="kw1">math.rad</span> <span class="br0">&#40;</span> rotz+<span class="nu0">90</span> <span class="br0">&#41;</span> <span class="br0">&#41;</span> <span class="sy0">*</span> <span class="nu0">3</span><span class="br0">&#41;</span>
			y <span class="sy0">=</span> y + <span class="br0">&#40;</span> <span class="kw1">math.sin</span> <span class="br0">&#40;</span> <span class="kw1">math.rad</span> <span class="br0">&#40;</span> rotz+<span class="nu0">90</span> <span class="br0">&#41;</span> <span class="br0">&#41;</span> <span class="sy0">*</span> <span class="nu0">3</span><span class="br0">&#41;</span>
&#160;
			<span class="kw1">if</span> selected <span class="kw1">and</span> x <span class="kw1">and</span> y <span class="kw1">and</span> z <span class="kw1">then</span>
				<span class="co1">-- trigger the server</span>
				<a href="TriggerServerEvent.html" class="kw4"><span class="kw4">triggerServerEvent</span></a><span class="br0">&#40;</span><span class="st0">&quot;createVehicleFromGUI&quot;</span>,<a href="GetRootElement.html" class="kw2"><span class="kw2">getRootElement</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span>,selected,x,y,z<span class="br0">&#41;</span>
&#160;
				<span class="co1">-- hide the gui and the cursor</span>
				<a href="GuiSetVisible.html" class="kw4"><span class="kw4">guiSetVisible</span></a><span class="br0">&#40;</span>windowVehicleSelection,<span class="kw1">false</span><span class="br0">&#41;</span>
				<a href="ShowCursor.html" class="kw2"><span class="kw2">showCursor</span></a><span class="br0">&#40;</span><span class="kw1">false</span>,<span class="kw1">false</span><span class="br0">&#41;</span>
			<span class="kw1">else</span>
				<a href="OutputChatBox.html" class="kw6"><span class="kw6">outputChatBox</span></a><span class="br0">&#40;</span><span class="st0">&quot;Invalid arguments.&quot;</span><span class="br0">&#41;</span>
			<span class="kw1">end</span>
		<span class="kw1">else</span>
			<span class="co1">-- otherwise, output a message to the player</span>
			<a href="OutputChatBox.html" class="kw6"><span class="kw6">outputChatBox</span></a><span class="br0">&#40;</span><span class="st0">&quot;Please select a vehicle.&quot;</span><span class="br0">&#41;</span>
		<span class="kw1">end</span>
	<span class="kw1">end</span>
<span class="kw1">end</span></pre></div></div>
<h3><span class="mw-headline" id="Creating_the_Vehicle">Creating the Vehicle</span></h3>
<p>At this point we now have all the code needed on the client side, so open up a serverside .lua file to work with. 
</p><p>On the server side, we will first of all need to define the custom event that we triggered before from the client. This can be done using <a href="AddEvent.html" title="AddEvent">addEvent</a> and <a href="AddEventHandler.html" title="AddEventHandler">addEventHandler</a>.
Finally we will need a small function for creating the vehicle:
</p>
<!-- PLAIN TEXT CODE FOR BOTS |function createMyVehicle(vehicleid,x,y,z) if vehicleid and x and y and z then createVehicle(vehicleid,x,y,z) end end addEvent("createVehicleFromGUI",true) addEventHandler("createVehicleFromGUI",root,createMyVehicle)|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><span class="kw1">function</span> createMyVehicle<span class="br0">&#40;</span>vehicleid,x,y,z<span class="br0">&#41;</span>
	<span class="co1">-- check all the arguments exist</span>
	<span class="kw1">if</span> vehicleid <span class="kw1">and</span> x <span class="kw1">and</span> y <span class="kw1">and</span> z <span class="kw1">then</span>
		<a href="CreateVehicle.html" class="kw2"><span class="kw2">createVehicle</span></a><span class="br0">&#40;</span>vehicleid,x,y,z<span class="br0">&#41;</span>
	<span class="kw1">end</span>
<span class="kw1">end</span>
&#160;
<a href="AddEvent.html" class="kw2"><span class="kw2">addEvent</span></a><span class="br0">&#40;</span><span class="st0">&quot;createVehicleFromGUI&quot;</span>,<span class="kw1">true</span><span class="br0">&#41;</span>
<a href="AddEventHandler.html" class="kw2"><span class="kw2">addEventHandler</span></a><span class="br0">&#40;</span><span class="st0">&quot;createVehicleFromGUI&quot;</span>,root,createMyVehicle<span class="br0">&#41;</span></pre></div></div>
<p>Note the use of the "root" variable. This is an NRP variable containing the root element; every resource has one.
</p><p>This completes the first section of the tutorial. You should now have a basic, working vehicle spawn script.
</p><p>In the second section, we will cover collapsible gridlist data and clientside xml file reading.
</p><p><br />
</p>
<h2><span class="mw-headline" id="Expanding_the_code">Expanding the code</span></h2>
<p>This section will detail several ways to improve upon the code you now have.
</p>
<h3><span class="mw-headline" id="Importing_Data">Importing Data</span></h3>
<p>One big improvement over the previously mentioned method is to use external files to store the vehicle information, allowing us to much more quickly and easily manage large amounts of data.
For this tutorial, we will use a clientside xml file to hold the information.
</p><p>First of all you will need to create your xml file, so navigate to your resources directory and create a new file named vehicles.xml:
</p><p><i>For the purpose of this example, we will include only a small fraction of the total vehicles, however the file can easily be expanded to include them all.</i>
</p><p>If you are unsure of xml data structures, you can browse the <a href="Server_Scripting_Functions.html#XML_functions" title="Server Scripting Functions"> NRP xml functions</a> for help.
</p>
<!-- PLAIN TEXT CODE FOR BOTS |<root> <group type="Bikes"> <vehicle id="581" name="BF-400"/> <vehicle id="463" name="Freeway"/> <vehicle id="481" name="BMX"/> </group> <group type="Boats"> <vehicle id="472" name="Coastguard"/> <vehicle id="452" name="Speeder"/> </group> <group type="Helicopters"> <vehicle id="487" name="Maverick"/> <vehicle id="469" name="Sparrow"/> </group> <group type="Planes"> <vehicle id="593" name="Dodo"/> <vehicle id="513" name="Stuntplane"/> </group> <group type="Sports Cars"> <vehicle id="565" name="Flash"/> <vehicle id="559" name="Jester"/> <vehicle id="477" name="ZR-350"/> </group> <group type="2-Door"> <vehicle id="474" name="Hermes"/> <vehicle id="475" name="Sabre"/> </group> <group type="Emergency"> <vehicle id="416" name="Ambulance"/> <vehicle id="599" name="Police ranger"/> </group> <group type="Industrial"> <vehicle id="573" name="Dune"/> <vehicle id="552" name="Utility van"/> </group> <group type="Misc"> <vehicle id="457" name="Caddy"/> <vehicle id="583" name="Tug"/> </group> </root>|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><span class="sy0">&lt;</span>root<span class="sy0">&gt;</span>
	<span class="sy0">&lt;</span>group <span class="kw1">type</span><span class="sy0">=</span><span class="st0">&quot;Bikes&quot;</span><span class="sy0">&gt;</span>
		<span class="sy0">&lt;</span><a href="Vehicle.html" class="kw3"><span class="kw3">vehicle</span></a> id<span class="sy0">=</span><span class="st0">&quot;581&quot;</span> name<span class="sy0">=</span><span class="st0">&quot;BF-400&quot;</span><span class="sy0">/&gt;</span>
		<span class="sy0">&lt;</span><a href="Vehicle.html" class="kw3"><span class="kw3">vehicle</span></a> id<span class="sy0">=</span><span class="st0">&quot;463&quot;</span> name<span class="sy0">=</span><span class="st0">&quot;Freeway&quot;</span><span class="sy0">/&gt;</span>
		<span class="sy0">&lt;</span><a href="Vehicle.html" class="kw3"><span class="kw3">vehicle</span></a> id<span class="sy0">=</span><span class="st0">&quot;481&quot;</span> name<span class="sy0">=</span><span class="st0">&quot;BMX&quot;</span><span class="sy0">/&gt;</span>
	<span class="sy0">&lt;/</span>group<span class="sy0">&gt;</span>
	<span class="sy0">&lt;</span>group <span class="kw1">type</span><span class="sy0">=</span><span class="st0">&quot;Boats&quot;</span><span class="sy0">&gt;</span>
		<span class="sy0">&lt;</span><a href="Vehicle.html" class="kw3"><span class="kw3">vehicle</span></a> id<span class="sy0">=</span><span class="st0">&quot;472&quot;</span> name<span class="sy0">=</span><span class="st0">&quot;Coastguard&quot;</span><span class="sy0">/&gt;</span>
		<span class="sy0">&lt;</span><a href="Vehicle.html" class="kw3"><span class="kw3">vehicle</span></a> id<span class="sy0">=</span><span class="st0">&quot;452&quot;</span> name<span class="sy0">=</span><span class="st0">&quot;Speeder&quot;</span><span class="sy0">/&gt;</span>
	<span class="sy0">&lt;/</span>group<span class="sy0">&gt;</span>
	<span class="sy0">&lt;</span>group <span class="kw1">type</span><span class="sy0">=</span><span class="st0">&quot;Helicopters&quot;</span><span class="sy0">&gt;</span>
		<span class="sy0">&lt;</span><a href="Vehicle.html" class="kw3"><span class="kw3">vehicle</span></a> id<span class="sy0">=</span><span class="st0">&quot;487&quot;</span> name<span class="sy0">=</span><span class="st0">&quot;Maverick&quot;</span><span class="sy0">/&gt;</span>
		<span class="sy0">&lt;</span><a href="Vehicle.html" class="kw3"><span class="kw3">vehicle</span></a> id<span class="sy0">=</span><span class="st0">&quot;469&quot;</span> name<span class="sy0">=</span><span class="st0">&quot;Sparrow&quot;</span><span class="sy0">/&gt;</span>	
	<span class="sy0">&lt;/</span>group<span class="sy0">&gt;</span>
	<span class="sy0">&lt;</span>group <span class="kw1">type</span><span class="sy0">=</span><span class="st0">&quot;Planes&quot;</span><span class="sy0">&gt;</span>
		<span class="sy0">&lt;</span><a href="Vehicle.html" class="kw3"><span class="kw3">vehicle</span></a> id<span class="sy0">=</span><span class="st0">&quot;593&quot;</span> name<span class="sy0">=</span><span class="st0">&quot;Dodo&quot;</span><span class="sy0">/&gt;</span>
		<span class="sy0">&lt;</span><a href="Vehicle.html" class="kw3"><span class="kw3">vehicle</span></a> id<span class="sy0">=</span><span class="st0">&quot;513&quot;</span> name<span class="sy0">=</span><span class="st0">&quot;Stuntplane&quot;</span><span class="sy0">/&gt;</span>	
	<span class="sy0">&lt;/</span>group<span class="sy0">&gt;</span>
	<span class="sy0">&lt;</span>group <span class="kw1">type</span><span class="sy0">=</span><span class="st0">&quot;Sports Cars&quot;</span><span class="sy0">&gt;</span>
		<span class="sy0">&lt;</span><a href="Vehicle.html" class="kw3"><span class="kw3">vehicle</span></a> id<span class="sy0">=</span><span class="st0">&quot;565&quot;</span> name<span class="sy0">=</span><span class="st0">&quot;Flash&quot;</span><span class="sy0">/&gt;</span>
		<span class="sy0">&lt;</span><a href="Vehicle.html" class="kw3"><span class="kw3">vehicle</span></a> id<span class="sy0">=</span><span class="st0">&quot;559&quot;</span> name<span class="sy0">=</span><span class="st0">&quot;Jester&quot;</span><span class="sy0">/&gt;</span>
		<span class="sy0">&lt;</span><a href="Vehicle.html" class="kw3"><span class="kw3">vehicle</span></a> id<span class="sy0">=</span><span class="st0">&quot;477&quot;</span> name<span class="sy0">=</span><span class="st0">&quot;ZR-350&quot;</span><span class="sy0">/&gt;</span>	
	<span class="sy0">&lt;/</span>group<span class="sy0">&gt;</span>
	<span class="sy0">&lt;</span>group <span class="kw1">type</span><span class="sy0">=</span><span class="st0">&quot;2-Door&quot;</span><span class="sy0">&gt;</span>
		<span class="sy0">&lt;</span><a href="Vehicle.html" class="kw3"><span class="kw3">vehicle</span></a> id<span class="sy0">=</span><span class="st0">&quot;474&quot;</span> name<span class="sy0">=</span><span class="st0">&quot;Hermes&quot;</span><span class="sy0">/&gt;</span>
		<span class="sy0">&lt;</span><a href="Vehicle.html" class="kw3"><span class="kw3">vehicle</span></a> id<span class="sy0">=</span><span class="st0">&quot;475&quot;</span> name<span class="sy0">=</span><span class="st0">&quot;Sabre&quot;</span><span class="sy0">/&gt;</span>
	<span class="sy0">&lt;/</span>group<span class="sy0">&gt;</span>
	<span class="sy0">&lt;</span>group <span class="kw1">type</span><span class="sy0">=</span><span class="st0">&quot;Emergency&quot;</span><span class="sy0">&gt;</span>
		<span class="sy0">&lt;</span><a href="Vehicle.html" class="kw3"><span class="kw3">vehicle</span></a> id<span class="sy0">=</span><span class="st0">&quot;416&quot;</span> name<span class="sy0">=</span><span class="st0">&quot;Ambulance&quot;</span><span class="sy0">/&gt;</span>
		<span class="sy0">&lt;</span><a href="Vehicle.html" class="kw3"><span class="kw3">vehicle</span></a> id<span class="sy0">=</span><span class="st0">&quot;599&quot;</span> name<span class="sy0">=</span><span class="st0">&quot;Police ranger&quot;</span><span class="sy0">/&gt;</span>
	<span class="sy0">&lt;/</span>group<span class="sy0">&gt;</span>
	<span class="sy0">&lt;</span>group <span class="kw1">type</span><span class="sy0">=</span><span class="st0">&quot;Industrial&quot;</span><span class="sy0">&gt;</span>
		<span class="sy0">&lt;</span><a href="Vehicle.html" class="kw3"><span class="kw3">vehicle</span></a> id<span class="sy0">=</span><span class="st0">&quot;573&quot;</span> name<span class="sy0">=</span><span class="st0">&quot;Dune&quot;</span><span class="sy0">/&gt;</span>
		<span class="sy0">&lt;</span><a href="Vehicle.html" class="kw3"><span class="kw3">vehicle</span></a> id<span class="sy0">=</span><span class="st0">&quot;552&quot;</span> name<span class="sy0">=</span><span class="st0">&quot;Utility van&quot;</span><span class="sy0">/&gt;</span>	
	<span class="sy0">&lt;/</span>group<span class="sy0">&gt;</span>
	<span class="sy0">&lt;</span>group <span class="kw1">type</span><span class="sy0">=</span><span class="st0">&quot;Misc&quot;</span><span class="sy0">&gt;</span>
		<span class="sy0">&lt;</span><a href="Vehicle.html" class="kw3"><span class="kw3">vehicle</span></a> id<span class="sy0">=</span><span class="st0">&quot;457&quot;</span> name<span class="sy0">=</span><span class="st0">&quot;Caddy&quot;</span><span class="sy0">/&gt;</span>
		<span class="sy0">&lt;</span><a href="Vehicle.html" class="kw3"><span class="kw3">vehicle</span></a> id<span class="sy0">=</span><span class="st0">&quot;583&quot;</span> name<span class="sy0">=</span><span class="st0">&quot;Tug&quot;</span><span class="sy0">/&gt;</span>
	<span class="sy0">&lt;/</span>group<span class="sy0">&gt;</span>
<span class="sy0">&lt;/</span>root<span class="sy0">&gt;</span></pre></div></div>
<p>Once you have created your file, do not forget to add it to the meta.xml of your resource with the appropriate client tag.
</p><p>Note the group "type" tag. This is an arbitrary description of the vehicles contained within the group and can be renamed or added as any text.
Similarly, the vehicle "name" tag is also just a textual description of the vehicle and does not need to be the exact vehicle name.
</p><p>Now that we have the data, we can import it into the game and display it in the GUI.
<b>If you are following on from the first section of this tutorial, this new code will replace what is inside your existing 'populateGridlist' function.</b>
First, we need to load the file:
</p>
<!-- PLAIN TEXT CODE FOR BOTS |function populateGridlist() local rootnode = xmlLoadFile("vehicles.xml") if rootnode then xmlUnloadFile(rootnode) end end|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><span class="kw1">function</span> populateGridlist<span class="br0">&#40;</span><span class="br0">&#41;</span>
	<span class="co1">-- load the file and save the root node value it returns</span>
	<span class="kw1">local</span> rootnode <span class="sy0">=</span> <a href="XmlLoadFile.html" class="kw2"><span class="kw2">xmlLoadFile</span></a><span class="br0">&#40;</span><span class="st0">&quot;vehicles.xml&quot;</span><span class="br0">&#41;</span>
&#160;
	<span class="co1">-- check that the file exists and has been correctly loaded</span>
	<span class="kw1">if</span> rootnode <span class="kw1">then</span>		
		<span class="co1">-- unload the xml file</span>
		<a href="XmlUnloadFile.html" class="kw2"><span class="kw2">xmlUnloadFile</span></a><span class="br0">&#40;</span>rootnode<span class="br0">&#41;</span>
	<span class="kw1">end</span>
<span class="kw1">end</span></pre></div></div>
<p>Always make sure you unload any files once you are finished using them.
</p><p><br />
We can now start collecting the data from the file and entering it into our gridlist.
We can do this by looping through the xml data (in a similar manner to looping through the vehicle table earlier in this tutorial) and adding each entry into the list.
</p>
<!-- PLAIN TEXT CODE FOR BOTS |function populateGridlist() local rootnode = xmlLoadFile("vehicles.xml") if rootnode then for _,group in ipairs(xmlNodeGetChildren(rootnode)) do local row = guiGridListAddRow(gridlistVehicleSelection) local name = xmlNodeGetAttribute(group,"type") guiGridListSetItemText(gridlistVehicleSelection,row,1,name,true,false) for _,vehicle in ipairs(xmlNodeGetChildren(group)) do row = guiGridListAddRow(gridlistVehicleSelection) name = xmlNodeGetAttribute(vehicle,"name") local id = xmlNodeGetAttribute(vehicle,"id") guiGridListSetItemText(gridlistVehicleSelection,row,1,name,false,false) guiGridListSetItemText(gridlistVehicleSelection,row,2,getVehicleType(tonumber(id)),false,false) guiGridListSetItemData(gridlistVehicleSelection,row,1,tostring(id)) end end xmlUnloadFile(rootnode) end end|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><span class="kw1">function</span> populateGridlist<span class="br0">&#40;</span><span class="br0">&#41;</span>
	<span class="kw1">local</span> rootnode <span class="sy0">=</span> <a href="XmlLoadFile.html" class="kw2"><span class="kw2">xmlLoadFile</span></a><span class="br0">&#40;</span><span class="st0">&quot;vehicles.xml&quot;</span><span class="br0">&#41;</span>
&#160;
	<span class="kw1">if</span> rootnode <span class="kw1">then</span>		
		<span class="co1">-- first, we find every &quot;group&quot; node (they are direct children of the root)</span>
		<span class="kw1">for</span> _,group <span class="kw1">in</span> <span class="kw1">ipairs</span><span class="br0">&#40;</span><a href="XmlNodeGetChildren.html" class="kw2"><span class="kw2">xmlNodeGetChildren</span></a><span class="br0">&#40;</span>rootnode<span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="kw1">do</span>
			<span class="co1">-- add a new row to the gridlist</span>
			<span class="kw1">local</span> row <span class="sy0">=</span> <a href="GuiGridListAddRow.html" class="kw4"><span class="kw4">guiGridListAddRow</span></a><span class="br0">&#40;</span>gridlistVehicleSelection<span class="br0">&#41;</span>
&#160;
			<span class="co1">-- get the group name</span>
			<span class="kw1">local</span> name <span class="sy0">=</span> <a href="XmlNodeGetAttribute.html" class="kw2"><span class="kw2">xmlNodeGetAttribute</span></a><span class="br0">&#40;</span>group,<span class="st0">&quot;type&quot;</span><span class="br0">&#41;</span>
&#160;
			<span class="co1">-- set the text in the first column to the group type and indicate it is a section ('true')</span>
			<span class="co1">-- (sections on gridlists show up in bold and cannot be clicked)</span>
			<a href="GuiGridListSetItemText.html" class="kw4"><span class="kw4">guiGridListSetItemText</span></a><span class="br0">&#40;</span>gridlistVehicleSelection,row,<span class="nu0">1</span>,name,<span class="kw1">true</span>,<span class="kw1">false</span><span class="br0">&#41;</span>			
&#160;
			<span class="co1">-- then, for every group that we find, loop all of its children (the vehicle nodes)</span>
			<span class="co1">-- and add them into the gridlist</span>
			<span class="kw1">for</span> _,<a href="Vehicle.html" class="kw3"><span class="kw3">vehicle</span></a> <span class="kw1">in</span> <span class="kw1">ipairs</span><span class="br0">&#40;</span><a href="XmlNodeGetChildren.html" class="kw2"><span class="kw2">xmlNodeGetChildren</span></a><span class="br0">&#40;</span>group<span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="kw1">do</span>
				<span class="co1">-- add a new row to the gridlist</span>
				row <span class="sy0">=</span> <a href="GuiGridListAddRow.html" class="kw4"><span class="kw4">guiGridListAddRow</span></a><span class="br0">&#40;</span>gridlistVehicleSelection<span class="br0">&#41;</span>
&#160;
				<span class="co1">-- get the vehicle name and id</span>
				name <span class="sy0">=</span> <a href="XmlNodeGetAttribute.html" class="kw2"><span class="kw2">xmlNodeGetAttribute</span></a><span class="br0">&#40;</span><a href="Vehicle.html" class="kw3"><span class="kw3">vehicle</span></a>,<span class="st0">&quot;name&quot;</span><span class="br0">&#41;</span>
				<span class="kw1">local</span> id <span class="sy0">=</span> <a href="XmlNodeGetAttribute.html" class="kw2"><span class="kw2">xmlNodeGetAttribute</span></a><span class="br0">&#40;</span><a href="Vehicle.html" class="kw3"><span class="kw3">vehicle</span></a>,<span class="st0">&quot;id&quot;</span><span class="br0">&#41;</span>
&#160;
				<span class="co1">-- set the text in the first column to the vehicle name</span>
				<a href="GuiGridListSetItemText.html" class="kw4"><span class="kw4">guiGridListSetItemText</span></a><span class="br0">&#40;</span>gridlistVehicleSelection,row,<span class="nu0">1</span>,name,<span class="kw1">false</span>,<span class="kw1">false</span><span class="br0">&#41;</span>
				<span class="co1">-- set the text in the second column to the vehicle type</span>
				<a href="GuiGridListSetItemText.html" class="kw4"><span class="kw4">guiGridListSetItemText</span></a><span class="br0">&#40;</span>gridlistVehicleSelection,row,<span class="nu0">2</span>,<a href="GetVehicleType.html" class="kw2"><span class="kw2">getVehicleType</span></a><span class="br0">&#40;</span><span class="kw1">tonumber</span><span class="br0">&#40;</span>id<span class="br0">&#41;</span><span class="br0">&#41;</span>,<span class="kw1">false</span>,<span class="kw1">false</span><span class="br0">&#41;</span>		
&#160;
				<span class="co1">-- finally, set the vehicle id as data so we can access it later</span>
				<a href="GuiGridListSetItemData.html" class="kw4"><span class="kw4">guiGridListSetItemData</span></a><span class="br0">&#40;</span>gridlistVehicleSelection,row,<span class="nu0">1</span>,<span class="kw1">tostring</span><span class="br0">&#40;</span>id<span class="br0">&#41;</span><span class="br0">&#41;</span>
			<span class="kw1">end</span>
		<span class="kw1">end</span>	
&#160;
		<span class="co1">-- unload the xml file now that we are finished</span>
		<a href="XmlUnloadFile.html" class="kw2"><span class="kw2">xmlUnloadFile</span></a><span class="br0">&#40;</span>rootnode<span class="br0">&#41;</span>
	<span class="kw1">end</span>
<span class="kw1">end</span></pre></div></div>
<p>Note the use of for loops in the code with <a href="XmlNodeGetChildren.html" title="XmlNodeGetChildren">xmlNodeGetChildren</a>. This saves us a lot of time and effort as we do not have to manually code each group and vehicle into the list.
</p><p>You should now have a fully working vehicle selection menu, reading all of its data from a clientside xml file.
Next, we will examine how to generate the appearance of collapsing and expanding sections in a gridlist.
</p>
<h3><span class="mw-headline" id="Collapsing.2FExpanding_the_Gridlist">Collapsing/Expanding the Gridlist</span></h3>
<p>Allowing sections of the gridlist to be collapsed or expanded gives much more control over the visible content to the user.
This frees up space on the screen and makes the whole menu much more comfortable to use.
</p>
<h3><span class="mw-headline" id="Loading_the_data">Loading the data</span></h3>
<p>To be able to achieve this effect (as it is not a natural feature of gridlists) we will need to load the vehicle information into a table (from the xml file), rather than directly including it all in the gridlist.
<b>If you are following on from a previous section of this tutorial, this new code will replace what is inside your existing 'populateGridlist' function.</b>
</p><p>This works in much the same way the previous xml loading example does, only this time instead of saving the data into the gridlist, we save it into a table entry instead.
We also set the custom data "header" on the gridlist slots to denote which gridlist entries are our "group" entries and which are vehicles.
</p>
<!-- PLAIN TEXT CODE FOR BOTS |function populateGridlist() local rootnode = xmlLoadFile("vehicles.xml") vehicleTable = {} if rootnode then for _,group in ipairs(xmlNodeGetChildren(rootnode)) do local row = guiGridListAddRow(gridlistVehicleSelection) local name = xmlNodeGetAttribute(group,"type") guiGridListSetItemText(gridlistVehicleSelection,row,1,name,false,false) vehicleTable[name] = {} guiGridListSetItemData(gridlistVehicleSelection,row,1,"header") for _,vehicle in ipairs(xmlNodeGetChildren(group)) do local vname = xmlNodeGetAttribute(vehicle,"name") local id = xmlNodeGetAttribute(vehicle,"id") table.insert(vehicleTable[name],{id,vname}) end end setElementData(gridlistVehicleSelection,"expanded","none") xmlUnloadFile(rootnode) end end|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><span class="kw1">function</span> populateGridlist<span class="br0">&#40;</span><span class="br0">&#41;</span>
	<span class="kw1">local</span> rootnode <span class="sy0">=</span> <a href="XmlLoadFile.html" class="kw2"><span class="kw2">xmlLoadFile</span></a><span class="br0">&#40;</span><span class="st0">&quot;vehicles.xml&quot;</span><span class="br0">&#41;</span>
&#160;
	<span class="co1">-- create a blank global table to store our imported data</span>
	vehicleTable <span class="sy0">=</span> <span class="br0">&#123;</span><span class="br0">&#125;</span>
&#160;
	<span class="kw1">if</span> rootnode <span class="kw1">then</span>		
		<span class="kw1">for</span> _,group <span class="kw1">in</span> <span class="kw1">ipairs</span><span class="br0">&#40;</span><a href="XmlNodeGetChildren.html" class="kw2"><span class="kw2">xmlNodeGetChildren</span></a><span class="br0">&#40;</span>rootnode<span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="kw1">do</span>
			<span class="co1">-- create an entry in the gridlist for every vehicle &quot;group&quot;</span>
			<span class="kw1">local</span> row <span class="sy0">=</span> <a href="GuiGridListAddRow.html" class="kw4"><span class="kw4">guiGridListAddRow</span></a><span class="br0">&#40;</span>gridlistVehicleSelection<span class="br0">&#41;</span>
&#160;
			<span class="kw1">local</span> name <span class="sy0">=</span> <a href="XmlNodeGetAttribute.html" class="kw2"><span class="kw2">xmlNodeGetAttribute</span></a><span class="br0">&#40;</span>group,<span class="st0">&quot;type&quot;</span><span class="br0">&#41;</span>
&#160;
			<a href="GuiGridListSetItemText.html" class="kw4"><span class="kw4">guiGridListSetItemText</span></a><span class="br0">&#40;</span>gridlistVehicleSelection,row,<span class="nu0">1</span>,name,<span class="kw1">false</span>,<span class="kw1">false</span><span class="br0">&#41;</span>	
&#160;
			<span class="co1">-- add an entry containing the group name into the table</span>
			vehicleTable<span class="br0">&#91;</span>name<span class="br0">&#93;</span> <span class="sy0">=</span> <span class="br0">&#123;</span><span class="br0">&#125;</span>
&#160;
			<span class="co1">-- we will use the custom data &quot;header&quot; to indicate that this entry can be expanded/collapsed</span>
			<a href="GuiGridListSetItemData.html" class="kw4"><span class="kw4">guiGridListSetItemData</span></a><span class="br0">&#40;</span>gridlistVehicleSelection,row,<span class="nu0">1</span>,<span class="st0">&quot;header&quot;</span><span class="br0">&#41;</span>	
&#160;
			<span class="co1">-- then, for every group that we find, loop all of its children (the vehicle nodes) and store them in a table</span>
			<span class="kw1">for</span> _,<a href="Vehicle.html" class="kw3"><span class="kw3">vehicle</span></a> <span class="kw1">in</span> <span class="kw1">ipairs</span><span class="br0">&#40;</span><a href="XmlNodeGetChildren.html" class="kw2"><span class="kw2">xmlNodeGetChildren</span></a><span class="br0">&#40;</span>group<span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="kw1">do</span>
				<span class="kw1">local</span> vname <span class="sy0">=</span> <a href="XmlNodeGetAttribute.html" class="kw2"><span class="kw2">xmlNodeGetAttribute</span></a><span class="br0">&#40;</span><a href="Vehicle.html" class="kw3"><span class="kw3">vehicle</span></a>,<span class="st0">&quot;name&quot;</span><span class="br0">&#41;</span>
				<span class="kw1">local</span> id <span class="sy0">=</span> <a href="XmlNodeGetAttribute.html" class="kw2"><span class="kw2">xmlNodeGetAttribute</span></a><span class="br0">&#40;</span><a href="Vehicle.html" class="kw3"><span class="kw3">vehicle</span></a>,<span class="st0">&quot;id&quot;</span><span class="br0">&#41;</span>			
&#160;
				<span class="co1">-- insert both the vehicle id and the vehicle description into the table</span>
				<span class="kw1"><a href="Table.html" class="kw3"><span class="kw3">table</span></a>.insert</span><span class="br0">&#40;</span>vehicleTable<span class="br0">&#91;</span>name<span class="br0">&#93;</span>,<span class="br0">&#123;</span>id,vname<span class="br0">&#125;</span><span class="br0">&#41;</span>
			<span class="kw1">end</span>
		<span class="kw1">end</span>	
&#160;
		<span class="co1">-- set element data on the gridlist so we know which group is currently showing</span>
		<a href="SetElementData.html" class="kw2"><span class="kw2">setElementData</span></a><span class="br0">&#40;</span>gridlistVehicleSelection,<span class="st0">&quot;expanded&quot;</span>,<span class="st0">&quot;none&quot;</span><span class="br0">&#41;</span>
&#160;
		<span class="co1">-- unload the xml file now that we are finished</span>
		<a href="XmlUnloadFile.html" class="kw2"><span class="kw2">xmlUnloadFile</span></a><span class="br0">&#40;</span>rootnode<span class="br0">&#41;</span>
	<span class="kw1">end</span>
<span class="kw1">end</span></pre></div></div>
<p>Now that we have all the data stored, we can quickly manipulate it when neccessary.
</p>
<h3><span class="mw-headline" id="Managing_the_double_click">Managing the double click</span></h3>
<p>To enable the player to simply double click on a group name to expand/collapse it we need to use the <a href="OnClientGUIDoubleClick.html" title="OnClientGUIDoubleClick">onClientGUIDoubleClick</a> event.
If we attach it to the gridlist, we can then catch any double clicks on the group names in it:
</p>
<!-- PLAIN TEXT CODE FOR BOTS |addEventHandler("onClientGUIDoubleClick",gridlistVehicleSelection,processDoubleClick,false)|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><span class="co1">-- attach the onClientGUIDoubleClick event to the gridlist and set it to call processDoubleClick</span>
<a href="AddEventHandler.html" class="kw2"><span class="kw2">addEventHandler</span></a><span class="br0">&#40;</span><span class="st0">&quot;onClientGUIDoubleClick&quot;</span>,gridlistVehicleSelection,processDoubleClick,<span class="kw1">false</span><span class="br0">&#41;</span></pre></div></div>
<p>Add this line of code in your createVehicleSelection, after the gridlist has been created.
</p><p><br />
As the gridlist items are not separate GUI elements, we must capture all clicks from anywhere on the gridlist then process them to filter out the ones we do not want.
This can be done by checking if an item is selected, then checking if the item is one of our "group" values (using our previously mentioned "header" data):
</p>
<!-- PLAIN TEXT CODE FOR BOTS |function processDoubleClick(button,state) if button == "left" and state == "up" then local row,col = guiGridListGetSelectedItem(gridlistVehicleSelection) if row and col and row ~= -1 and col ~= -1 then if guiGridListGetItemData(gridlistVehicleSelection,row,col) == "header" then local selected = guiGridListGetItemText(gridlistVehicleSelection,row,col) changeGridlistState(selected) end end end end|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><span class="kw1">function</span> processDoubleClick<span class="br0">&#40;</span>button,state<span class="br0">&#41;</span>
	<span class="kw1">if</span> button <span class="sy0">==</span> <span class="st0">&quot;left&quot;</span> <span class="kw1">and</span> state <span class="sy0">==</span> <span class="st0">&quot;up&quot;</span> <span class="kw1">then</span>
		<span class="kw1">local</span> row,col <span class="sy0">=</span> <a href="GuiGridListGetSelectedItem.html" class="kw4"><span class="kw4">guiGridListGetSelectedItem</span></a><span class="br0">&#40;</span>gridlistVehicleSelection<span class="br0">&#41;</span>
&#160;
		<span class="co1">-- if something in the gridlist has been selected</span>
		<span class="kw1">if</span> row <span class="kw1">and</span> col <span class="kw1">and</span> row ~<span class="sy0">=</span> -<span class="nu0">1</span> <span class="kw1">and</span> col ~<span class="sy0">=</span> -<span class="nu0">1</span> <span class="kw1">then</span>		
			<span class="co1">-- if it is a header</span>
			<span class="kw1">if</span> <a href="GuiGridListGetItemData.html" class="kw4"><span class="kw4">guiGridListGetItemData</span></a><span class="br0">&#40;</span>gridlistVehicleSelection,row,col<span class="br0">&#41;</span> <span class="sy0">==</span> <span class="st0">&quot;header&quot;</span> <span class="kw1">then</span>
				<span class="kw1">local</span> selected <span class="sy0">=</span> <a href="GuiGridListGetItemText.html" class="kw4"><span class="kw4">guiGridListGetItemText</span></a><span class="br0">&#40;</span>gridlistVehicleSelection,row,col<span class="br0">&#41;</span>
&#160;
				<span class="co1">-- call the function to collapse or expand the menu and pass which section it is as an argument</span>
				changeGridlistState<span class="br0">&#40;</span>selected<span class="br0">&#41;</span>
			<span class="kw1">end</span>
		<span class="kw1">end</span>
	<span class="kw1">end</span>
<span class="kw1">end</span></pre></div></div>
<p>Once we have narrowed down the double clicks to only those done on our group headers, we can expand/collapse them appropriately.
This can be done by simply setting new text values in the gridlist according to the newly expanded/collapsed group, which creates the convincing illusion of collapsable menus.
</p><p><br />
Note that much of the following code is reused from previous areas of this tutorial. While it is generally bad practice to clone sections of code in this way, for the purposes of this example it is far easier to understand.
</p>
<!-- PLAIN TEXT CODE FOR BOTS |function changeGridlistState(group) if group then if getElementData(gridlistVehicleSelection,"expanded") == group then guiGridListClear(gridlistVehicleSelection) for group,_ in pairs(vehicleTable) do local row = guiGridListAddRow(gridlistVehicleSelection) guiGridListSetItemText(gridlistVehicleSelection,row,1,group,false,false) guiGridListSetItemData(gridlistVehicleSelection,row,1,"header") end setElementData(gridlistVehicleSelection,"expanded","none") else guiGridListClear(gridlistVehicleSelection) local row = guiGridListAddRow(gridlistVehicleSelection) guiGridListSetItemText(gridlistVehicleSelection,row,1,group,false,false) guiGridListSetItemData(gridlistVehicleSelection,row,1,"header") for _,vehicle in ipairs(vehicleTable[group]) do row = guiGridListAddRow(gridlistVehicleSelection) guiGridListSetItemText(gridlistVehicleSelection,row,1,"- "..vehicle[2],false,false) guiGridListSetItemText(gridlistVehicleSelection,row,2,getVehicleType(tonumber(vehicle[1])),false,false) guiGridListSetItemData(gridlistVehicleSelection,row,1,tostring(vehicle[1])) end setElementData(gridlistVehicleSelection,"expanded",group) end end end|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><span class="kw1">function</span> changeGridlistState<span class="br0">&#40;</span>group<span class="br0">&#41;</span>
	<span class="kw1">if</span> group <span class="kw1">then</span>
		<span class="co1">-- if the group is already expanded, we want to collapse it</span>
		<span class="kw1">if</span> <a href="GetElementData.html" class="kw2"><span class="kw2">getElementData</span></a><span class="br0">&#40;</span>gridlistVehicleSelection,<span class="st0">&quot;expanded&quot;</span><span class="br0">&#41;</span> <span class="sy0">==</span> group <span class="kw1">then</span>
			<span class="co1">-- first, we clear all previous data from the gridlist</span>
			<a href="GuiGridListClear.html" class="kw4"><span class="kw4">guiGridListClear</span></a><span class="br0">&#40;</span>gridlistVehicleSelection<span class="br0">&#41;</span>
&#160;
			<span class="co1">-- now, loop all the group entries in the vehicle table that we created earlier</span>
			<span class="kw1">for</span> group,_ <span class="kw1">in</span> <span class="kw1">pairs</span><span class="br0">&#40;</span>vehicleTable<span class="br0">&#41;</span> <span class="kw1">do</span>
				<span class="co1">-- add each group to the list and mark them with &quot;header&quot;			</span>
				<span class="kw1">local</span> row <span class="sy0">=</span> <a href="GuiGridListAddRow.html" class="kw4"><span class="kw4">guiGridListAddRow</span></a><span class="br0">&#40;</span>gridlistVehicleSelection<span class="br0">&#41;</span>
&#160;
				<a href="GuiGridListSetItemText.html" class="kw4"><span class="kw4">guiGridListSetItemText</span></a><span class="br0">&#40;</span>gridlistVehicleSelection,row,<span class="nu0">1</span>,group,<span class="kw1">false</span>,<span class="kw1">false</span><span class="br0">&#41;</span>	
				<a href="GuiGridListSetItemData.html" class="kw4"><span class="kw4">guiGridListSetItemData</span></a><span class="br0">&#40;</span>gridlistVehicleSelection,row,<span class="nu0">1</span>,<span class="st0">&quot;header&quot;</span><span class="br0">&#41;</span>	
			<span class="kw1">end</span>
&#160;
			<span class="co1">-- update the data to indicate that no groups are currently expanded</span>
			<a href="SetElementData.html" class="kw2"><span class="kw2">setElementData</span></a><span class="br0">&#40;</span>gridlistVehicleSelection,<span class="st0">&quot;expanded&quot;</span>,<span class="st0">&quot;none&quot;</span><span class="br0">&#41;</span>
&#160;
		<span class="co1">-- otherwise, we want to expand it</span>
		<span class="kw1">else</span>
			<a href="GuiGridListClear.html" class="kw4"><span class="kw4">guiGridListClear</span></a><span class="br0">&#40;</span>gridlistVehicleSelection<span class="br0">&#41;</span>
&#160;
			<span class="kw1">local</span> row <span class="sy0">=</span> <a href="GuiGridListAddRow.html" class="kw4"><span class="kw4">guiGridListAddRow</span></a><span class="br0">&#40;</span>gridlistVehicleSelection<span class="br0">&#41;</span>
&#160;
			<a href="GuiGridListSetItemText.html" class="kw4"><span class="kw4">guiGridListSetItemText</span></a><span class="br0">&#40;</span>gridlistVehicleSelection,row,<span class="nu0">1</span>,group,<span class="kw1">false</span>,<span class="kw1">false</span><span class="br0">&#41;</span>	
			<a href="GuiGridListSetItemData.html" class="kw4"><span class="kw4">guiGridListSetItemData</span></a><span class="br0">&#40;</span>gridlistVehicleSelection,row,<span class="nu0">1</span>,<span class="st0">&quot;header&quot;</span><span class="br0">&#41;</span>				
&#160;
			<span class="co1">-- loop every vehicle in the specified groups table</span>
			<span class="kw1">for</span> _,<a href="Vehicle.html" class="kw3"><span class="kw3">vehicle</span></a> <span class="kw1">in</span> <span class="kw1">ipairs</span><span class="br0">&#40;</span>vehicleTable<span class="br0">&#91;</span>group<span class="br0">&#93;</span><span class="br0">&#41;</span> <span class="kw1">do</span>
				<span class="co1">-- add them to the gridlist and set the vehicle id as data</span>
				row <span class="sy0">=</span> <a href="GuiGridListAddRow.html" class="kw4"><span class="kw4">guiGridListAddRow</span></a><span class="br0">&#40;</span>gridlistVehicleSelection<span class="br0">&#41;</span>
&#160;
				<span class="co1">-- format a &quot;-&quot; into the string to make it visually easier to distinguish between groups and vehicles</span>
				<a href="GuiGridListSetItemText.html" class="kw4"><span class="kw4">guiGridListSetItemText</span></a><span class="br0">&#40;</span>gridlistVehicleSelection,row,<span class="nu0">1</span>,<span class="st0">&quot;- &quot;</span>..<a href="Vehicle.html" class="kw3"><span class="kw3">vehicle</span></a><span class="br0">&#91;</span><span class="nu0">2</span><span class="br0">&#93;</span>,<span class="kw1">false</span>,<span class="kw1">false</span><span class="br0">&#41;</span>	
				<a href="GuiGridListSetItemText.html" class="kw4"><span class="kw4">guiGridListSetItemText</span></a><span class="br0">&#40;</span>gridlistVehicleSelection,row,<span class="nu0">2</span>,<a href="GetVehicleType.html" class="kw2"><span class="kw2">getVehicleType</span></a><span class="br0">&#40;</span><span class="kw1">tonumber</span><span class="br0">&#40;</span><a href="Vehicle.html" class="kw3"><span class="kw3">vehicle</span></a><span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>,<span class="kw1">false</span>,<span class="kw1">false</span><span class="br0">&#41;</span>	
&#160;
				<a href="GuiGridListSetItemData.html" class="kw4"><span class="kw4">guiGridListSetItemData</span></a><span class="br0">&#40;</span>gridlistVehicleSelection,row,<span class="nu0">1</span>,<span class="kw1">tostring</span><span class="br0">&#40;</span><a href="Vehicle.html" class="kw3"><span class="kw3">vehicle</span></a><span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
			<span class="kw1">end</span>	
&#160;
			<span class="co1">-- update the data to indicate which group is currently expanded</span>
			<a href="SetElementData.html" class="kw2"><span class="kw2">setElementData</span></a><span class="br0">&#40;</span>gridlistVehicleSelection,<span class="st0">&quot;expanded&quot;</span>,group<span class="br0">&#41;</span>			
		<span class="kw1">end</span>
	<span class="kw1">end</span>
<span class="kw1">end</span></pre></div></div>
<p>This comletes the second section of the tutorial.
</p><p>For further GUI tutorials, see <a href="Scripting_the_GUI_-_Tutorial_2.html" title="Scripting the GUI - Tutorial 2">Tutorial 2 (Gates and Keypads)</a>
</p>
<!-- 
NewPP limit report
CPU time usage: 0.391 seconds
Real time usage: 0.391 seconds
Preprocessor visited node count: 151/1000000
Preprocessor generated node count: 328/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key nrp_wiki_1_22_13-wiki_dev_:pcache:idhash:5023-0!*!0!!en!*!* and timestamp 20150826141845
 -->
</div><div class="printfooter">
Retrieved from "<a index.html?title=Scripting_the_GUI_-_Tutorial_1&amp;oldid=22259">/index.php?title=Scripting_the_GUI_-_Tutorial_1&amp;oldid=22259</a>"</div>
		<div id='catlinks' class='catlinks'><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="Special_Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="Category_GUI_Tutorials.html" title="Category:GUI Tutorials">GUI Tutorials</a></li></ul></div></div>		<!-- end content -->
				<div class="visualClear"></div>
	</div>
	</div>
		</div>
		<div id="column-one">
	<div id="p-cactions" class="portlet">
		<h5>Views</h5>
		<div class="pBody">
			<ul>
	
				 <li id="ca-nstab-main" class="selected"><a href="Scripting_the_GUI_-_Tutorial_1.html"Array>Page</a></li>
				 <li id="ca-talk" class="new"><a index.html?title=Talk:Scripting_the_GUI_-_Tutorial_1&amp;action=edit&amp;redlink=1"Array>Discussion</a></li>
				 <li id="ca-viewsource"><a index.html?title=Scripting_the_GUI_-_Tutorial_1&amp;action=edit"Array>View source</a></li>
				 <li id="ca-history"><a index.html?title=Scripting_the_GUI_-_Tutorial_1&amp;action=history"Array>History</a></li>			</ul>
		</div>
	</div>
	<div class="portlet" id="p-personal">
		<h5>Personal tools</h5>
		<div class="pBody">
			<ul>
				<li id="pt-anonuserpage"><a href="User_75.81.255.html"Array class="new">75.81.255.73</a></li>
				<li id="pt-anontalk"><a href="User_talk_75.81.255.html"Array class="new">Talk for this IP address</a></li>
				<li id="pt-anonlogin"><a index.html?title=Special:UserLogin&amp;returnto=Scripting+the+GUI+-+Tutorial+1"Array></a></li>
			</ul>
		</div>
	</div>
	
	<div class="portlet" id="p-logo">
		<a style="background-image: url();" href="Main_Page.html"Array></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
	<div class='generated-sidebar portlet' id='p-navigation'>
		<h5>Navigation</h5>
		<div class='pBody'>
			<ul>
				<li id="n-Home"><a href="Main_Page.html"Array>Home</a></li>
				<li id="n-How-you-can-help"><a href="How_you_can_help.html"Array>How you can help</a></li>
				<li id="n-recentchanges"><a href="Special_RecentChanges.html"Array>Recent changes</a></li>
				<li id="n-randompage"><a href="OnElementDataChange.html"Array>Random page</a></li>
			</ul>
		</div>
	</div>
	<div class='generated-sidebar portlet' id='p-reference'>
		<h5>reference</h5>
		<div class='pBody'>
			<ul>
				<li id="n-Client-Functions"><a href="Client_Scripting_Functions.html"Array>Client Functions</a></li>
				<li id="n-Client-Events"><a href="Client_Scripting_Events.html"Array>Client Events</a></li>
				<li id="n-Server-Functions"><a href="Server_Scripting_Functions.html"Array>Server Functions</a></li>
				<li id="n-Server-Events"><a href="Server_Scripting_Events.html"Array>Server Events</a></li>
				<li id="n-Useful-Functions"><a href="Useful_Functions.html"Array>Useful Functions</a></li>
				<li id="n-NRP-Classes"><a href="NRP_Classes.html"Array>NRP Classes</a></li>
				<li id="n-NRP-Elements"><a href="Element.html"Array>NRP Elements</a></li>
				<li id="n-Element-Tree"><a href="Element_tree.html"Array>Element Tree</a></li>
			</ul>
		</div>
	</div>
	<div id="p-search" class="portlet">
		
		<div id="searchBody" class="pBody">
			<form action="/index.php" id="searchform"><div>
				
				
				
				
			</div></form>
		</div>
	</div>
	<div class="portlet" id="p-tb">
		<h5>Tools</h5>
		<div class="pBody">
			<ul>
				<li id="t-whatlinkshere"><a href="Special_WhatLinksHere/Scripting_the_GUI_-_Tutorial_1.html"Array>What links here</a></li>
				<li id="t-recentchangeslinked"><a href="Special_RecentChangesLinked/Scripting_the_GUI_-_Tutorial_1.html"Array>Related changes</a></li>
<li id="t-specialpages"><a href="Special_SpecialPages.html"Array>Special pages</a></li>
				<li id="t-print"><a index.html?title=Scripting_the_GUI_-_Tutorial_1&amp;printable=yes" rel="alternate"Array>Printable version</a></li>				<li id="t-permalink"><a index.html?title=Scripting_the_GUI_-_Tutorial_1&amp;oldid=22259"Array>Permanent link</a></li>			</ul>
		</div>
	</div>
</div><!-- end of the left (by default at least) column -->
<div class="visualClear"></div>
			<div id="footer">
				<div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="../skins/common/images/poweredby_mediawiki_88x31.png" height="31" width="88" alt="Powered by MediaWiki" /></a></div>
				<div id="f-copyrightico"><a href="http://www.gnu.org/copyleft/fdl.html"><img src="../skins/common/images/gnu-fdl.png" alt="GNU Free Documentation License 1.2" width="88" height="31" /></a></div>
	<ul id="f-list">
					<li id="lastmod"> This page was last modified on 8 January 2010, at 02:46.</li>
					<li id="viewcount">This page has been accessed 7,683 times.</li>
					<li id="copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.2</a> unless otherwise noted.</li>
					<li id="privacy"><a href="Nexus_RP__Wiki_Privacy_policy.html" title="Nexus RP: Wiki:Privacy policy">Privacy policy</a></li>
					<li id="about"><a href="Nexus_RP__Wiki_About.html" title="Nexus RP: Wiki:About">About Nexus RP: Wiki</a></li>
					<li id="disclaimer"><a href="Nexus_RP__Wiki_General_disclaimer.html" title="Nexus RP: Wiki:General disclaimer">Disclaimers</a></li>
			</ul>
</div>
</div>
<script>/*<![CDATA[*/window.jQuery && jQuery.ready();/*]]>*/</script><script>if(window.mw){
mw.loader.state({"site":"loading","user":"ready","user.groups":"ready"});
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.action.view.postEdit","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest","ext.cite"],null,true);
}</script>
<script src="/load.php?debug=false&amp;lang=en&amp;modules=site&amp;only=scripts&amp;skin=nrpbook&amp;*"></script>
<!-- Served in 0.446 secs. --></body>
<!-- Mirrored from wiki.nexusrp.com/wiki/Scripting_the_GUI_-_Tutorial_1 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 27 Aug 2015 07:33:03 GMT -->
</html>
