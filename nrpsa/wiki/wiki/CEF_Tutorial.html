<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
	
<!-- Mirrored from wiki.nexusrp.com/wiki/CEF_Tutorial by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 27 Aug 2015 07:32:44 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<meta name="generator" content="MediaWiki 1.22.13" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="Nexus RP: Wiki (en)" />
<link rel="EditURI" type="application/rsd+xml" href="/api.php?action=rsd" />
<link rel="copyright" href="http://www.gnu.org/copyleft/fdl.html" />
<link rel="alternate" type="application/atom+xml" title="Nexus RP: Wiki Atom feed" index.html?title=Special:RecentChanges&amp;feed=atom" />		<title>CEF Tutorial - Nexus RP: Wiki</title>
		<link rel="stylesheet" href="/load.php?debug=false&amp;lang=en&amp;modules=ext.rtlcite%7Cmediawiki.legacy.commonPrint%2Cshared&amp;only=styles&amp;skin=nrpbook&amp;*" />
<link rel="stylesheet" href="../skins/nrpbook/main11b9.css?303" media="screen" />
<!--[if lt IE 5.5000]><link rel="stylesheet" href="/skins/nrpbook/IE50Fixes.css?303" media="screen" /><![endif]-->
<!--[if IE 5.5000]><link rel="stylesheet" href="/skins/nrpbook/IE55Fixes.css?303" media="screen" /><![endif]-->
<!--[if IE 6]><link rel="stylesheet" href="/skins/nrpbook/IE60Fixes.css?303" media="screen" /><![endif]-->
<!--[if IE 7]><link rel="stylesheet" href="/skins/nrpbook/IE70Fixes.css?303" media="screen" /><![endif]--><meta name="ResourceLoaderDynamicStyles" content="" />
<link rel="stylesheet" href="/load.php?debug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=nrpbook&amp;*" />
<style>a:lang(ar),a:lang(ckb),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: nrp_wiki_1_22_13-wiki_dev_:resourceloader:filter:minify-css:7:68ffccca97fd0532df6141dcbaf256b6 */</style>

		<!--[if lt IE 7]><script type="text/javascript" src="/skins/common/IEFixes.js?303"></script>
		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->

		<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"CEF_Tutorial","wgTitle":"CEF Tutorial","wgCurRevisionId":45688,"wgRevisionId":45688,"wgArticleId":8262,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Tutorials"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransforNRPble":["",""],"wgDigitTransforNRPble":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"CEF_Tutorial","wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[]});
}</script>
		<script type="text/javascript" src="../skins/common/wikibits11b9.js?303"><!-- wikibits js --></script>
		<!-- Head Scripts -->
<script src="/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=nrpbook&amp;*"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"CEF_Tutorial","wgTitle":"CEF Tutorial","wgCurRevisionId":45688,"wgRevisionId":45688,"wgArticleId":8262,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Tutorials"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransforNRPble":["",""],"wgDigitTransforNRPble":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"CEF_Tutorial","wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[]});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function(){mw.user.options.set({"ccmeonemails":0,"cols":80,"date":"default","diffonly":0,"disablemail":0,"disablesuggest":0,"editfont":"default","editondblclick":0,"editsection":1,"editsectiononrightclick":0,"enotifminoredits":0,"enotifrevealaddr":0,"enotifusertalkpages":1,"enotifwatchlistpages":0,"extendwatchlist":0,"fancysig":0,"forceeditsummary":0,"gender":"unknown","hideminor":0,"hidepatrolled":0,"imagesize":2,"justify":0,"math":1,"minordefault":0,"newpageshidepatrolled":0,"nocache":0,"noconvertlink":0,"norollbackdiff":0,"numberheadings":0,"previewonfirst":0,"previewontop":1,"rcdays":7,"rclimit":50,"rememberpassword":0,"rows":25,"searchlimit":20,"showhiddencats":0,"shownumberswatching":1,"showtoc":1,"showtoolbar":1,"skin":"nrpbook","stubthreshold":0,"thumbsize":2,"underline":2,"uselivepreview":0,"usenewrc":0,"vector-simplesearch":1,"watchcreations":0,"watchdefault":0,"watchdeletion":0,"watchlistdays":3,"watchlisthideanons":0,"watchlisthidebots":0,
"watchlisthideliu":0,"watchlisthideminor":0,"watchlisthideown":0,"watchlisthidepatrolled":0,"watchmoves":0,"wllimit":250,"useeditwarning":1,"prefershttps":1,"language":"en","variant-gan":"gan","variant-iu":"iu","variant-kk":"kk","variant-ku":"ku","variant-shi":"shi","variant-sr":"sr","variant-tg":"tg","variant-uz":"uz","variant-zh":"zh","searchNs0":true,"searchNs1":false,"searchNs2":false,"searchNs3":false,"searchNs4":false,"searchNs5":false,"searchNs6":false,"searchNs7":false,"searchNs8":false,"searchNs9":false,"searchNs10":false,"searchNs11":false,"searchNs12":false,"searchNs13":false,"searchNs14":false,"searchNs15":false,"searchNs100":false,"variant":"en"});},{},{});mw.loader.implement("user.tokens",function(){mw.user.tokens.set({"editToken":"+\\","patrolToken":false,"watchToken":false});},{},{});
/* cache key: nrp_wiki_1_22_13-wiki_dev_:resourceloader:filter:minify-js:7:925126ceab977200cdcc48193642dea0 */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax"]);
}</script><style type="text/css">/*<![CDATA[*/
.source-lua {line-height: normal;}
.source-lua li, .source-lua pre {
	line-height: normal; border: 0px none white;
}
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for lua
 * CSS class: source-lua, CSS id: 
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 * --------------------------------------
 */
.lua.source-lua .de1, .lua.source-lua .de2 {font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;font-family: monospace, monospace;}
.lua.source-lua  {font-family:monospace;}
.lua.source-lua .imp {font-weight: bold; color: red;}
.lua.source-lua li, .lua.source-lua .li1 {font-weight: normal; vertical-align:top;}
.lua.source-lua .ln {width:1px;text-align:right;margin:0;padding:0 2px;vertical-align:top;}
.lua.source-lua .li2 {font-weight: bold; vertical-align:top;}
.lua.source-lua .kw1 {color: #b1b100;}
.lua.source-lua .co1 {color: #808080; font-style: italic;}
.lua.source-lua .coMULTI {color: #808080; font-style: italic;}
.lua.source-lua .es0 {color: #000099; font-weight: bold;}
.lua.source-lua .br0 {color: #66cc66;}
.lua.source-lua .sy0 {color: #66cc66;}
.lua.source-lua .st0 {color: #00A600;}
.lua.source-lua .nu0 {color: #cc66cc;}
.lua.source-lua .me0 {color: #b1b100;}
.lua.source-lua .ln-xtra, .lua.source-lua li.ln-xtra, .lua.source-lua div.ln-xtra {background-color: #ffc;}
.lua.source-lua span.xtra { display:block; }

/*]]>*/
</style>	</head>
<body class="mediawiki ltr ns-0 ns-subject page-CEF_Tutorial skin-nrpbook">
	<div id="globalWrapper">
		
		<div id="column-content">
	<div id="content">
		<a name="top" id="top"></a>
			<h1 id="firstHeading" class="firstHeading">CEF Tutorial</h1>
		<div id="bodyContent">
			<h3 id="siteSub">From Nexus RP: Wiki</h3>
			<div id="contentSub"></div>
									<div id="jump-to-nav">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>		<!-- start content -->
<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><p>This page gives you a brief introduction to CEF.
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#What_is_CEF.3F"><span class="tocnumber">1</span> <span class="toctext">What is CEF?</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#The_basics"><span class="tocnumber">2</span> <span class="toctext">The basics</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Domain_request_system"><span class="tocnumber">3</span> <span class="toctext">Domain request system</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Local_vs_remote_mode"><span class="tocnumber">4</span> <span class="toctext">Local vs remote mode</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Resource_management"><span class="tocnumber">5</span> <span class="toctext">Resource management</span></a>
<ul>
<li class="toclevel-2 tocsection-6"><a href="#How_to_load_local_HTML_files"><span class="tocnumber">5.1</span> <span class="toctext">How to load local HTML files</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#How_to_load_local_resources_in_local_HTML_files"><span class="tocnumber">5.2</span> <span class="toctext">How to load local resources in local HTML files</span></a>
<ul>
<li class="toclevel-3 tocsection-8"><a href="#Example"><span class="tocnumber">5.2.1</span> <span class="toctext">Example</span></a>
<ul>
<li class="toclevel-4 tocsection-9"><a href="#Lua"><span class="tocnumber">5.2.1.1</span> <span class="toctext">Lua</span></a></li>
<li class="toclevel-4 tocsection-10"><a href="#meta.xml"><span class="tocnumber">5.2.1.2</span> <span class="toctext">meta.xml</span></a></li>
<li class="toclevel-4 tocsection-11"><a href="#HTML"><span class="tocnumber">5.2.1.3</span> <span class="toctext">HTML</span></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-12"><a href="#Lua_.3C.3D.3D.3E_Javascript_communication"><span class="tocnumber">6</span> <span class="toctext">Lua &lt;==&gt; Javascript communication</span></a>
<ul>
<li class="toclevel-2 tocsection-13"><a href="#Lua_to_Javascript"><span class="tocnumber">6.1</span> <span class="toctext">Lua to Javascript</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#Javascript_to_Lua"><span class="tocnumber">6.2</span> <span class="toctext">Javascript to Lua</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-15"><a href="#Debugging"><span class="tocnumber">7</span> <span class="toctext">Debugging</span></a></li>
<li class="toclevel-1 tocsection-16"><a href="#Things_you_should_keep_in_mind_while_working_with_CEF"><span class="tocnumber">8</span> <span class="toctext">Things you should keep in mind while working with CEF</span></a></li>
<li class="toclevel-1 tocsection-17"><a href="#Advanced_usage"><span class="tocnumber">9</span> <span class="toctext">Advanced usage</span></a></li>
<li class="toclevel-1 tocsection-18"><a href="#Performance"><span class="tocnumber">10</span> <span class="toctext">Performance</span></a></li>
<li class="toclevel-1 tocsection-19"><a href="#Troubleshooting"><span class="tocnumber">11</span> <span class="toctext">Troubleshooting</span></a>
<ul>
<li class="toclevel-2 tocsection-20"><a href="#google.com_doesn.27t_work_.28even_though_I_requested_google.com.29"><span class="tocnumber">11.1</span> <span class="toctext">google.com doesn't work (even though I requested google.com)</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-21"><a href="#Scripting_functions"><span class="tocnumber">12</span> <span class="toctext">Scripting functions</span></a></li>
<li class="toclevel-1 tocsection-22"><a href="#Scripting_events"><span class="tocnumber">13</span> <span class="toctext">Scripting events</span></a></li>
</ul>
</div>

<h1><span class="mw-headline" id="What_is_CEF.3F">What is CEF?</span></h1>
<p>CEF stands for <b>C</b>hromium <b>E</b>mbedded <b>F</b>ramework and is a framework for embedding Chromium-based browsers in other applications - in our case NRP. CEF is based on Google's Chromium project so it is also a fast, secure and stable web engine.
</p><p>You can find more information about CEF on CEF's GoogleCode project page: <a rel="nofollow" class="external free" href="https://bitbucket.org/chromiumembedded/cef">https://bitbucket.org/chromiumembedded/cef</a>
</p>
<h1><span class="mw-headline" id="The_basics">The basics</span></h1>
<p>Creating a new browser is really simple. Let's open YouTube for example:
</p>
<!-- PLAIN TEXT CODE FOR BOTS |local browser = createBrowser(800, 600, true, true) addEventHandler("onClientBrowserCreated", browser, function() loadBrowserURL(source, "https://youtube.com/") end )|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><span class="co1">-- Create a new remote browser (size is 800*600px) with transparency enabled</span>
<span class="kw1">local</span> browser <span class="sy0">=</span> createBrowser<span class="br0">&#40;</span><span class="nu0">800</span>, <span class="nu0">600</span>, <span class="kw1">true</span>, <span class="kw1">true</span><span class="br0">&#41;</span>
&#160;
<span class="co1">-- &quot;Wait&quot; for the browser (this is necessary, because CEF runs in a secondary thread and hence requires the 'asynchronous' event mechanism)</span>
<a href="AddEventHandler.html" class="kw2"><span class="kw2">addEventHandler</span></a><span class="br0">&#40;</span><span class="st0">&quot;onClientBrowserCreated&quot;</span>, browser,
    <span class="kw1">function</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
        <span class="co1">-- We're ready to load the URL now (the source of this event is the browser that has been created)</span>
        loadBrowserURL<span class="br0">&#40;</span>source, <span class="st0">&quot;https://youtube.com/&quot;</span><span class="br0">&#41;</span>
    <span class="kw1">end</span>
<span class="br0">&#41;</span></pre></div></div>
<p>This example does not require any domain requests as YouTube is whitelisted by default. More about domain requests below.
</p>
<h1><span class="mw-headline" id="Domain_request_system">Domain request system</span></h1>
<p>In order to prevent people from abusing the possibilities CEF offers, we decided to introduce a request system.
This means the domain you want to load has to meet at least one of the following requirements:
</p>
<ul>
<li>it is whitelisted globally by the NRP team (you can create a post in [this topic] to suggest a new domain to be whitelisted) - <b>**TODO: Add forum URL here**</b>
</li>
<li>the domain was requsted via requestBrowserDomains/Browser.requestDomains and accepted by the player <b>before</b>
</li>
<li>the domain is on the user's whitelist (NRP settings =&gt; Tab: Browser =&gt; Whitelist)
</li>
</ul>
<p>Apart from these options a domain might be blacklisted due to malicious content. Such domains cannot be requested.
</p>
<h1><span class="mw-headline" id="Local_vs_remote_mode">Local vs remote mode</span></h1>
<p>There are two modes CEF can run in:
</p><p>Characteristics of local mode:
</p>
<ul>
<li>you <b>can</b> execute Javascript code without any restriction (See: <a href="ExecuteBrowserJavascript.html" title="ExecuteBrowserJavascript">executeBrowserJavascript</a>)
</li>
<li>you <b>can</b> only load websites stored in the resource folder
</li>
<li>you <b>cannot</b> load remote content
</li>
</ul>
<p>Characteristics of remote mode:
</p>
<ul>
<li>you <b>cannot</b> execute Javascript code
</li>
<li>you <b>can</b> only load remote content
</li>
<li>keep in mind that either loading remote websites or Javascript on remote websites can be disabled in the NRP settings
</li>
</ul>
<p>Changing the mode after the browser was created is not possible due to technical reasons.
</p>
<h1><span class="mw-headline" id="Resource_management">Resource management</span></h1>
<h2><span class="mw-headline" id="How_to_load_local_HTML_files">How to load local HTML files</span></h2>
<p>Loading local HTML files works similar to loading images.
</p><p>Add your HTML files to your meta.xml through the file tag:
</p>
<!-- PLAIN TEXT CODE FOR BOTS |<file src="html/myAwesomeUI.html"/>|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><span class="sy0">&lt;</span>file src<span class="sy0">=</span><span class="st0">&quot;html/myAwesomeUI.html&quot;</span><span class="sy0">/&gt;</span></pre></div></div>
<h2><span class="mw-headline" id="How_to_load_local_resources_in_local_HTML_files">How to load local resources in local HTML files</span></h2>
<p>Imagine you want to load an image or play a video from your NRP resource. This is possible via a custom URI scheme named <i><b>nrplocal://</b></i>
</p>
<h3><span class="mw-headline" id="Example">Example</span></h3>
<p>This examples shows how to play a video. Note that you have to enable OOP.
</p>
<h4><span class="mw-headline" id="Lua">Lua</span></h4>
<!-- PLAIN TEXT CODE FOR BOTS |local webView = Browser(640, 480, true, true) addEventHandler("onClientBrowserCreated", webView, function() webView:loadURL("http://mta/local/html/myVideo.html") end )|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><span class="co1">-- Create a browser (local mode is also required to access local data)</span>
<span class="kw1">local</span> webView <span class="sy0">=</span> Browser<span class="br0">&#40;</span><span class="nu0">640</span>, <span class="nu0">480</span>, <span class="kw1">true</span>, <span class="kw1">true</span><span class="br0">&#41;</span>
&#160;
<a href="AddEventHandler.html" class="kw2"><span class="kw2">addEventHandler</span></a><span class="br0">&#40;</span><span class="st0">&quot;onClientBrowserCreated&quot;</span>, webView,
     <span class="kw1">function</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
&#160;
          <span class="co1">-- Load HTML UI</span>
          webView:loadURL<span class="br0">&#40;</span><span class="st0">&quot;http://mta/local/html/myVideo.html&quot;</span><span class="br0">&#41;</span>
&#160;
     <span class="kw1">end</span>
<span class="br0">&#41;</span></pre></div></div>
<h4><span class="mw-headline" id="meta.xml">meta.xml</span></h4>
<!-- PLAIN TEXT CODE FOR BOTS |<file src="html/myVideo.html"/> <file src="media/myVideo.webm"/>|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><span class="sy0">&lt;</span>file src<span class="sy0">=</span><span class="st0">&quot;html/myVideo.html&quot;</span><span class="sy0">/&gt;</span>
<span class="sy0">&lt;</span>file src<span class="sy0">=</span><span class="st0">&quot;media/myVideo.webm&quot;</span><span class="sy0">/&gt;</span></pre></div></div>
<h4><span class="mw-headline" id="HTML">HTML</span></h4>
<p>This is the most interesting part:
</p>
<!-- PLAIN TEXT CODE FOR BOTS |<!DOCTYPE HTML> <html> <head></head> <body> <video width="640" height="480" controls> <source src="http://mta/local/myVideo.webm" type="video/webm"/> </video> </body> </html>|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1"><span class="sy0">&lt;!</span>DOCTYPE HTML<span class="sy0">&gt;</span>
<span class="sy0">&lt;</span>html<span class="sy0">&gt;</span>
<span class="sy0">&lt;</span>head<span class="sy0">&gt;&lt;/</span>head<span class="sy0">&gt;</span>
<span class="sy0">&lt;</span>body<span class="sy0">&gt;</span>
    <span class="sy0">&lt;</span>video width<span class="sy0">=</span><span class="st0">&quot;640&quot;</span> height<span class="sy0">=</span><span class="st0">&quot;480&quot;</span> controls<span class="sy0">&gt;</span>
         <span class="sy0">&lt;</span>source src<span class="sy0">=</span><span class="st0">&quot;http://mta/local/myVideo.webm&quot;</span> <span class="kw1">type</span><span class="sy0">=</span><span class="st0">&quot;video/webm&quot;</span><span class="sy0">/&gt;</span>
    <span class="sy0">&lt;/</span>video<span class="sy0">&gt;</span>
<span class="sy0">&lt;/</span>body<span class="sy0">&gt;</span>
<span class="sy0">&lt;/</span>html<span class="sy0">&gt;</span></pre></div></div>
<h1><span class="mw-headline" id="Lua_.3C.3D.3D.3E_Javascript_communication">Lua &lt;==&gt; Javascript communication</span></h1>
<p>First of all, communication between Lua and Javascript is only available in local mode due to security reasons.
</p>
<h2><span class="mw-headline" id="Lua_to_Javascript">Lua to Javascript</span></h2>
<p>Lua to javascript is pretty easy as you can execute Javascript code from Lua using <a href="ExecuteBrowserJavascript.html" title="ExecuteBrowserJavascript">executeBrowserJavascript</a>.
</p><p>So, a bit Lua code around it and you have got the first direction:
</p>
<ul>
<li> <a rel="nofollow" class="external free" href="https://github.com/Jusonex/nrpsa_cef_tools/blob/master/webui/src/WebWindow.lua#L180-189">https://github.com/Jusonex/nrpsa_cef_tools/blob/master/webui/src/WebWindow.lua#L180-189</a>
</li>
<li> <a rel="nofollow" class="external free" href="../../github.com/Jusonex/nrpsa_cef_tools/blob/master/webui/src/nrpevents.html#L9-L15">https://github.com/Jusonex/nrpsa_cef_tools/blob/master/webui/src/nrpevents.js#L9-L15</a>
</li>
</ul>
<h2><span class="mw-headline" id="Javascript_to_Lua">Javascript to Lua</span></h2>
<p>You are able to trigger a client event via the Javascript method <i>triggerEvent</i> which is part of the static class/namespace <i>nrp</i>.
The syntax is as follows:
</p>
<!-- PLAIN TEXT CODE FOR BOTS |nrp.triggerEvent(string event, var parameter1, var parameter2, var parameter3, ...)|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1">nrp.<a href="TriggerEvent.html" class="kw2"><span class="kw2">triggerEvent</span></a><span class="br0">&#40;</span><a href="String-3.html" class="kw3"><span class="kw3">string</span></a> event, var parameter1, var parameter2, var parameter3, ...<span class="br0">&#41;</span></pre></div></div>
<p>The source of this event is always the browser element which triggered the event.
</p><p>An example is available here:
</p>
<ul>
<li> <a rel="nofollow" class="external free" href="https://github.com/Jusonex/nrpsa_cef_tools/blob/master/webui/examples/html/ui2.html#L66">https://github.com/Jusonex/nrpsa_cef_tools/blob/master/webui/examples/html/ui2.html#L66</a>
</li>
<li> <a rel="nofollow" class="external free" href="https://github.com/Jusonex/nrpsa_cef_tools/blob/master/webui/examples/Main.lua#L35-L40">https://github.com/Jusonex/nrpsa_cef_tools/blob/master/webui/examples/Main.lua#L35-L40</a>
</li>
</ul>
<h1><span class="mw-headline" id="Debugging">Debugging</span></h1>
<p>The <i>web development mode</i> can be enabled as follows (type it in the client's F8 console):
</p>
<!-- PLAIN TEXT CODE FOR BOTS |start runcode crun setDevelopmentMode(true, true) debugscript 3|--><div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="lua source-lua"><pre class="de1">start runcode
crun <a href="SetDevelopmentMode.html" class="kw4"><span class="kw4">setDevelopmentMode</span></a><span class="br0">&#40;</span><span class="kw1">true</span>, <span class="kw1">true</span><span class="br0">&#41;</span>
debugscript <span class="nu0">3</span></pre></div></div>
<p>Now, you should be able to see web errors and blocked domains/URLs in the debug window at the bottom.
</p>
<h1><span class="mw-headline" id="Things_you_should_keep_in_mind_while_working_with_CEF">Things you should keep in mind while working with CEF</span></h1>
<p>You should always keep in mind that some modern browser features are not available on some computers.
This is for example true for <b>WebGL</b>.
</p><p>Another problematic feature is <b>Adobe Flash</b>. Adobe Flash is enabled by default, but you should avoid using it due to the fact that plugins can be disabled in the settings on the one hand (Java is disabled completely by the way) and Flash is very restrictive on the other hand. Restrictive means it runs in a separate process, uses a very old interface and offers therefore just a few ways to control it.
As a consequence you cannot control the volume of flash objects. Fortunately, HTML5 is an even better replacement and provides a very good audio and video interface (<a rel="nofollow" class="external free" href="http://www.w3schools.com/tags/ref_av_dom.asp">http://www.w3schools.com/tags/ref_av_dom.asp</a>) which even supports 3D sound (@all bored people among us: Feel free to write a 3D sound 'wrapper' that maps the GTA onto HTML5 coordinates&#160;:P).
</p>
<h1><span class="mw-headline" id="Advanced_usage">Advanced usage</span></h1>
<p>Since our CEF implementation does not do z-ordering by default, you have to provide your own z-ordering mechanism.
You can find a basic implementation of such a mechanism here: <a rel="nofollow" class="external free" href="https://github.com/Jusonex/nrpsa_cef_tools">https://github.com/Jusonex/nrpsa_cef_tools</a>
There are also a few utility functions which allow you to integrate these classes easily into your own object-oriented UI system.
I'll provide some code to use CEF along with CEGUI soon too.
</p>
<h1><span class="mw-headline" id="Performance">Performance</span></h1>
<p>Creating lots of browsers does not influence NRP directly (except the fact NRP has to copy the texture data in the main/GTA thread due to technical restrictions), because one part of CEF runs in another process and the other part in a secondary thread.
So if you do not want to show the browser, it is definitely the best to destroy the browser. If you cannot destroy the browser (imagine you have to save the website's state for some reason), you can save a lot of resources by disabling rendering via <a href="SetBrowserRenderingPaused.html" title="SetBrowserRenderingPaused">setBrowserRenderingPaused</a>. This will stop CEF from rendering new frames/processing input and NRP from copying the texture data.
</p>
<h1><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h1>
<h3><span class="mw-headline" id="google.com_doesn.27t_work_.28even_though_I_requested_google.com.29">google.com doesn't work (even though I requested google.com)</span></h3>
<p>Google redirects to a country specific website by default. If you want to prevent Google from doing this, load the following URL: <a rel="nofollow" class="external free" href="https://www.google.com/ncr">https://www.google.com/ncr</a>
</p>
<h1><span class="mw-headline" id="Scripting_functions">Scripting functions</span></h1>
<ul>
<li><a href="CreateBrowser.html" title="CreateBrowser">createBrowser</a>
</li>
<li><a href="GuiCreateBrowser.html" title="GuiCreateBrowser">guiCreateBrowser</a>
</li>
<li><a href="GuiGetBrowser.html" title="GuiGetBrowser">guiGetBrowser</a>
</li>
<li><a href="ExecuteBrowserJavascript.html" title="ExecuteBrowserJavascript">executeBrowserJavascript</a>
</li>
<li><a href="FocusBrowser.html" title="FocusBrowser">focusBrowser</a>
</li>
<li><a href="IsBrowserDomainBlocked.html" title="IsBrowserDomainBlocked">isBrowserDomainBlocked</a>
</li>
<li><a href="IsBrowserFocused.html" title="IsBrowserFocused">isBrowserFocused</a>
</li>
<li><a href="IsBrowserLoading.html" title="IsBrowserLoading">isBrowserLoading</a>
</li>
<li><a href="GetBrowserProperty.html" title="GetBrowserProperty">getBrowserProperty</a>
</li>
<li><a href="GetBrowserSettings.html" title="GetBrowserSettings">getBrowserSettings</a>
</li>
<li><a index.html?title=GetBrowserSource&amp;action=edit&amp;redlink=1" class="new" title="GetBrowserSource (page does not exist)">getBrowserSource</a>
</li>
<li><a href="GetBrowserTitle.html" title="GetBrowserTitle">getBrowserTitle</a>
</li>
<li><a href="GetBrowserURL.html" title="GetBrowserURL">getBrowserURL</a>
</li>
<li><a href="InjectBrowserMouseDown.html" title="InjectBrowserMouseDown">injectBrowserMouseDown</a>
</li>
<li><a href="InjectBrowserMouseMove.html" title="InjectBrowserMouseMove">injectBrowserMouseMove</a>
</li>
<li><a href="InjectBrowserMouseUp.html" title="InjectBrowserMouseUp">injectBrowserMouseUp</a>
</li>
<li><a href="InjectBrowserMouseWheel.html" title="InjectBrowserMouseWheel">injectBrowserMouseWheel</a>
</li>
<li><a href="LoadBrowserURL.html" title="LoadBrowserURL">loadBrowserURL</a>
</li>
<li><a href="SetBrowserProperty.html" title="SetBrowserProperty">setBrowserProperty</a>
</li>
<li><a href="SetBrowserRenderingPaused.html" title="SetBrowserRenderingPaused">setBrowserRenderingPaused</a>
</li>
<li><a href="SetBrowserVolume.html" title="SetBrowserVolume">setBrowserVolume</a>
</li>
<li><a href="RequestBrowserDomains.html" title="RequestBrowserDomains">requestBrowserDomains</a>
</li>
</ul>
<div style="font-weight: bold;background:black;color:white;padding:2px; padding-left:8px;">FROM VERSION 1.6  ONWARDS</div><div style="border: 2px solid black;padding: 3px;">
<ul>
<li><a href="SetBrowserAjaxHandler.html" title="SetBrowserAjaxHandler">setBrowserAjaxHandler</a>
</li>
</ul>
 </div>
<h1><span class="mw-headline" id="Scripting_events">Scripting events</span></h1>
<ul>
<li><a href="OnClientBrowserCreated.html" title="OnClientBrowserCreated">onClientBrowserCreated</a>
</li>
<li><a index.html?title=OnClientBrowserLoadingStart&amp;action=edit&amp;redlink=1" class="new" title="OnClientBrowserLoadingStart (page does not exist)">onClientBrowserLoadingStart</a>
</li>
<li><a href="OnClientBrowserDocumentReady.html" title="OnClientBrowserDocumentReady">onClientBrowserDocumentReady</a>
</li>
<li><a href="OnClientBrowserLoadingFailed.html" title="OnClientBrowserLoadingFailed">onClientBrowserLoadingFailed</a>
</li>
<li><a href="OnClientBrowserNavigate.html" title="OnClientBrowserNavigate">onClientBrowserNavigate</a>
</li>
<li><a href="OnClientBrowserPopup.html" title="OnClientBrowserPopup">onClientBrowserPopup</a>
</li>
<li><a href="OnClientBrowserCursorChange.html" title="OnClientBrowserCursorChange">onClientBrowserCursorChange</a>
</li>
<li><a index.html?title=OnClientBrowserTooltip&amp;action=edit&amp;redlink=1" class="new" title="OnClientBrowserTooltip (page does not exist)">onClientBrowserTooltip</a>
</li>
<li><a href="OnClientBrowserInputFocusChanged.html" title="OnClientBrowserInputFocusChanged">onClientBrowserInputFocusChanged</a>
</li>
<li><a href="OnClientBrowserResourceBlocked.html" title="OnClientBrowserResourceBlocked">onClientBrowserResourceBlocked</a>
</li>
<li><a href="OnClientBrowserWhitelistChange.html" title="OnClientBrowserWhitelistChange">onClientBrowserWhitelistChange</a>
</li>
</ul>

<!-- 
NewPP limit report
CPU time usage: 0.167 seconds
Real time usage: 0.170 seconds
Preprocessor visited node count: 196/1000000
Preprocessor generated node count: 446/1000000
Post‐expand include size: 3291/2097152 bytes
Template argument size: 931/2097152 bytes
Highest expansion depth: 6/40
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key nrp_wiki_1_22_13-wiki_dev_:pcache:idhash:8262-0!*!0!!en!*!* and timestamp 20150826141447
 -->
</div><div class="printfooter">
Retrieved from "<a index.html?title=CEF_Tutorial&amp;oldid=45688">/index.php?title=CEF_Tutorial&amp;oldid=45688</a>"</div>
		<div id='catlinks' class='catlinks'><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="Special_Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="Category_Tutorials.html" title="Category:Tutorials">Tutorials</a></li></ul></div></div>		<!-- end content -->
				<div class="visualClear"></div>
	</div>
	</div>
		</div>
		<div id="column-one">
	<div id="p-cactions" class="portlet">
		<h5>Views</h5>
		<div class="pBody">
			<ul>
	
				 <li id="ca-nstab-main" class="selected"><a href="CEF_Tutorial.html"Array>Page</a></li>
				 <li id="ca-talk" class="new"><a index.html?title=Talk:CEF_Tutorial&amp;action=edit&amp;redlink=1"Array>Discussion</a></li>
				 <li id="ca-viewsource"><a index.html?title=CEF_Tutorial&amp;action=edit"Array>View source</a></li>
				 <li id="ca-history"><a index.html?title=CEF_Tutorial&amp;action=history"Array>History</a></li>			</ul>
		</div>
	</div>
	<div class="portlet" id="p-personal">
		<h5>Personal tools</h5>
		<div class="pBody">
			<ul>
				<li id="pt-anonuserpage"><a href="User_75.81.255.html"Array class="new">75.81.255.73</a></li>
				<li id="pt-anontalk"><a href="User_talk_75.81.255.html"Array class="new">Talk for this IP address</a></li>
				<li id="pt-anonlogin"><a index.html?title=Special:UserLogin&amp;returnto=CEF+Tutorial"Array></a></li>
			</ul>
		</div>
	</div>
	
	<div class="portlet" id="p-logo">
		<a style="background-image: url();" href="Main_Page.html"Array></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
	<div class='generated-sidebar portlet' id='p-navigation'>
		<h5>Navigation</h5>
		<div class='pBody'>
			<ul>
				<li id="n-Home"><a href="Main_Page.html"Array>Home</a></li>
				<li id="n-How-you-can-help"><a href="How_you_can_help.html"Array>How you can help</a></li>
				<li id="n-recentchanges"><a href="Special_RecentChanges.html"Array>Recent changes</a></li>
				<li id="n-randompage"><a href="OnElementDataChange.html"Array>Random page</a></li>
			</ul>
		</div>
	</div>
	<div class='generated-sidebar portlet' id='p-reference'>
		<h5>reference</h5>
		<div class='pBody'>
			<ul>
				<li id="n-Client-Functions"><a href="Client_Scripting_Functions.html"Array>Client Functions</a></li>
				<li id="n-Client-Events"><a href="Client_Scripting_Events.html"Array>Client Events</a></li>
				<li id="n-Server-Functions"><a href="Server_Scripting_Functions.html"Array>Server Functions</a></li>
				<li id="n-Server-Events"><a href="Server_Scripting_Events.html"Array>Server Events</a></li>
				<li id="n-Useful-Functions"><a href="Useful_Functions.html"Array>Useful Functions</a></li>
				<li id="n-NRP-Classes"><a href="NRP_Classes.html"Array>NRP Classes</a></li>
				<li id="n-NRP-Elements"><a href="Element.html"Array>NRP Elements</a></li>
				<li id="n-Element-Tree"><a href="Element_tree.html"Array>Element Tree</a></li>
			</ul>
		</div>
	</div>
	<div id="p-search" class="portlet">
		
		<div id="searchBody" class="pBody">
			<form action="/index.php" id="searchform"><div>
				
				
				
				
			</div></form>
		</div>
	</div>
	<div class="portlet" id="p-tb">
		<h5>Tools</h5>
		<div class="pBody">
			<ul>
				<li id="t-whatlinkshere"><a href="Special_WhatLinksHere/CEF_Tutorial.html"Array>What links here</a></li>
				<li id="t-recentchangeslinked"><a href="Special_RecentChangesLinked/CEF_Tutorial.html"Array>Related changes</a></li>
<li id="t-specialpages"><a href="Special_SpecialPages.html"Array>Special pages</a></li>
				<li id="t-print"><a index.html?title=CEF_Tutorial&amp;printable=yes" rel="alternate"Array>Printable version</a></li>				<li id="t-permalink"><a index.html?title=CEF_Tutorial&amp;oldid=45688"Array>Permanent link</a></li>			</ul>
		</div>
	</div>
</div><!-- end of the left (by default at least) column -->
<div class="visualClear"></div>
			<div id="footer">
				<div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="../skins/common/images/poweredby_mediawiki_88x31.png" height="31" width="88" alt="Powered by MediaWiki" /></a></div>
				<div id="f-copyrightico"><a href="http://www.gnu.org/copyleft/fdl.html"><img src="../skins/common/images/gnu-fdl.png" alt="GNU Free Documentation License 1.2" width="88" height="31" /></a></div>
	<ul id="f-list">
					<li id="lastmod"> This page was last modified on 18 August 2015, at 09:34.</li>
					<li id="viewcount">This page has been accessed 3,413 times.</li>
					<li id="copyright">Content is available under <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.2</a> unless otherwise noted.</li>
					<li id="privacy"><a href="Nexus_RP__Wiki_Privacy_policy.html" title="Nexus RP: Wiki:Privacy policy">Privacy policy</a></li>
					<li id="about"><a href="Nexus_RP__Wiki_About.html" title="Nexus RP: Wiki:About">About Nexus RP: Wiki</a></li>
					<li id="disclaimer"><a href="Nexus_RP__Wiki_General_disclaimer.html" title="Nexus RP: Wiki:General disclaimer">Disclaimers</a></li>
			</ul>
</div>
</div>
<script>/*<![CDATA[*/window.jQuery && jQuery.ready();/*]]>*/</script><script>if(window.mw){
mw.loader.state({"site":"loading","user":"ready","user.groups":"ready"});
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.action.view.postEdit","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest","ext.cite"],null,true);
}</script>
<script src="/load.php?debug=false&amp;lang=en&amp;modules=site&amp;only=scripts&amp;skin=nrpbook&amp;*"></script>
<!-- Served in 0.213 secs. --></body>
<!-- Mirrored from wiki.nexusrp.com/wiki/CEF_Tutorial by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 27 Aug 2015 07:32:44 GMT -->
</html>
